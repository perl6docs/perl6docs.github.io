<!doctype html>
<html lang="en">
    <head>
        <title>Regexes</title>
        <meta charset="UTF-8" />
        <style>
        kbd { font-family: "Droid Sans Mono", "Luxi Mono", "Inconsolata", monospace }
        samp { font-family: "Terminus", "Courier", "Lucida Console", monospace }
        u { text-decoration: none }
        .nested {
            margin-left: 3em;
        }
        aside, u { opacity: 0.7 }
        a[id^="fn-"]:target { background: #ff0 }
        </style>
        
        
        <meta name=viewport content="width=device-width, initial-scale=1">
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" type="text/css" href="/css/app.css?v=7" media="screen" title="default" />
<noscript> <style> #search { visibility: hidden; } </style> </noscript>

    </head>
    <body class="pod">
    <div id="___top"></div>
    <div id="header" class="pretty-box green">
  <a href="/"
    ><img
      src="/images/Camelia.svg"
      alt="»ö«"
      id="logo"
      width="62"
      height="48"
    />&nbsp;Perl 6 Documentation</a
  >
  <div id="search" class="ui-widget">
    <div class="green">
      <input
        placeholder="Loading..."
        id="query"
        accesskey="f"
        title="Enter term to search for (hit Esc to focus)"
      />
    </div>
    <p id="not-found-message">
      Not in Index (<a href="" id="try-web-search">try site search</a>)
    </p>
  </div>
  <div class="menu">
    <div class="menu-items dark-green"><a class='menu-item darker-green' href='https://perl6.org'><strong>Perl&nbsp;6 homepage</strong></a>  <a class="menu-item selected darker-green" href="/language.html"> Language </a> <a class="menu-item " href="/type.html"> Types </a> <a class="menu-item " href="/routine.html"> Routines </a> <a class="menu-item " href="/programs.html"> Programs </a> <a class="menu-item " href="https://webchat.freenode.net/?channels=#perl6"> Chat with us </a></div>
  </div>
</div>
<!-- please make sure these two CAPITALIZED variables stay there -->

<div id="content" class="pretty-box yellow content__language_regexes">

    <h1 class='title'>Regexes</h1>
    <p class='subtitle'>Pattern matching against strings</p>
    <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
                      <tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#Lexical_conventions">Lexical conventions</a></td></tr>
       <tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="#Anonymous_regex_definition_syntax">Anonymous regex definition syntax</a></td></tr>
                                                     <tr class="toc-level-2"><td class="toc-number">1.2</td><td class="toc-text"><a href="#Named_regex_definition_syntax">Named regex definition syntax</a></td></tr>
                                                            <tr class="toc-level-2"><td class="toc-number">1.3</td><td class="toc-text"><a href="#Regex_readability:_whitespace_and_comments">Regex readability: whitespace and comments</a></td></tr>
          <tr class="toc-level-2"><td class="toc-number">1.4</td><td class="toc-text"><a href="#Match_syntax">Match syntax</a></td></tr>
                                                                                     <tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="#Literals_and_metacharacters">Literals and metacharacters</a></td></tr>
                                             <tr class="toc-level-1"><td class="toc-number">3</td><td class="toc-text"><a href="#Wildcards">Wildcards</a></td></tr>
                 <tr class="toc-level-1"><td class="toc-number">4</td><td class="toc-text"><a href="#Character_classes">Character classes</a></td></tr>
 <tr class="toc-level-2"><td class="toc-number">4.1</td><td class="toc-text"><a href="#Backslashed_character_classes">Backslashed character classes</a></td></tr>
      <tr class="toc-level-3"><td class="toc-number">4.1.1</td><td class="toc-text"><a href="#\n_and_\N"><code class="pod-code-inline">\n</code> and <code class="pod-code-inline">\N</code></a></td></tr>
                       <tr class="toc-level-3"><td class="toc-number">4.1.2</td><td class="toc-text"><a href="#\t_and_\T"><code class="pod-code-inline">\t</code> and <code class="pod-code-inline">\T</code></a></td></tr>
          <tr class="toc-level-3"><td class="toc-number">4.1.3</td><td class="toc-text"><a href="#\h_and_\H"><code class="pod-code-inline">\h</code> and <code class="pod-code-inline">\H</code></a></td></tr>
                   <tr class="toc-level-3"><td class="toc-number">4.1.4</td><td class="toc-text"><a href="#\v_and_\V"><code class="pod-code-inline">\v</code> and <code class="pod-code-inline">\V</code></a></td></tr>
                       <tr class="toc-level-3"><td class="toc-number">4.1.5</td><td class="toc-text"><a href="#\s_and_\S"><code class="pod-code-inline">\s</code> and <code class="pod-code-inline">\S</code></a></td></tr>
      <tr class="toc-level-3"><td class="toc-number">4.1.6</td><td class="toc-text"><a href="#\d_and_\D"><code class="pod-code-inline">\d</code> and <code class="pod-code-inline">\D</code></a></td></tr>
                    <tr class="toc-level-3"><td class="toc-number">4.1.7</td><td class="toc-text"><a href="#\w_and_\W"><code class="pod-code-inline">\w</code> and <code class="pod-code-inline">\W</code></a></td></tr>
                <tr class="toc-level-2"><td class="toc-number">4.2</td><td class="toc-text"><a href="#Predefined_character_classes">Predefined character classes</a></td></tr>
                                                                        <tr class="toc-level-2"><td class="toc-number">4.3</td><td class="toc-text"><a href="#Unicode_properties">Unicode properties</a></td></tr>
                                                                                                             <tr class="toc-level-2"><td class="toc-number">4.4</td><td class="toc-text"><a href="#Enumerated_character_classes_and_ranges">Enumerated character classes and ranges</a></td></tr>
                                       <tr class="toc-level-1"><td class="toc-number">5</td><td class="toc-text"><a href="#Quantifiers">Quantifiers</a></td></tr>
                     <tr class="toc-level-2"><td class="toc-number">5.1</td><td class="toc-text"><a href="#One_or_more:_+">One or more: <code class="pod-code-inline">+</code></a></td></tr>
        <tr class="toc-level-2"><td class="toc-number">5.2</td><td class="toc-text"><a href="#Zero_or_more:_*">Zero or more: <code class="pod-code-inline">*</code></a></td></tr>
          <tr class="toc-level-2"><td class="toc-number">5.3</td><td class="toc-text"><a href="#Zero_or_one:_?">Zero or one: <code class="pod-code-inline">?</code></a></td></tr>
          <tr class="toc-level-2"><td class="toc-number">5.4</td><td class="toc-text"><a href="#General_quantifier:_**_min..max">General quantifier: <code class="pod-code-inline">** min..max</code></a></td></tr>
                                                                                             <tr class="toc-level-2"><td class="toc-number">5.5</td><td class="toc-text"><a href="#Modified_quantifier:_%,_%%">Modified quantifier: <code class="pod-code-inline">%</code> , <code class="pod-code-inline">%%</code></a></td></tr>
                             <tr class="toc-level-2"><td class="toc-number">5.6</td><td class="toc-text"><a href="#Preventing_backtracking:_:">Preventing backtracking: <code class="pod-code-inline">:</code></a></td></tr>
                                                             <tr class="toc-level-2"><td class="toc-number">5.7</td><td class="toc-text"><a href="#Greedy_versus_frugal_quantifiers:_?">Greedy versus frugal quantifiers: <code class="pod-code-inline">?</code></a></td></tr>
              <tr class="toc-level-1"><td class="toc-number">6</td><td class="toc-text"><a href="#Alternation:_||">Alternation: <code class="pod-code-inline">||</code></a></td></tr>
                       <tr class="toc-level-1"><td class="toc-number">7</td><td class="toc-text"><a href="#Longest_alternation:_|">Longest alternation: <code class="pod-code-inline">|</code></a></td></tr>
                                           <tr class="toc-level-2"><td class="toc-number">7.1</td><td class="toc-text"><a href="#Quoted_lists_are_LTM_matches">Quoted lists are LTM matches</a></td></tr>
                         <tr class="toc-level-1"><td class="toc-number">8</td><td class="toc-text"><a href="#Conjunction:_&amp;&amp;">Conjunction: <code class="pod-code-inline">&amp;&amp;</code></a></td></tr>
                       <tr class="toc-level-1"><td class="toc-number">9</td><td class="toc-text"><a href="#Conjunction:_&amp;">Conjunction: <code class="pod-code-inline">&amp;</code></a></td></tr>
               <tr class="toc-level-1"><td class="toc-number">10</td><td class="toc-text"><a href="#Anchors">Anchors</a></td></tr>
  <tr class="toc-level-2"><td class="toc-number">10.1</td><td class="toc-text"><a href="#Start_of_string_and_end_of_string">Start of string and end of string</a></td></tr>
                          <tr class="toc-level-2"><td class="toc-number">10.2</td><td class="toc-text"><a href="#Start_of_line_and_end_of_line">Start of line and end of line</a></td></tr>
               <tr class="toc-level-2"><td class="toc-number">10.3</td><td class="toc-text"><a href="#Word_boundary">Word boundary</a></td></tr>
                 <tr class="toc-level-2"><td class="toc-number">10.4</td><td class="toc-text"><a href="#Left_and_right_word_boundary">Left and right word boundary</a></td></tr>
                     <tr class="toc-level-2"><td class="toc-number">10.5</td><td class="toc-text"><a href="#Summary_of_anchors">Summary of anchors</a></td></tr>
                                <tr class="toc-level-1"><td class="toc-number">11</td><td class="toc-text"><a href="#Zero-width_assertions">Zero-width assertions</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">11.1</td><td class="toc-text"><a href="#Lookaround_assertions">Lookaround assertions</a></td></tr>
                         <tr class="toc-level-2"><td class="toc-number">11.2</td><td class="toc-text"><a href="#Lookahead_assertions">Lookahead assertions</a></td></tr>
                                  <tr class="toc-level-2"><td class="toc-number">11.3</td><td class="toc-text"><a href="#Lookbehind_assertions">Lookbehind assertions</a></td></tr>
                                <tr class="toc-level-1"><td class="toc-number">12</td><td class="toc-text"><a href="#Grouping_and_capturing">Grouping and capturing</a></td></tr>
              <tr class="toc-level-2"><td class="toc-number">12.1</td><td class="toc-text"><a href="#Capturing">Capturing</a></td></tr>
                      <tr class="toc-level-2"><td class="toc-number">12.2</td><td class="toc-text"><a href="#Non-capturing_grouping">Non-capturing grouping</a></td></tr>
            <tr class="toc-level-2"><td class="toc-number">12.3</td><td class="toc-text"><a href="#Capture_numbers">Capture numbers</a></td></tr>
                                                                                       <tr class="toc-level-2"><td class="toc-number">12.4</td><td class="toc-text"><a href="#Named_captures">Named captures</a></td></tr>
                       <tr class="toc-level-2"><td class="toc-number">12.5</td><td class="toc-text"><a href="#Capture_markers:_&lt;(_)&gt;">Capture markers: <code class="pod-code-inline">&lt;( )&gt;</code></a></td></tr>
                      <tr class="toc-level-1"><td class="toc-number">13</td><td class="toc-text"><a href="#Substitution">Substitution</a></td></tr>
         <tr class="toc-level-2"><td class="toc-number">13.1</td><td class="toc-text"><a href="#Lexical_conventions">Lexical conventions</a></td></tr>
                          <tr class="toc-level-2"><td class="toc-number">13.2</td><td class="toc-text"><a href="#Replacing_string_literals">Replacing string literals</a></td></tr>
            <tr class="toc-level-2"><td class="toc-number">13.3</td><td class="toc-text"><a href="#Wildcards_and_character_classes">Wildcards and character classes</a></td></tr>
              <tr class="toc-level-2"><td class="toc-number">13.4</td><td class="toc-text"><a href="#Capturing_groups">Capturing groups</a></td></tr>
                                        <tr class="toc-level-2"><td class="toc-number">13.5</td><td class="toc-text"><a href="#Common_adverbs">Common adverbs</a></td></tr>
                                  <tr class="toc-level-2"><td class="toc-number">13.6</td><td class="toc-text"><a href="#S///_non-destructive_substitution"><code class="pod-code-inline">S///</code> non-destructive substitution</a></td></tr>
                             <tr class="toc-level-1"><td class="toc-number">14</td><td class="toc-text"><a href="#Tilde_for_nesting_structures">Tilde for nesting structures</a></td></tr>
                     <tr class="toc-level-1"><td class="toc-number">15</td><td class="toc-text"><a href="#Subrules">Subrules</a></td></tr>
                        <tr class="toc-level-1"><td class="toc-number">16</td><td class="toc-text"><a href="#Regex_interpolation">Regex interpolation</a></td></tr>
                                                                                                                                      <tr class="toc-level-2"><td class="toc-number">16.1</td><td class="toc-text"><a href="#Regex_boolean_condition_check">Regex boolean condition check</a></td></tr>
                                                                            <tr class="toc-level-1"><td class="toc-number">17</td><td class="toc-text"><a href="#Adverbs">Adverbs</a></td></tr>
                                          <tr class="toc-level-2"><td class="toc-number">17.1</td><td class="toc-text"><a href="#Regex_adverbs">Regex adverbs</a></td></tr>
                                <tr class="toc-level-3"><td class="toc-number">17.1.1</td><td class="toc-text"><a href="#Ignoremark">Ignoremark</a></td></tr>
            <tr class="toc-level-3"><td class="toc-number">17.1.2</td><td class="toc-text"><a href="#Ratchet">Ratchet</a></td></tr>
                                                     <tr class="toc-level-3"><td class="toc-number">17.1.3</td><td class="toc-text"><a href="#Sigspace">Sigspace</a></td></tr>
                                                                                                                                                      <tr class="toc-level-3"><td class="toc-number">17.1.4</td><td class="toc-text"><a href="#Perl_5_compatibility_adverb">Perl&nbsp;5 compatibility adverb</a></td></tr>
          <tr class="toc-level-2"><td class="toc-number">17.2</td><td class="toc-text"><a href="#Matching_adverbs">Matching adverbs</a></td></tr>
     <tr class="toc-level-3"><td class="toc-number">17.2.1</td><td class="toc-text"><a href="#Positional_adverbs">Positional adverbs</a></td></tr>
              <tr class="toc-level-3"><td class="toc-number">17.2.2</td><td class="toc-text"><a href="#Continue">Continue</a></td></tr>
                      <tr class="toc-level-3"><td class="toc-number">17.2.3</td><td class="toc-text"><a href="#Exhaustive">Exhaustive</a></td></tr>
                            <tr class="toc-level-3"><td class="toc-number">17.2.4</td><td class="toc-text"><a href="#Global">Global</a></td></tr>
             <tr class="toc-level-3"><td class="toc-number">17.2.5</td><td class="toc-text"><a href="#Pos">Pos</a></td></tr>
            <tr class="toc-level-3"><td class="toc-number">17.2.6</td><td class="toc-text"><a href="#Overlap">Overlap</a></td></tr>
                <tr class="toc-level-2"><td class="toc-number">17.3</td><td class="toc-text"><a href="#Substitution_adverbs">Substitution adverbs</a></td></tr>
      <tr class="toc-level-3"><td class="toc-number">17.3.1</td><td class="toc-text"><a href="#Samecase">Samecase</a></td></tr>
                 <tr class="toc-level-3"><td class="toc-number">17.3.2</td><td class="toc-text"><a href="#Samemark">Samemark</a></td></tr>
              <tr class="toc-level-3"><td class="toc-number">17.3.3</td><td class="toc-text"><a href="#Samespace">Samespace</a></td></tr>
                   <tr class="toc-level-1"><td class="toc-number">18</td><td class="toc-text"><a href="#Backtracking">Backtracking</a></td></tr>
                                                                                                                                                                                                                                                                              <tr class="toc-level-1"><td class="toc-number">19</td><td class="toc-text"><a href="#$/_changes_each_time_a_regular_expression_is_matched"><code class="pod-code-inline">$/</code> changes each time a regular expression is matched</a></td></tr>
                                                                 <tr class="toc-level-1"><td class="toc-number">20</td><td class="toc-text"><a href="#Best_practices_and_gotchas">Best practices and gotchas</a></td></tr>
   
</table>
</nav>

    <div class="pod-body">
    <p><a name="index-entry-Regular_Expressions"></a></p>
<p>A <em>regular expression</em> is a sequence of characters that defines a certain text pattern, typically one that one wishes to find in some large body of text.</p>
<p>In theoretical computer science and formal language theory, regular expressions are used to describe so-called <a href="https://en.wikipedia.org/wiki/Regular_language"><em>regular&nbsp;languages</em></a>. Since their inception in the 1950&#39;s, practical implementations of regular expressions, for instance in the text search and replace functions of text editors, have outgrown their strict scientific definition. In acknowledgement of this, and in an attempt to disambiguate, a regular expression in Perl&nbsp;6 is normally referred to as a <em>regex</em> (from: <em>reg</em>ular <em>ex</em>pression), a term that is also in common use in other programming languages.</p>
<p>In Perl&nbsp;6, regexes are written in a <a href="https://en.wikipedia.org/wiki/Domain-specific_language"><em>domain-specific language</em></a>, i.e. a sublanguage or <em>slang</em>. This page describes this language, and explains how regexes can be used to search for text patterns in strings in a process called <em>pattern matching</em>.</p>
<h1 id="Lexical_conventions"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-quote_/_/-quote_rx-quote_m-Lexical_conventions"><span class="index-entry">Lexical conventions</span></a></a></h1>
<p>Fundamentally, Perl&nbsp;6 regexes are very much like subroutines: both are code objects, and just as you can have anonymous subs and named subs, you can have anonymous and named regexes.</p>
<p>A regex, whether anonymous or named, is represented by a <a href="/type/Regex"><code>Regex</code></a> object. Yet, the syntax for constructing anonymous and named <code>Regex</code> objects differs. We will therefore discuss them in turn.</p>
<h2 id="Anonymous_regex_definition_syntax"><a class="u" href="#___top" title="go to top of document">Anonymous regex definition syntax</a></h2>
<p>An anonymous regex may be constructed in one of the following ways:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>rx</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>pattern</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;an&nbsp;anonymous&nbsp;Regex&nbsp;object;&nbsp;&#39;rx&#39;&nbsp;stands&nbsp;for&nbsp;&#39;regex&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>pattern</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;an&nbsp;anonymous&nbsp;Regex&nbsp;object;&nbsp;shorthand&nbsp;for&nbsp;&#39;rx/.../&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;pattern&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;keyword-declared&nbsp;anonymous&nbsp;regex;&nbsp;this&nbsp;form&nbsp;is</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;intended&nbsp;for&nbsp;defining&nbsp;named&nbsp;regexes&nbsp;and&nbsp;is&nbsp;discussed</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;in&nbsp;that&nbsp;context&nbsp;in&nbsp;the&nbsp;next&nbsp;section</span></span></span></div></pre><p>The <code>rx/ /</code> form has two advantages over the bare shorthand form <code>/ /</code>.</p>
<p>Firstly, it enables the use of delimiters other than the slash, which may be used to improve the readability of the regex definition:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>{</span></span><span class="fstring regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>/tmp/</span><span>&#39;</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>}</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;the&nbsp;use&nbsp;of&nbsp;curly&nbsp;braces&nbsp;as&nbsp;delimiters&nbsp;makes&nbsp;this&nbsp;first</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>rx</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>/tmp/</span><span>&#39;</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;definition&nbsp;somewhat&nbsp;easier&nbsp;on&nbsp;the&nbsp;eyes&nbsp;than&nbsp;the&nbsp;second</span></span></span></div></pre><p>Although the choice is vast, not every character may be chosen as an alternative regex delimiter:</p>
<ul><li><p>You cannot use whitespace or alphanumeric characters as delimiters. Whitespace in regex definition syntax is generally optional, except where it is required to distinguish from function call syntax (discussed hereafter).</p>
</li>
<li><p>Parentheses can be used as alternative regex delimiters, but only with a space between <code>rx</code> and the opening delimiter. This is because identifiers that are immediately followed by parentheses are always parsed as a subroutine call. For example, in <code>rx()</code> the <a href="/language/operators#postcircumfix_(_)">call operator</a> <code>()</code> invokes the subroutine <code>rx</code>. The form <code>rx ( abc )</code>, however, <em>does</em> define a <code>Regex</code> object.</p>
</li>
<li><p>Use of a colon as a delimiter would clash with the use of <a href="/language/regexes#Adverbs">adverbs</a>, which take the form <code>:adverb</code>; accordingly, such use of the colon is forbidden.</p>
</li>
<li><p>The hashmark <code>#</code> is not available as a delimiter since it is parsed as the start of a <a href="/language/syntax#Single-line_comments">comment</a> that runs until the end of the line.</p>
</li>
</ul>
<p>Secondly, the <code>rx</code> form enables the use of <a href="/language/regexes#Regex_adverbs">regex adverbs</a>, which may be placed between <code>rx</code> and the opening delimiter to modify the definition of the entire regex:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>rx</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:r:s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>pattern</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;:r&nbsp;(:ratchet)&nbsp;and&nbsp;:s&nbsp;(:sigspace)&nbsp;adverbs,&nbsp;defining</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;a&nbsp;ratcheting&nbsp;regex&nbsp;in&nbsp;which&nbsp;whitespace&nbsp;is&nbsp;significant</span></span></span></div></pre><p>Although anonymous regexes are not, as such, <em>named</em>, they may effectively be given a name by putting them inside a named variable, after which they can be referenced, both outside of an embedding regex and from within an embedding regex by means of <a href="/language/regexes#Regex_interpolation">interpolation</a>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;R&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Zen&nbsp;Buddhists&nbsp;like&nbsp;Raku&nbsp;too</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢Raku｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>pottery</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Japanese&nbsp;pottery&nbsp;rocks!</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>$</span><span class="variable other identifier regexname perl6fe"><span>regex</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Interpolation&nbsp;of&nbsp;$regex&nbsp;into&nbsp;/.../</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢pottery｣</span></span></span></div></pre><h2 id="Named_regex_definition_syntax"><a class="u" href="#___top" title="go to top of document">Named regex definition syntax</a></h2>
<p>A named regex may be constructed using the <code>regex</code> declarator as follows:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>R</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;pattern&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;a&nbsp;named&nbsp;Regex&nbsp;object,&nbsp;named&nbsp;&#39;R&#39;</span></span></span></div></pre><p>Unlike with the <code>rx</code> form, you cannot chose your preferred delimiter: curly braces are mandatory. In this regard it should be noted that the definition of a named regex using the <code>regex</code> form is syntactically similar to the definition of a subroutine:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="entity name function perl6fe"><span>S</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>pattern</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;definition&nbsp;of&nbsp;Sub&nbsp;object&nbsp;(returning&nbsp;a&nbsp;Regex)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>R</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;&nbsp;pattern&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;definition&nbsp;of&nbsp;Regex&nbsp;object</span></span></span></div></pre><p>which emphasizes the fact that a <a href="/type/Regex"><code>Regex</code></a> object represents code rather than data:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>S</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Code</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;True</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>R</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Code</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;True</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>R</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Method</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;True&nbsp;(A&nbsp;Regex&nbsp;is&nbsp;really&nbsp;a&nbsp;Method!)</span><span>&nbsp;</span></span></span></div></pre><p>Also unlike with the <code>rx</code> form for defining an anonymous regex, the definition of a named regex using the <code>regex</code> keyword does not allow for adverbs to be inserted before the opening delimiter. Instead, adverbs that are to modify the entire regex pattern may be included first thing within the curly braces:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>R</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;pattern&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;:i&nbsp;(:ignorecase),&nbsp;renders&nbsp;pattern&nbsp;case&nbsp;insensitive</span></span></span></div></pre><p>Alternatively, by way of shorthand, it is also possible (and recommended) to use the <code>rule</code> and <code>token</code> variants of the <code>regex</code> declarator for defining a <code>Regex</code> when the <code>:ratchet</code> and <code>:sigspace</code> adverbs are of interest:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>R</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:r</span></span><span>&nbsp;pattern&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;apply&nbsp;:r&nbsp;(:ratchet)&nbsp;to&nbsp;entire&nbsp;pattern</span><span>&nbsp;</span></span></span></div></pre><p>and, alternatively</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>R</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;pattern&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;same&nbsp;thing:&nbsp;&#39;token&#39;&nbsp;implies&nbsp;&#39;:r&#39;</span><span>&nbsp;</span></span></span></div></pre><p>Or</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>R</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:r</span></span><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:s</span></span><span>&nbsp;pattern&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;apply&nbsp;:r&nbsp;(:ratchet)&nbsp;and&nbsp;:s&nbsp;(:sigspace)&nbsp;to&nbsp;pattern</span><span>&nbsp;</span></span></span></div></pre><p>with this alternative:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>rule</span></span><span>&nbsp;&nbsp;</span><span class="entity name function regexp named perl6fe"><span>R</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;pattern&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;same&nbsp;thing:&nbsp;&#39;rule&#39;&nbsp;implies&nbsp;&#39;:r:s&#39;</span><span>&nbsp;</span></span></span></div></pre><p>Named regexes may be used as building blocks for other regexes, as they are methods that may called from within other regexes using the <code>&lt;regex-name&gt;</code> syntax. When they are used this way, they are often referred to as <em>subrules</em>; see for more details on their use <a href="/language/regexes#Subrules">here</a>. <a href="/type/Grammar"><code>Grammars</code></a> are the natural habitat of subrules, but many common predefined character classes are also implemented as named regexes.</p>
<h2 id="Regex_readability:_whitespace_and_comments"><a class="u" href="#___top" title="go to top of document">Regex readability: whitespace and comments</a></h2>
<p>Whitespace in regexes is ignored unless the <a href="/language/regexes#Sigspace"><code>:sigspace</code></a> adverb is used to make whitespace syntactically significant.</p>
<p>In addition to whitespace, comments may be used inside of regexes to improve their comprehensibility just as in code in general. This is true for both <a href="/language/syntax#Single-line_comments">single line comments</a> and <a href="/language/syntax#Multi-line_/_embedded_comments">multi line/embedded comments</a>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>`(match&nbsp;the&nbsp;year&nbsp;YYYY)</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>-</span><span>&#39;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;...the&nbsp;month&nbsp;MM</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>-</span><span>&#39;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;2&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;...and&nbsp;the&nbsp;day&nbsp;DD</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>2015-12-25</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢2015-12-25｣␤»</span></span></span></div></pre><h2 id="Match_syntax"><a class="u" href="#___top" title="go to top of document">Match syntax</a></h2>
<p>There are a variety of ways to match a string against a regex. Irrespective of the syntax chosen, a successful match results in a <a href="/type/Match"><code>Match</code></a> object. In case the match is unsuccessful, the result is <a href="/type/Nil"><code>Nil</code></a>. In either case, the result of the match operation is available via the special match variable <a href="/syntax/$$SOLIDUS"><code>$/</code></a>.</p>
<p>The most common ways to match a string against an anonymous regex <code>/pattern/</code> or against a named regex <code>R</code> include the following:</p>
<ul><li><p><em>Smartmatch: &quot;string&quot; ~~ /pattern/, or &quot;string&quot; ~~ /&lt;R&gt;/</em></p>
<p><a href="/language/operators#index-entry-smartmatch_operator">Smartmatching</a> a string against a <code>Regex</code> performs a regex match of the string against the <code>Regex</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Go&nbsp;ahead,&nbsp;make&nbsp;my&nbsp;day.</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢Go｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>R</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;me</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>you&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>You&nbsp;talkin&#39;&nbsp;to&nbsp;me?</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>R</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢me｣␤&nbsp;R&nbsp;=&gt;&nbsp;｢me｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>May&nbsp;the&nbsp;force&nbsp;be&nbsp;with&nbsp;you.</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>R</span></span></span><span>&nbsp;;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢you｣␤»</span></span></span></div></pre><p>The different outputs of the last two statements show that these two ways of smartmatching against a named regex are not identical. The difference arises because the method call <code>&lt;R&gt;</code> from within the anonymous regex <code>/ /</code> installs a so-called <a href="/language/regexes#Named_captures">&#39;named capture&#39;</a> in the <code>Match</code> object, while the smartmatch against the named <code>Regex</code> as such does not.</p>
</li>
<li><p><em>Explicit topic match: m/pattern/, or m/&lt;R&gt;/</em></p>
<p>The match operator <code>m/ /</code> immediately matches the topic variable <a href="/language/variables#index-entry-topic_variable"><code>$_</code></a> against the regex following the <code>m</code>.</p>
<p>As with the <code>rx/ /</code> syntax for regex definitions, the match operator may be used with adverbs in between <code>m</code> and the opening regex delimiter, and with delimiters other than the slash. However, while the <code>rx/ /</code> syntax may only be used with <a href="/language/regexes#Regex_adverbs"><em>regex adverbs</em></a> that affect the compilation of the regex, the <code>m/ /</code> syntax may additionally be used with <a href="/language/regexes#Matching_adverbs"><em>matching adverbs</em></a> that determine how the regex engine is to perform pattern matching.</p>
<p>Here&#39;s an example that illustrates the primary difference between the <code>m/ /</code> and <code>/ /</code> syntax:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢abc｣␤Match␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«/.+/␤Regex␤»</span></span></span></div></pre></li>
<li><p><em>Implicit topic match in sink and boolean contexts</em></p>
<p>In case a <code>Regex</code> object is used in sink context, or in a context in which it is coerced to <a href="/type/Bool"><code>Bool</code></a>, the topic variable <a href="/language/variables#index-entry-topic_variable"><code>$_</code></a> is automatically matched against it:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>dummy&nbsp;string</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Set&nbsp;the&nbsp;topic&nbsp;explicitly</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>rx</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;s</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Regex&nbsp;object&nbsp;in&nbsp;sink&nbsp;context&nbsp;matches&nbsp;automatically</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢string｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string regexp construct slash perl6fe"><span>rx</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;d</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Regex&nbsp;object&nbsp;in&nbsp;boolean&nbsp;context&nbsp;matches&nbsp;automatically</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢dummy&nbsp;string｣</span></span></span></div></pre></li>
<li><p><em>Match method: &quot;string&quot;.match: /pattern/, or &quot;string&quot;.match: /&lt;R&gt;/</em></p>
<p>The <a href="/type/Str#method_match"><code>match</code></a> method is analogous to the <code>m/ /</code> operator discussed above. Invoking it on a string, with a <code>Regex</code> as an argument, matches the string against the <code>Regex</code>.</p>
</li>
<li><p><em>Parsing grammars: grammar-name.parse($string)</em></p>
<p>Although parsing a <a href="/language/grammars">Grammar</a> involves more than just matching a string against a regex, this powerful regex-based text destructuring tool can&#39;t be left out from this overview of common pattern matching methods.</p>
<p>If you feel that your needs exceed what simple regexes have to offer, check out this <a href="grammar tutorial">grammar tutorial</a>|/language/grammar_tutorial&gt; to take regexes to the next level.</p>
</li>
</ul>
<h1 id="Literals_and_metacharacters"><a class="u" href="#___top" title="go to top of document">Literals and metacharacters</a></h1>
<p>A regex describes a pattern to be matched in terms of literals and metacharacters. Alphanumeric characters and the underscore <code>_</code> constitute the literals: these characters match themselves and nothing else. Other characters act as metacharacters and may, as such, have a special meaning, either by themselves (such as the dot <code>.</code>, which serves as a wildcard) or together with other characters in larger metasyntactic constructs (such as <code>&lt;?before ...&gt;</code>, which defines a lookahead assertion).</p>
<p>In its simplest form a regex comprises only literals:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>Cześć</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&quot;Hello&quot;&nbsp;in&nbsp;Polish</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>こんばんは</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&quot;Good&nbsp;afternoon&quot;&nbsp;in&nbsp;Japanese</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>Καλησπέρα</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&quot;Good&nbsp;evening&quot;&nbsp;in&nbsp;Greek</span></span></span></div></pre><p>If you want a regex to literally match one or more characters that normally act as metacharacters, those characters must either be escaped using a backslash, or be quoted using single or double quotes.</p>
<p>The backslash serves as a switch. It switches a single metacharacter into a literal, and vice versa:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;\</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;the&nbsp;hash&nbsp;metacharacter&nbsp;literally</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;turns&nbsp;literal&nbsp;&#39;w&#39;&nbsp;into&nbsp;a&nbsp;character&nbsp;class&nbsp;(see&nbsp;below)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>Hallelujah\!</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;string&nbsp;&#39;Hallelujah!&#39;&nbsp;incl.&nbsp;exclamation&nbsp;mark</span></span></span></div></pre><p>Even if a metacharacter does not (yet) have a special meaning in Perl&nbsp;6, escaping (or quoting) it is required to ensure that the regex compiles and matches the character literally. This allows the clear distinction between literals and metacharacters to be maintained. So, for instance, to match a comma this will work:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;\,&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;a&nbsp;literal&nbsp;comma&nbsp;&#39;,&#39;</span></span></span></div></pre><p>while this will fail:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;,&nbsp;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;!!&nbsp;error:&nbsp;an&nbsp;as-yet&nbsp;meaningless/unrecognized&nbsp;metacharacter</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;does&nbsp;not&nbsp;automatically&nbsp;match&nbsp;literally</span><span>&nbsp;</span></span></span></div></pre><p>While an escaping backslash exerts its effect on the next individual character, both a single metacharacter and a sequence of metacharacters may be turned into literally matching strings by quoting them in single or double quotes:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>abc</span><span>&quot;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;quoting&nbsp;literals&nbsp;does&nbsp;not&nbsp;make&nbsp;them&nbsp;more&nbsp;literal</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>Hallelujah!</span><span>&quot;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;yet,&nbsp;this&nbsp;form&nbsp;is&nbsp;generally&nbsp;preferred&nbsp;over&nbsp;/Hallelujah\!/</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>two&nbsp;words</span><span>&quot;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;quoting&nbsp;a&nbsp;space&nbsp;renders&nbsp;it&nbsp;significant,&nbsp;so&nbsp;this&nbsp;matches</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;the&nbsp;string&nbsp;&#39;two&nbsp;words&#39;&nbsp;including&nbsp;the&nbsp;intermediate&nbsp;space</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>#!:@</span><span>&#39;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;this&nbsp;regex&nbsp;matches&nbsp;the&nbsp;string&nbsp;of&nbsp;metacharacters&nbsp;&#39;#!:@&#39;</span></span></span></div></pre><p>Quoting does not simply turn every metacharacter into a literal, however. This is because quotes allow for backslash-escapes and interpolation. Specifically: in single quotes, the backslash may be used to escape single quotes and the backslash itself; double quotes additionally enable the interpolation of variables, and of code blocks of the form <code>{...}</code>. Hence all of this works:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>\\\</span><span>&#39;</span><span>&#39;</span><span>&nbsp;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;a&nbsp;backslash&nbsp;followed&nbsp;by&nbsp;a&nbsp;single&nbsp;quote:&nbsp;\&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>x</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Hi</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>$x&nbsp;there!</span><span>&quot;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;the&nbsp;string&nbsp;&#39;Hi&nbsp;there!&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>1&nbsp;+&nbsp;1&nbsp;=&nbsp;{1+1}</span><span>&quot;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;the&nbsp;string&nbsp;&#39;1&nbsp;+&nbsp;1&nbsp;=&nbsp;2&#39;</span></span></span></div></pre><p>while these examples illustrate mistakes that you will want to avoid:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>\&#39;&nbsp;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;!!&nbsp;error:&nbsp;this&nbsp;is&nbsp;NOT&nbsp;the&nbsp;way&nbsp;to&nbsp;literally&nbsp;match&nbsp;a</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;backslash&nbsp;because&nbsp;now&nbsp;it&nbsp;escapes&nbsp;the&nbsp;second&nbsp;quote</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="string literal perl6fe"><span>&quot;</span><span>Price&nbsp;tag&nbsp;$0.50</span><span>&quot;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;!!&nbsp;error:&nbsp;&quot;$0&quot;&nbsp;is&nbsp;interpreted&nbsp;as&nbsp;the&nbsp;first&nbsp;positional</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;capture&nbsp;(which&nbsp;is&nbsp;Nil),&nbsp;not&nbsp;as&nbsp;&#39;$0&#39;</span><span>&nbsp;</span></span></span></div></pre><p>Strings are searched left to right, so it is enough if only part of the string matches the regex:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Life,&nbsp;the&nbsp;Universe&nbsp;and&nbsp;Everything</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;and&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«and␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>prematch</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Life,&nbsp;the&nbsp;Universe&nbsp;␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>postmatch</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«&nbsp;Everything␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>from</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«19␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>to</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«22␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>;</span></span></div></pre><p>Match results are always stored in the <code>$/</code> variable and are also returned from the match. They are both of type <a href="/type/Match">Match</a> if the match was successful; otherwise both are of type <a href="/type/Nil">Nil</a>.</p>
<h1 id="Wildcards"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex__.-Wildcards"><span class="index-entry">Wildcards</span></a></a></h1>
<p>An unescaped dot <code>.</code> in a regex matches any single character.</p>
<p>So, these all match:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>per</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;the&nbsp;whole&nbsp;string</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;per&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;the&nbsp;same;&nbsp;whitespace&nbsp;is&nbsp;ignored</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;pe</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>l&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;the&nbsp;.&nbsp;matches&nbsp;the&nbsp;r</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>speller</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;pe</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>l</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;the&nbsp;.&nbsp;matches&nbsp;the&nbsp;first&nbsp;l</span></span></span></div></pre><p>while this doesn&#39;t match:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;per&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div></pre><p>because there&#39;s no character to match before <code>per</code> in the target string.</p>
<p>Notably <code>.</code> also matches a logical newline <code>\n</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>text</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted heredoc perl6fe"><span class="string quoted construct perl6fe"><span>qq</span></span><span class="support function adverb perl6fe"><span>:to</span></span><span>/</span><span class="entity other attribute-name heredoc delimiter perl6fe"><span>END</span></span><span>/</span><span class="meta heredoc continuation perl6fe"><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted heredoc perl6fe"><span>&nbsp;&nbsp;Although&nbsp;I&nbsp;am&nbsp;a</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted heredoc perl6fe"><span>&nbsp;&nbsp;multi-line&nbsp;text,</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted heredoc perl6fe"><span>&nbsp;&nbsp;I&nbsp;can&nbsp;be&nbsp;matched</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted heredoc perl6fe"><span>&nbsp;&nbsp;with&nbsp;/.*/.</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted heredoc perl6fe"><span class="entity other attribute-name heredoc delimiter perl6fe"><span>&nbsp;&nbsp;END</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;;</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>text</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT&nbsp;«｢Although&nbsp;I&nbsp;am&nbsp;a␤multi-line&nbsp;text,␤I&nbsp;can&nbsp;be&nbsp;matched␤with&nbsp;/.*/.␤｣»</span></span></span></div></pre><h1 id="Character_classes"><a class="u" href="#___top" title="go to top of document">Character classes</a></h1>
<h2 id="Backslashed_character_classes"><a class="u" href="#___top" title="go to top of document">Backslashed character classes</a></h2>
<p>There are predefined character classes of the form <code>\w</code>. Its negation is written with an upper-case letter, <code>\W</code>.</p>
<h3 id="\n_and_\N"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_\n-regex_\N-\n_and_\N"><span class="index-entry"><code>\n</code> and <code>\N</code></span></a></a></h3>
<p><code>\n</code> matches a logical newline. <code>\N</code> matches a single character that&#39;s not a logical newline.</p>
<p>The definition of what constitutes a logical newline follows the <a href="https://unicode.org/reports/tr18/#Line_Boundaries">Unicode definition of a line boundary</a> and includes in particular all of: a line feed (LF) <code>\U+000A</code>, a vertical tab (VT) <code>\U+000B</code>, a form feed (FF) <code>\U+000C</code>, a carriage return (CR) <code>\U+000D</code>, and the Microsoft Windows style newline sequence CRLF.</p>
<p>The interpretation of <code>\n</code> in regexes is independent of the value of the variable <code>$?NL</code> controlled by the <a href="/language/pragmas#newline">newline pragma</a>.</p>
<h3 id="\t_and_\T"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_\t-regex_\T-\t_and_\T"><span class="index-entry"><code>\t</code> and <code>\T</code></span></a></a></h3>
<p><code>\t</code> matches a single tab/tabulation character, <code>U+0009</code>. <code>\T</code> matches a single character that is not a tab.</p>
<p>Note that exotic tabs like the <code>U+000B VERTICAL TABULATION</code> character are not included here.</p>
<h3 id="\h_and_\H"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_\h-regex_\H-\h_and_\H"><span class="index-entry"><code>\h</code> and <code>\H</code></span></a></a></h3>
<p><code>\h</code> matches a single horizontal whitespace character. <code>\H</code> matches a single character that is not a horizontal whitespace character.</p>
<p>Examples of horizontal whitespace characters are</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>0020&nbsp;</span><span class="routine name perl6fe"><span>SPACE</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>00A0&nbsp;</span><span class="routine name perl6fe"><span>NO-BREAK</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SPACE</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>0009&nbsp;</span><span class="routine name perl6fe"><span>CHARACTER</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>TABULATION</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>2001&nbsp;</span><span class="routine name perl6fe"><span>EM</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>QUAD</span></span></span></div></pre><p>Vertical whitespace such as newline characters are explicitly excluded; those can be matched with <code>\v</code>; <code>\s</code> matches any kind of whitespace.</p>
<h3 id="\v_and_\V"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_\v-regex_\V-\v_and_\V"><span class="index-entry"><code>\v</code> and <code>\V</code></span></a></a></h3>
<p><code>\v</code> matches a single vertical whitespace character. <code>\V</code> matches a single character that is not vertical whitespace.</p>
<p>Examples of vertical whitespace characters:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>000A&nbsp;</span><span class="routine name perl6fe"><span>LINE</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>FEED</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>000B&nbsp;</span><span class="routine name perl6fe"><span>VERTICAL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>TABULATION</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>000C&nbsp;</span><span class="routine name perl6fe"><span>FORM</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>FEED</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>000D&nbsp;</span><span class="routine name perl6fe"><span>CARRIAGE</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>RETURN</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>0085&nbsp;</span><span class="keyword control closure trait perl6fe"><span>NEXT</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>LINE</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>2028&nbsp;</span><span class="routine name perl6fe"><span>LINE</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SEPARATOR</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>2029&nbsp;</span><span class="routine name perl6fe"><span>PARAGRAPH</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SEPARATOR</span></span></span></div></pre><p>Use <code>\s</code> to match any kind of whitespace, not just vertical whitespace.</p>
<h3 id="\s_and_\S"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_\s-regex_\S-\s_and_\S"><span class="index-entry"><code>\s</code> and <code>\S</code></span></a></a></h3>
<p><code>\s</code> matches a single whitespace character. <code>\S</code> matches a single character that is not whitespace.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>prematch</span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Match&nbsp;the&nbsp;first&nbsp;word.</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Match␤»</span></span></span></div></pre><h3 id="\d_and_\D"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_\d-regex_\D-\d_and_\D"><span class="index-entry"><code>\d</code> and <code>\D</code></span></a></a></h3>
<p><code>\d</code> matches a single digit (Unicode property <code>N</code>) and <code>\D</code> matches a single character that is not a digit.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>ab42</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\d</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>and</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«4␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>ab42</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\D</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>and</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«a␤»</span></span></span></div></pre><p>Note that not only the Arabic digits (commonly used in the Latin alphabet) match <code>\d</code>, but also digits from other scripts.</p>
<p>Examples of digits are:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>0035&nbsp;</span><span class="constant numeric perl6fe"><span>5</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>DIGIT</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>FIVE</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>0BEB&nbsp;</span><span class="constant numeric perl6fe"><span>௫</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>TAMIL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>DIGIT</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>FIVE</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>0E53&nbsp;</span><span class="constant numeric perl6fe"><span>๓</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>THAI</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>DIGIT</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>THREE</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>U</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>17E5&nbsp;</span><span class="constant numeric perl6fe"><span>៥</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>KHMER</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>DIGIT</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>FIVE</span></span></span></div></pre><h3 id="\w_and_\W"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_\w-regex_\W-\w_and_\W"><span class="index-entry"><code>\w</code> and <code>\W</code></span></a></a></h3>
<p><code>\w</code> matches a single word character, i.e. a letter (Unicode category L), a digit or an underscore. <code>\W</code> matches a single character that is not a word character.</p>
<p>Examples of word characters:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="constant numeric perl6fe"><span>0041</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>A</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>LATIN</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>CAPITAL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>LETTER</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>A</span></span></span></div><div class="line"><span class="source perl6fe"><span class="constant numeric perl6fe"><span>0031</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>DIGIT</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>ONE</span></span></span></div><div class="line"><span class="source perl6fe"><span class="constant numeric perl6fe"><span>03</span></span><span>B4&nbsp;δ&nbsp;</span><span class="routine name perl6fe"><span>GREEK</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SMALL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>LETTER</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>DELTA</span></span></span></div><div class="line"><span class="source perl6fe"><span class="constant numeric perl6fe"><span>03</span></span><span>F3&nbsp;ϳ&nbsp;</span><span class="routine name perl6fe"><span>GREEK</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>LETTER</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>YOT</span></span></span></div><div class="line"><span class="source perl6fe"><span class="constant numeric perl6fe"><span>0409</span></span><span>&nbsp;Љ&nbsp;</span><span class="routine name perl6fe"><span>CYRILLIC</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>CAPITAL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>LETTER</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>LJE</span></span></span></div></pre><h2 id="Predefined_character_classes"><a class="u" href="#___top" title="go to top of document">Predefined character classes</a></h2>
<table class="pod-table">
<thead><tr>
<th>Class</th> <th>Shorthand</th> <th>Description</th>
</tr></thead>
<tbody>
<tr> <td>&lt;alpha&gt;</td> <td></td> <td>Alphabetic characters plus underscore (_)</td> </tr> <tr> <td>&lt;digit&gt;</td> <td>\d</td> <td>Decimal digits</td> </tr> <tr> <td>&lt;xdigit&gt;</td> <td></td> <td>Hexadecimal digit [0-9A-Fa-f]</td> </tr> <tr> <td>&lt;alnum&gt;</td> <td>\w</td> <td>&lt;alpha&gt; plus &lt;digit&gt;</td> </tr> <tr> <td>&lt;punct&gt;</td> <td></td> <td>Punctuation and Symbols (only Punct beyond ASCII)</td> </tr> <tr> <td>&lt;graph&gt;</td> <td></td> <td>&lt;alnum&gt; plus &lt;punct&gt;</td> </tr> <tr> <td>&lt;space&gt;</td> <td>\s</td> <td>Whitespace</td> </tr> <tr> <td>&lt;cntrl&gt;</td> <td></td> <td>Control characters</td> </tr> <tr> <td>&lt;print&gt;</td> <td></td> <td>&lt;graph&gt; plus &lt;space&gt;, but no &lt;cntrl&gt;</td> </tr> <tr> <td>&lt;blank&gt;</td> <td>\h</td> <td>Horizontal whitespace</td> </tr> <tr> <td>&lt;lower&gt;</td> <td>&lt;:Ll&gt;</td> <td>Lowercase characters</td> </tr> <tr> <td>&lt;upper&gt;</td> <td>&lt;:Lu&gt;</td> <td>Uppercase characters</td> </tr> <tr> <td>&lt;same&gt;</td> <td></td> <td>Matches between two identical characters</td> </tr> <tr> <td>&lt;wb&gt;</td> <td></td> <td>Word boundary</td> </tr> <tr> <td>&lt;ws&gt;</td> <td></td> <td>Whitespace. This is actually a default rule.</td> </tr> <tr> <td>&lt;ww&gt;</td> <td></td> <td>Within word</td> </tr> <tr> <td>&lt;ident&gt;</td> <td></td> <td>Identifier. Also a default rule.</td> </tr>
</tbody>
</table><p>The predefined character classes in the leftmost column are all of the form <code>&lt;name&gt;</code>, a hint to the fact that they are implemented as built-in <a href="/language/regexes#Subrules">named regexes</a>. As such they are subject to the usual capturing semantics. This means that if a character class is called with the syntax <code>&lt;name&gt;</code> (i.e. as indicated in the leftmost column), it will not only match, but also capture, installing a correspondingly named <a href="/language/regexes#Named_captures">&#39;named capture&#39;</a> in the resulting <a href="/type/Match">Match object</a>. In case just a match and no capture is desired, the capture may be suppressed through the use of call syntax that includes a leading dot: <code>&lt;.name&gt;</code>.</p>
<p>Note that the character classes <code>&lt;same&gt;</code>, <code>&lt;wb&gt;</code> and <code>&lt;ww&gt;</code> are so-called zero-width assertions, which do not really match any character.</p>
<h2 id="Unicode_properties"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_<:property>-Unicode_properties"><span class="index-entry">Unicode properties</span></a></a></h2>
<p>The character classes mentioned so far are mostly for convenience; another approach is to use Unicode character properties. These come in the form <code>&lt;:property&gt;</code>, where <code>property</code> can be a short or long Unicode General Category name. These use pair syntax.</p>
<p>To match against a Unicode property you can use either smartmatch or <a href="/routine/uniprop"><code>uniprop</code></a>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>uniprop</span></span><span>(</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Script</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Latin␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta property name regexp perl6fe"><span class="punctuation definition property regexp perl6fe"><span>:</span></span><span class="variable other identifier property regexp perl6fe"><span>Script</span></span></span><span>&lt;</span><span class="variable other identifier regexname perl6fe"><span>Latin</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&gt;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢a｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>uniprop</span></span><span>(</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Block</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Basic&nbsp;Latin␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta property name regexp perl6fe"><span class="punctuation definition property regexp perl6fe"><span>:</span></span><span class="variable other identifier property regexp perl6fe"><span>Block</span></span></span><span class="meta rule signature perl6fe"><span>(</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Basic&nbsp;Latin</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>)</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢a｣␤»</span></span></span></div></pre><p>These are the Unicode general categories used for matching:</p>
<table class="pod-table">
<thead><tr>
<th>Short</th> <th>Long</th>
</tr></thead>
<tbody>
<tr> <td>L</td> <td>Letter</td> </tr> <tr> <td>LC</td> <td>Cased_Letter</td> </tr> <tr> <td>Lu</td> <td>Uppercase_Letter</td> </tr> <tr> <td>Ll</td> <td>Lowercase_Letter</td> </tr> <tr> <td>Lt</td> <td>Titlecase_Letter</td> </tr> <tr> <td>Lm</td> <td>Modifier_Letter</td> </tr> <tr> <td>Lo</td> <td>Other_Letter</td> </tr> <tr> <td>M</td> <td>Mark</td> </tr> <tr> <td>Mn</td> <td>Nonspacing_Mark</td> </tr> <tr> <td>Mc</td> <td>Spacing_Mark</td> </tr> <tr> <td>Me</td> <td>Enclosing_Mark</td> </tr> <tr> <td>N</td> <td>Number</td> </tr> <tr> <td>Nd</td> <td>Decimal_Number or digit</td> </tr> <tr> <td>Nl</td> <td>Letter_Number</td> </tr> <tr> <td>No</td> <td>Other_Number</td> </tr> <tr> <td>P</td> <td>Punctuation or punct</td> </tr> <tr> <td>Pc</td> <td>Connector_Punctuation</td> </tr> <tr> <td>Pd</td> <td>Dash_Punctuation</td> </tr> <tr> <td>Ps</td> <td>Open_Punctuation</td> </tr> <tr> <td>Pe</td> <td>Close_Punctuation</td> </tr> <tr> <td>Pi</td> <td>Initial_Punctuation</td> </tr> <tr> <td>Pf</td> <td>Final_Punctuation</td> </tr> <tr> <td>Po</td> <td>Other_Punctuation</td> </tr> <tr> <td>S</td> <td>Symbol</td> </tr> <tr> <td>Sm</td> <td>Math_Symbol</td> </tr> <tr> <td>Sc</td> <td>Currency_Symbol</td> </tr> <tr> <td>Sk</td> <td>Modifier_Symbol</td> </tr> <tr> <td>So</td> <td>Other_Symbol</td> </tr> <tr> <td>Z</td> <td>Separator</td> </tr> <tr> <td>Zs</td> <td>Space_Separator</td> </tr> <tr> <td>Zl</td> <td>Line_Separator</td> </tr> <tr> <td>Zp</td> <td>Paragraph_Separator</td> </tr> <tr> <td>C</td> <td>Other</td> </tr> <tr> <td>Cc</td> <td>Control or cntrl</td> </tr> <tr> <td>Cf</td> <td>Format</td> </tr> <tr> <td>Cs</td> <td>Surrogate</td> </tr> <tr> <td>Co</td> <td>Private_Use</td> </tr> <tr> <td>Cn</td> <td>Unassigned</td> </tr>
</tbody>
</table><p>For example, <code>&lt;:Lu&gt;</code> matches a single, upper-case letter.</p>
<p>Its negation is this: <code>&lt;:!property&gt;</code>. So, <code>&lt;:!Lu&gt;</code> matches a single character that is not an upper-case letter.</p>
<p>Categories can be used together, with an infix operator:</p>
<table class="pod-table">
<thead><tr>
<th>Operator</th> <th>Meaning</th>
</tr></thead>
<tbody>
<tr> <td>+</td> <td>set union</td> </tr> <tr> <td>-</td> <td>set difference</td> </tr>
</tbody>
</table><p>To match either a lower-case letter or a number, write <code>&lt;:Ll+:N&gt;</code> or <code>&lt;:Ll+:Number&gt;</code> or <code>&lt;+ :Lowercase_Letter + :Number&gt;</code>.</p>
<p>It&#39;s also possible to group categories and sets of categories with parentheses; for example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$0</span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perl6</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>(</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta property name regexp perl6fe"><span class="punctuation definition property regexp perl6fe"><span>:</span></span><span class="variable other identifier property regexp perl6fe"><span>Ll</span></span></span><span class="keyword operator property regexp perl6fe"><span>+</span></span><span class="meta property name regexp perl6fe"><span class="punctuation definition property regexp perl6fe"><span>:</span></span><span class="variable other identifier property regexp perl6fe"><span>N</span></span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢6｣␤»</span></span></span></div></pre><h2 id="Enumerated_character_classes_and_ranges"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_<[_]>-regex_<-[_]>-Enumerated_character_classes_and_ranges"><span class="index-entry">Enumerated character classes and ranges</span></a></a></h2>
<p>Sometimes the pre-existing wildcards and character classes are not enough. Fortunately, defining your own is fairly simple. Within <code>&lt;[ ]&gt;</code>, you can put any number of single characters and ranges of characters (expressed with two dots between the end points), with or without whitespace.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abacabadabacaba</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>&nbsp;a&nbsp;..&nbsp;c&nbsp;1&nbsp;2&nbsp;3&nbsp;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Unicode&nbsp;hex&nbsp;codepoint&nbsp;range</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>ÀÁÂÃÄÅÆ</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>&nbsp;</span><span class="punctuation hex perl6fe"><span class="keyword punctuation hex perl6fe"><span>\x</span></span><span class="keyword operator bracket open perl6fe"><span>[</span></span><span class="routine name hex perl6fe"><span>00C0</span></span><span class="keyword operator bracket close perl6fe"><span>]</span></span></span><span>&nbsp;..&nbsp;</span><span class="punctuation hex perl6fe"><span class="keyword punctuation hex perl6fe"><span>\x</span></span><span class="keyword operator bracket open perl6fe"><span>[</span></span><span class="routine name hex perl6fe"><span>00C6</span></span><span class="keyword operator bracket close perl6fe"><span>]</span></span></span><span>&nbsp;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Unicode&nbsp;named&nbsp;codepoint&nbsp;range</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>αβγ</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>\c[GREEK&nbsp;SMALL&nbsp;LETTER&nbsp;ALPHA</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span>..\</span><span class="variable other identifier regexname perl6fe"><span>c</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>GREEK&nbsp;SMALL&nbsp;LETTER&nbsp;GAMMA</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span>]</span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div></pre><p>Within the <code>&lt; &gt;</code> you can use <code>+</code> and <code>-</code> to add or remove multiple range definitions and even mix in some of the Unicode categories above. You can also write the backslashed forms for character classes between the <code>[ ]</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>\d</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span>&nbsp;</span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span>&nbsp;</span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>13579</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;starts&nbsp;with&nbsp;\d&nbsp;and&nbsp;removes&nbsp;odd&nbsp;ASCII&nbsp;digits,&nbsp;but&nbsp;not&nbsp;quite&nbsp;the&nbsp;same&nbsp;as</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>02468</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;because&nbsp;the&nbsp;first&nbsp;one&nbsp;also&nbsp;contains&nbsp;&quot;weird&quot;&nbsp;unicodey&nbsp;digits</span></span></span></div></pre><p>You can include Unicode properties in the list as well:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta property name regexp perl6fe"><span class="punctuation definition property regexp perl6fe"><span>:</span></span><span class="variable other identifier property regexp perl6fe"><span>Zs</span></span></span><span>&nbsp;</span><span class="keyword operator property regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>\x9</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span>&nbsp;</span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span>&nbsp;</span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>\xA0</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Any&nbsp;character&nbsp;with&nbsp;&quot;Zs&quot;&nbsp;property,&nbsp;or&nbsp;a&nbsp;tab,&nbsp;but&nbsp;not&nbsp;a&nbsp;&quot;no-break&nbsp;space&quot;</span></span></span></div></pre><p><a name="index-entry-escaping_characters"></a> You can use <code>\</code> to escape characters that would have some meaning in the regular expression:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>[&nbsp;hey&nbsp;]</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>&nbsp;</span><span class="constant character custom property regexp perl6fe"><span>\]</span></span><span>&nbsp;\[&nbsp;\s&nbsp;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢hey｣␤»</span></span></span></div></pre><p>To negate a character class, put a <code>-</code> after the opening angle bracket:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>no&nbsp;quotes</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>&nbsp;&quot;&nbsp;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&lt;-[&quot;]&gt;&nbsp;matches&nbsp;any&nbsp;character&nbsp;except&nbsp;&quot;</span></span></span></div></pre><p>A common pattern for parsing quote-delimited strings involves negated character classes:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>&quot;in&nbsp;quotes&quot;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>&quot;</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>&nbsp;&quot;&nbsp;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>&quot;</span><span>&#39;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div></pre><p>This regex first matches a quote, then any characters that aren&#39;t quotes, and then a quote again. The meaning of <code>*</code> and <code>+</code> in the examples above are explained in the next section on quantifiers.</p>
<p>Just as you can use the <code>-</code> for both set difference and negation of a single value, you can also explicitly put a <code>+</code> in front:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator property regexp perl6fe"><span>+</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>123</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;same&nbsp;as&nbsp;&lt;[123]&gt;</span></span></span></div></pre><h1 id="Quantifiers"><a class="u" href="#___top" title="go to top of document">Quantifiers</a></h1>
<p>A quantifier makes the preceding atom match a variable number of times. For example, <code>a+</code> matches one or more <code>a</code> characters.</p>
<p>Quantifiers bind tighter than concatenation, so <code>ab+</code> matches one <code>a</code> followed by one or more <code>b</code>s. This is different for quotes, so <code>&#39;ab&#39;+</code> matches the strings <code>ab</code>, <code>abab</code>, <code>ababab</code> etc.</p>
<h2 id="One_or_more:_+"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_quantifier_+-One_or_more:_+"><span class="index-entry">One or more: <code>+</code></span></a></a></h2>
<p>The <code>+</code> quantifier makes the preceding atom match one or more times, with no upper limit.</p>
<p>For example, to match strings of the form <code>key=value</code>, you can write a regex like this:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>=</span><span>&#39;</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div></pre><h2 id="Zero_or_more:_*"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_quantifier_*-Zero_or_more:_*"><span class="index-entry">Zero or more: <code>*</code></span></a></a></h2>
<p>The <code>*</code> quantifier makes the preceding atom match zero or more times, with no upper limit.</p>
<p>For example, to allow optional whitespace between <code>a</code> and <code>b</code> you can write:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;a&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;b&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div></pre><h2 id="Zero_or_one:_?"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_quantifier_?-Zero_or_one:_?"><span class="index-entry">Zero or one: <code>?</code></span></a></a></h2>
<p>The <code>?</code> quantifier makes the preceding atom match zero or once.</p>
<p>For example, to match <code>dog</code> or <code>dogs</code>, you can write:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;dogs</span><span class="keyword operator quantifiers regexp perl6fe"><span>?</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div></pre><h2 id="General_quantifier:_**_min..max"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_quantifier_**-General_quantifier:_**_min..max"><span class="index-entry">General quantifier: <code>** min..max</code></span></a></a></h2>
<p>To quantify an atom an arbitrary number of times, use the <code>**</code> quantifier, which takes a single <a href="/type/Int">Int</a> or a <a href="/type/Range">Range</a> on the right-hand side that specifies the number of times to match. If a <a href="/type/Range">Range</a> is specified, the end-points specify the minimum and maximum number of times to match.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;4</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢abcd｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;&nbsp;2</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>5</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Nil␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;&nbsp;2</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>5</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢abc｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;&nbsp;2</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>5</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢abcde｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;2</span><span class="keyword operator quantifiers regexp perl6fe"><span>^</span><span>..</span><span>^</span></span><span>5</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢abcd｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>3</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢ab｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;1</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span class="variable other identifier whatever regexp perl6fe"><span>*</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢abcdefg｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>Only basic literal syntax for the right-hand side of the quantifier is supported, to avoid ambiguities with other regex constructs. If you need to use a more complex expression, for example, a <a href="/type/Range">Range</a> made from variables, enclose the <a href="/type/Range">Range</a> in curly braces:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>start</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>3</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>start</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>start</span></span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>2</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢abcde｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="support function perl6fe"><span>π</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support type perl6fe"><span>Int</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢abc｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>Negative values are treated like zero:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span>-</span><span class="constant numeric perl6fe"><span>Inf</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>-42</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>-10</span></span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span class="constant numeric perl6fe"><span>-42</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>-42</span></span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span class="constant numeric perl6fe"><span>-10</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>If then, the resultant value is <code>Inf</code> or <code>NaN</code> or the resultant <a href="/type/Range">Range</a> is empty, non-Numeric, contains <code>NaN</code> end-points, or has minimum effective end-point as <code>Inf</code>, the <code>X::Syntax::Regex::QuantifierValue</code> exception will be thrown:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span>(</span><span class="keyword control control-handlers perl6fe"><span>try</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>42</span></span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span class="constant numeric perl6fe"><span>10</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;&nbsp;)</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator word perl6fe"><span>orelse</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;(</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>,&nbsp;</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>empty-range</span></span><span>);</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(X::Syntax::Regex::QuantifierValue&nbsp;True)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>(</span><span class="keyword control control-handlers perl6fe"><span>try</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>Inf</span></span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span class="constant numeric perl6fe"><span>Inf</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>)</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator word perl6fe"><span>orelse</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;(</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>,&nbsp;</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>inf</span></span><span>);</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(X::Syntax::Regex::QuantifierValue&nbsp;True)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>(</span><span class="keyword control control-handlers perl6fe"><span>try</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>NaN</span></span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span class="constant numeric perl6fe"><span>42</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;)</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator word perl6fe"><span>orelse</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;(</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>,&nbsp;</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>non-numeric-range</span></span><span>);</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(X::Syntax::Regex::QuantifierValue&nbsp;True)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>(</span><span class="keyword control control-handlers perl6fe"><span>try</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>c</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>)</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator word perl6fe"><span>orelse</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;(</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>,&nbsp;</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>non-numeric-range</span></span><span>);</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(X::Syntax::Regex::QuantifierValue&nbsp;True)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>(</span><span class="keyword control control-handlers perl6fe"><span>try</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>Inf</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>)</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator word perl6fe"><span>orelse</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;(</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>,&nbsp;</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>inf</span></span><span>);</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(X::Syntax::Regex::QuantifierValue&nbsp;True)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>(</span><span class="keyword control control-handlers perl6fe"><span>try</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>NaN</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>)</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator word perl6fe"><span>orelse</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;(</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>,&nbsp;</span><span class="keyword other special-method perl6fe"><span>$!</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>non-numeric</span></span><span>);</span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(X::Syntax::Regex::QuantifierValue&nbsp;True)␤»</span><span>&nbsp;</span></span></span></div></pre><h2 id="Modified_quantifier:_%,_%%"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_$PERCENT_SIGN-regex_$PERCENT_SIGN$PERCENT_SIGN-Modified_quantifier:_$PERCENT_SIGN,_$PERCENT_SIGN$PERCENT_SIGN"><span class="index-entry">Modified quantifier: <code>%</code>, <code>%%</code></span></a></a></h2>
<p>To more easily match things like comma separated values, you can tack on a <code>%</code> modifier to any of the above quantifiers to specify a separator that must occur between each of the matches. For example, <code>a+ % &#39;,&#39;</code> will match <code>a</code> or <code>a,a</code> or <code>a,a,a</code>, etc. To also match trailing delimiters ( <code>a,</code> or <code>a,a,</code> ), you can use <code>%%</code> instead of <code>%</code>.</p>
<p>The quantifier interacts with <code>%</code> and controls the number of overall repetitions that can match successfully, so <code>a* % &#39;,&#39;</code> also matches the empty string. If you want match words delimited by commas, you might need to nest an ordinary and a modified quantifier:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc,def</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;[</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>]&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;1&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>%</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>,</span><span>&#39;</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Output:&nbsp;«False»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc,def</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;[</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>]&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;2&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>%</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>,</span><span>&#39;</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Output:&nbsp;«True»</span><span>&nbsp;</span></span></span></div></pre><h2 id="Preventing_backtracking:_:"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_:-Preventing_backtracking:_:"><span class="index-entry">Preventing backtracking: <code>:</code></span></a></a></h2>
<p>One way to prevent <a href="/language/regexes#Preventing_backtracking">backtracking</a> is through the use of the <code>ratchet</code> adverb as described <a href="language/regexes#Ratchet">below</a>. Another more fine-grained way of preventing backtracking in regexes is attaching a <code>:</code> modifier to a quantifier:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>ACG&nbsp;GCT&nbsp;ACT&nbsp;An&nbsp;interesting&nbsp;chain</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>ACGT\s</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;(</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>A..Z&nbsp;a..z&nbsp;\s</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢ACG&nbsp;GCT&nbsp;ACT&nbsp;An&nbsp;interesting&nbsp;chain｣␤&nbsp;0&nbsp;=&gt;&nbsp;｢An&nbsp;interesting&nbsp;chain｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>ACGT\s</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>:&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;(</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>A..Z&nbsp;a..z&nbsp;\s</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Nil␤»</span><span>&nbsp;</span></span></span></div></pre><p>In the second case, the <code>A</code> in <code>An</code> had already been &quot;absorbed&quot; by the pattern, preventing the matching of the second part of the pattern, after <code>\s+</code>. Generally we will want the opposite: prevent backtracking to match precisely what we are looking for.</p>
<p>In most cases, you will want to prevent backtracking for efficiency reasons, for instance here:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="entity name section adverb regexp perl6fe"><span>:g</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>[(</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>ACGT</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>:&nbsp;3)&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>]</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;(</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>A..Z&nbsp;a..z&nbsp;\s</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;(｢ACG&nbsp;GCT&nbsp;ACT&nbsp;An&nbsp;interesting&nbsp;chain｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;0&nbsp;=&gt;&nbsp;｢ACG｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;0&nbsp;=&gt;&nbsp;｢GCT｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;0&nbsp;=&gt;&nbsp;｢ACT｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;1&nbsp;=&gt;&nbsp;｢An&nbsp;interesting&nbsp;chain｣)</span><span>&nbsp;</span></span></span></div></pre><p>Although in this case, eliminating the <code>:</code> from behind <code>**</code> would make it behave exactly in the same way. The best use is to create <em>tokens</em> that will not be backtracked:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>ACG&nbsp;GCT&nbsp;ACT&nbsp;IDAQT</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;&nbsp;</span><span class="string regexp construct slash perl6fe"><span>m</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:g</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>[(</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>:)&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>]</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;(</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$$</span></span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;(｢ACG&nbsp;GCT&nbsp;ACT&nbsp;IDAQT｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;0&nbsp;=&gt;&nbsp;｢ACG｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;0&nbsp;=&gt;&nbsp;｢GCT｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;0&nbsp;=&gt;&nbsp;｢ACT｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;1&nbsp;=&gt;&nbsp;｢IDAQT｣)</span></span></span></div></pre><p>Without the <code>:</code> following <code>\w+</code>, the <em>ID</em> part captured would have been simply <code>T</code>, since the pattern would go ahead and match everything, leaving a single letter to match the <code>\w+</code> expression at the end of the line.</p>
<h2 id="Greedy_versus_frugal_quantifiers:_?"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_?-Greedy_versus_frugal_quantifiers:_?"><span class="index-entry">Greedy versus frugal quantifiers: <code>?</code></span></a></a></h2>
<p>By default, quantifiers request a greedy match:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abababa</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«abababa␤»</span><span>&nbsp;</span></span></span></div></pre><p>You can attach a <code>?</code> modifier to the quantifier to enable frugal matching:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abababa</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span><span>?</span></span><span>&nbsp;a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«aba␤»</span><span>&nbsp;</span></span></span></div></pre><p>You can also enable frugal matching for general quantifiers:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>/foo/o/bar/</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>\</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="keyword operator multi-symbol perl6fe"><span>**</span></span><span class="keyword operator generic perl6fe"><span>?</span></span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>1</span></span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span class="constant numeric perl6fe"><span>10</span></span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>\</span><span class="keyword operator multi-symbol perl6fe"><span>//</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢/foo/｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>/foo/o/bar/</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>\</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="keyword operator multi-symbol perl6fe"><span>**</span></span><span class="keyword operator generic perl6fe"><span>!</span></span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span class="constant numeric perl6fe"><span>1</span></span><span class="keyword operator multi-symbol perl6fe"><span>..</span></span><span class="constant numeric perl6fe"><span>10</span></span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>\</span><span class="keyword operator multi-symbol perl6fe"><span>//</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢/foo/o/bar/｣␤»</span></span></span></div></pre><p>Greedy matching can be explicitly requested with the <code>!</code> modifier.</p>
<h1 id="Alternation:_||"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_||-Alternation:_||"><span class="index-entry">Alternation: <code>||</code></span></a></a></h1>
<p>To match one of several possible alternatives, separate them by <code>||</code>; the first matching alternative wins.</p>
<p>For example, <code>ini</code> files have the following form:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>section</span></span><span>]</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>key</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>value</span></span></span></div></pre><p>Hence, if you parse a single line of an <code>ini</code> file, it can be either a section or a key-value pair and the regex would be (to a first approximation):</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>[</span><span>&#39;</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>]</span><span>&#39;</span></span><span>&nbsp;</span><span class="support function alternation regexp perl6fe"><span>||</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\S</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>=</span><span>&#39;</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\S</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div></pre><p>That is, either a word surrounded by square brackets, or a string of non-whitespace characters, followed by zero or more spaces, followed by the equals sign <code>=</code>, followed again by optional whitespace, followed by another string of non-whitespace characters.</p>
<p>An empty string as the first branch is ignored, to allow you to format branches consistently. You could have written the previous example as</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>/</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>||</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>[</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;\</span><span class="routine name perl6fe"><span>w</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>]</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>||</span></span><span>&nbsp;\</span><span class="routine name perl6fe"><span>S</span></span><span class="keyword operator generic perl6fe"><span>+</span></span><span>&nbsp;\</span><span class="routine name perl6fe"><span>s</span></span><span class="keyword operator generic perl6fe"><span>*</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>=</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;\</span><span class="routine name perl6fe"><span>s</span></span><span class="keyword operator generic perl6fe"><span>*</span></span><span>&nbsp;\</span><span class="routine name perl6fe"><span>S</span></span><span class="keyword operator generic perl6fe"><span>*</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>/</span></span></span></div></pre><p>Even in non-backtracking contexts, the alternation operator <code>||</code> tries all the branches in order until the first one matches.</p>
<h1 id="Longest_alternation:_|"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_|-Longest_alternation:_|"><span class="index-entry">Longest alternation: <code>|</code></span></a></a></h1>
<p>In short, in regex branches separated by <code>|</code>, the longest token match wins, independent of the textual ordering in the regex. However, what <code>|</code> really does is more than that. It does not decide which branch wins after finishing the whole match, but follows the <a href="https://design.perl6.org/S05.html#Longest-token_matching">longest-token matching (LTM) strategy</a>.</p>
<p>Briefly, what <code>|</code> does is this:</p>
<ul><li><p>First, select the branch which has the longest declarative prefix.</p>
</li>
</ul>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>ab&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;a</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Output:&nbsp;⌜abc⌟</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>ab&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;a&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Output:&nbsp;⌜ab⌟</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>if&nbsp;else</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;if&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;if&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="comment suppressed capture property regexp perl6fe"><span>.ws</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;else&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Output:&nbsp;｢if｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>if&nbsp;else</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;if&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;if&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;&nbsp;&nbsp;else&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Output:&nbsp;｢if&nbsp;else｣</span></span></span></div></pre><p>As is shown above, <code>a.*</code> is a declarative prefix, while <code>a {} .*</code> terminates at <code>{}</code>, then its declarative prefix is <code>a</code>. Note that non-declarative atoms terminate declarative prefix. This is quite important if you want to apply <code>|</code> in a <code>rule</code>, which automatically enables <code>:s</code>, and <code>&lt;.ws&gt;</code> accidentally terminates declarative prefix.</p>
<ul><li><p>If it&#39;s a tie, select the match with the highest specificity.</p>
</li>
</ul>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;ab&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>print</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>win</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Output:&nbsp;win｢ab｣</span></span></span></div></pre><p>When two alternatives match at the same length, the tie is broken by specificity. That is, <code>ab</code>, as an exact match, counts as closer than <code>a.</code>, which uses character classes.</p>
<ul><li><p>If it&#39;s still a tie, use additional tie-breakers.</p>
</li>
</ul>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;a</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>print</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>lose</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;Output:&nbsp;⌜ab⌟</span></span></span></div></pre><p>If the tie breaker above doesn&#39;t work, then the textually earlier alternative takes precedence.</p>
<p>For more details, see <a href="https://design.perl6.org/S05.html#Longest-token_matching">the LTM strategy</a>.</p>
<h2 id="Quoted_lists_are_LTM_matches"><a class="u" href="#___top" title="go to top of document">Quoted lists are LTM matches</a></h2>
<p>Using a quoted list in a regex is equivalent to specifying the longest-match alternation of the list&#39;s elements. So, the following match:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>food</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>&nbsp;</span><span class="variable other identifier regexname perl6fe"><span>f</span></span><span>&nbsp;</span><span class="variable other identifier regexname perl6fe"><span>fo</span></span><span>&nbsp;</span><span class="variable other identifier regexname perl6fe"><span>foo</span></span><span>&nbsp;</span><span class="variable other identifier regexname perl6fe"><span>food</span></span><span>&nbsp;</span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢food｣␤»</span></span></span></div></pre><p>is equivalent to:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>food</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;f&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;fo&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;foo&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;food&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢food｣␤»</span></span></span></div></pre><p>Note that the space after the first <code>&lt;</code> is significant here: <code>&lt;food&gt;</code> calls the named rule <code>food</code> while <code>&lt; food &gt;</code> and <code>&lt; food&gt;</code> specify quoted lists with a single element, <code>&#39;food&#39;</code>.</p>
<p>If the first branch is an empty string, it is ignored. This allows you to format your regexes consistently:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>/</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>|</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>f</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>|</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>fo</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>|</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>foo</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>|</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>food</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>/</span></span></span></div></pre><p>Arrays can also be interpolated into a regex to achieve the same effect:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>increasingly-edible</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>f&nbsp;fo&nbsp;foo&nbsp;food</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>food</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span>increasingly-edible</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢food｣␤»</span></span></span></div></pre><p>This is documented further under <a href="#Regex_interpolation">Regex Interpolation</a>, below.</p>
<h1 id="Conjunction:_&&"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_&&-Conjunction:_&&"><span class="index-entry">Conjunction: <code>&amp;&amp;</code></span></a></a></h1>
<p>Matches successfully if all <code>&amp;&amp;</code>-delimited segments match the same substring of the target string. The segments are evaluated left to right.</p>
<p>This can be useful for augmenting an existing regex. For example if you have a regex <code>quoted</code> that matches a quoted string, then <code>/ &lt;quoted&gt; &amp;&amp; &lt;-[x]&gt;* /</code> matches a quoted string that does not contain the character <code>x</code>.</p>
<p>Note that you cannot easily obtain the same behavior with a lookahead, that is, a regex doesn&#39;t consume characters, because a lookahead doesn&#39;t stop looking when the quoted string stops matching.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span>a</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;&amp;&amp;&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Nil␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span>a</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;&amp;&amp;&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢a｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span>a</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢a｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span>a</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢ab｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>Just like with <code>||</code>, empty first branches are ignored.</p>
<h1 id="Conjunction:_&"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_&-Conjunction:_&"><span class="index-entry">Conjunction: <code>&amp;</code></span></a></a></h1>
<p>Much like <code>&amp;&amp;</code> in a regex, it matches successfully if all segments separated by <code>&amp;</code> match the same part of the target string.</p>
<p><code>&amp;</code> (unlike <code>&amp;&amp;</code>) is considered declarative, and notionally all the segments can be evaluated in parallel, or in any order the compiler chooses.</p>
<p>Just like with <code>||</code> and <code>&amp;</code>, empty first branches are ignored.</p>
<h1 id="Anchors"><a class="u" href="#___top" title="go to top of document">Anchors</a></h1>
<p>Regexes search an entire string for matches. Sometimes this is not what you want. Anchors match only at certain positions in the string, thereby anchoring the regex match to that position.</p>
<h2 id="Start_of_string_and_end_of_string"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_$CIRCUMFLEX_ACCENT-regex_$-Start_of_string_and_end_of_string"><span class="index-entry">Start of string and end of string</span></a></a></h2>
<p>The <code>^</code> anchor only matches at the start of the string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>properly</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;&nbsp;perl</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>properly</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;perl</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perly</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;perl</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;perl</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><p>The <code>$</code> anchor only matches at the end of the string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>use&nbsp;perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;&nbsp;perl&nbsp;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>use&nbsp;perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;&nbsp;perl&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perly</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;&nbsp;perl&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span></span></span></div></pre><p>You can combine both anchors:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>use&nbsp;perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;perl&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>perl</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;perl&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><p>Keep in mind that <code>^</code> matches the start of a <strong>string</strong>, not the start of a <strong>line</strong>. Likewise, <code>$</code> matches the end of a <strong>string</strong>, not the end of a <strong>line</strong>.</p>
<p>The following is a multi-line string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>chomp</span></span><span>&nbsp;</span><span class="meta heredoc perl6fe"><span class="string quoted construct perl6fe"><span>q</span></span><span class="support function adverb perl6fe"><span>:to</span></span><span>/</span><span class="entity other attribute-name heredoc delimiter perl6fe"><span>EOS</span></span><span>/</span><span class="meta heredoc continuation perl6fe"><span>;</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;Keep&nbsp;it&nbsp;secret</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;and&nbsp;keep&nbsp;it&nbsp;safe</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="entity other attribute-name heredoc delimiter perl6fe"><span>&nbsp;&nbsp;&nbsp;EOS</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&#39;safe&#39;&nbsp;is&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;string</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>safe&nbsp;&nbsp;&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&#39;secret&#39;&nbsp;is&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;line,&nbsp;not&nbsp;the&nbsp;string</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>secret&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&#39;Keep&#39;&nbsp;is&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;string</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>Keep&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&#39;and&#39;&nbsp;is&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;line&nbsp;--&nbsp;not&nbsp;the&nbsp;string</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>and&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span></span></span></div></pre><h2 id="Start_of_line_and_end_of_line"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_$CIRCUMFLEX_ACCENT$CIRCUMFLEX_ACCENT-regex_$$-Start_of_line_and_end_of_line"><span class="index-entry">Start of line and end of line</span></a></a></h2>
<p>The <code>^^</code> anchor matches at the start of a logical line. That is, either at the start of the string, or after a newline character. However, it does not match at the end of the string, even if it ends with a newline character.</p>
<p>The <code>$$</code> anchor matches at the end of a logical line. That is, before a newline character, or at the end of the string when the last character is not a newline character.</p>
<p>To understand the following example, it&#39;s important to know that the <code>q:to/EOS/...EOS</code> <a href="/language/quoting#Heredocs:_:to">heredoc</a> syntax removes leading indention to the same level as the <code>EOS</code> marker, so that the first, second and last lines have no leading space and the third and fourth lines have two leading spaces each.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="meta heredoc perl6fe"><span class="string quoted construct perl6fe"><span>q</span></span><span class="support function adverb perl6fe"><span>:to</span></span><span>/</span><span class="entity other attribute-name heredoc delimiter perl6fe"><span>EOS</span></span><span>/</span><span class="meta heredoc continuation perl6fe"><span>;</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;was&nbsp;a&nbsp;young&nbsp;man&nbsp;of&nbsp;Japan</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;Whose&nbsp;limericks&nbsp;never&nbsp;would&nbsp;scan.</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;asked&nbsp;why&nbsp;this&nbsp;was,</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;He&nbsp;replied&nbsp;&quot;It&#39;s&nbsp;because&nbsp;I&nbsp;always&nbsp;try&nbsp;to&nbsp;fit</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;many&nbsp;syllables&nbsp;into&nbsp;the&nbsp;last&nbsp;line&nbsp;as&nbsp;ever&nbsp;I&nbsp;possibly&nbsp;can.&quot;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="entity other attribute-name heredoc delimiter perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;EOS</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&#39;There&#39;&nbsp;is&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;string</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;There</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&#39;limericks&#39;&nbsp;is&nbsp;not&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;line</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;limericks</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&#39;as&#39;&nbsp;is&nbsp;at&nbsp;start&nbsp;of&nbsp;the&nbsp;last&nbsp;line</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;as</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;there&nbsp;are&nbsp;blanks&nbsp;between&nbsp;start&nbsp;of&nbsp;line&nbsp;and&nbsp;the&nbsp;&quot;When&quot;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;When</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&#39;Japan&#39;&nbsp;is&nbsp;at&nbsp;end&nbsp;of&nbsp;first&nbsp;line</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;Japan&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;there&#39;s&nbsp;a&nbsp;.&nbsp;between&nbsp;&quot;scan&quot;&nbsp;and&nbsp;the&nbsp;end&nbsp;of&nbsp;line</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;scan&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matched&nbsp;at&nbsp;the&nbsp;last&nbsp;line</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>.&quot;</span><span>&#39;</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><h2 id="Word_boundary"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex__<|w>-regex__<!|w>-Word_boundary"><span class="index-entry">Word boundary</span></a></a></h2>
<p>To match any word boundary, use <code>&lt;|w&gt;</code> or <code>&lt;?wb&gt;</code>. This is similar to <a name="index-entry-regex_deprecated_\b-\b"><span class="index-entry"><code>\b</code></span></a> in other languages. To match the opposite, any character that is not bounding a word, use <code>&lt;!|w&gt;</code> or <code>&lt;!wb&gt;</code>. This is similar to <a name="index-entry-regex_deprecated_\B-\B"><span class="index-entry"><code>\B</code></span></a> in other languages.</p>
<p>These are both zero-width regex elements.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>two-words</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;two</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator property regexp perl6fe"><span>|</span></span><span class="variable other identifier regexname perl6fe"><span>w</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>\-</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator property regexp perl6fe"><span>|</span></span><span class="variable other identifier regexname perl6fe"><span>w</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>words&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢two-words｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>twowords</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;two</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>!</span><span class="keyword operator property regexp perl6fe"><span>|</span></span><span class="variable other identifier regexname perl6fe"><span>w</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span><span>&lt;</span></span><span>!</span><span class="keyword operator property regexp perl6fe"><span>|</span></span><span class="variable other identifier regexname perl6fe"><span>w</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>words&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢twowords｣»</span></span></span></div></pre><p><a name="index-entry-regex__<<-_regex__>>-_regex__«-_regex__»"></a></p>
<h2 id="Left_and_right_word_boundary"><a class="u" href="#___top" title="go to top of document">Left and right word boundary</a></h2>
<p><code>&lt;&lt;</code> matches a left word boundary. It matches positions where there is a non-word character at the left, or the start of the string, and a word character to the right.</p>
<p><code>&gt;&gt;</code> matches a right word boundary. It matches positions where there is a word character at the left and a non-word character at the right, or the end of the string.</p>
<p>These are both zero-width regex elements.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>The&nbsp;quick&nbsp;brown&nbsp;fox</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\W</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>br</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>&lt;&lt;</span></span><span>&nbsp;br</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>br&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>&gt;&gt;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>own</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>&lt;&lt;</span></span><span>&nbsp;own</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>own&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>&gt;&gt;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>&lt;&lt;</span></span><span>&nbsp;The</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>fox&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>&gt;&gt;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><p>You can also use the variants <code>«</code> and <code>»</code> :</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>The&nbsp;quick&nbsp;brown&nbsp;fox</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>«&nbsp;own</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>own&nbsp;»</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><p>To see the difference between <code>&lt;|w&gt;</code> and <code>«</code>, <code>»</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>stuff&nbsp;here!!!</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>subst</span></span><span>(</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>g</span></span><span>,</span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>&gt;&gt;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>,&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>|</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«stuff|&nbsp;here|!!!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>stuff&nbsp;here!!!</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>subst</span></span><span>(</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>g</span></span><span>,</span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>&lt;&lt;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>,&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>|</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«|stuff&nbsp;|here!!!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>stuff&nbsp;here!!!</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>subst</span></span><span>(</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>g</span></span><span>,</span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator property regexp perl6fe"><span>|</span></span><span class="variable other identifier regexname perl6fe"><span>w</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>,&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>|</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«|stuff|&nbsp;|here|!!!␤»</span></span></span></div></pre><h2 id="Summary_of_anchors"><a class="u" href="#___top" title="go to top of document">Summary of anchors</a></h2>
<p>Anchors are zero-width regex elements. Hence they do not use up a character of the input string, that is, they do not advance the current position at which the regex engine tries to match. A good mental model is that they match between two characters of an input string, or before the first, or after the last character of an input string.</p>
<table class="pod-table">
<thead><tr>
<th>Anchor</th> <th>Description</th> <th>Examples</th>
</tr></thead>
<tbody>
<tr> <td>^</td> <td>Start of string</td> <td>&quot;⏏two\nlines&quot;</td> </tr> <tr> <td>^^</td> <td>Start of line</td> <td>&quot;⏏two\n⏏lines&quot;</td> </tr> <tr> <td>$</td> <td>End of string</td> <td>&quot;two\nlines⏏&quot;</td> </tr> <tr> <td>$$</td> <td>End of line</td> <td>&quot;two⏏\nlines⏏&quot;</td> </tr> <tr> <td>&lt;&lt; or «</td> <td>Left word boundary</td> <td>&quot;⏏two ⏏words&quot;</td> </tr> <tr> <td>&gt;&gt; or »</td> <td>Right word boundary</td> <td>&quot;two⏏ words⏏&quot;</td> </tr> <tr> <td>&lt;?wb&gt;</td> <td>Any word boundary</td> <td>&quot;⏏two⏏ ⏏words⏏~!&quot;</td> </tr> <tr> <td>&lt;!wb&gt;</td> <td>Not a word boundary</td> <td>&quot;t⏏w⏏o w⏏o⏏r⏏d⏏s~⏏!&quot;</td> </tr> <tr> <td>&lt;?ww&gt;</td> <td>Within word</td> <td>&quot;t⏏w⏏o w⏏o⏏r⏏d⏏s~!&quot;</td> </tr> <tr> <td>&lt;!ww&gt;</td> <td>Not within word</td> <td>&quot;⏏two⏏ ⏏words⏏~⏏!⏏&quot;</td> </tr>
</tbody>
</table><h1 id="Zero-width_assertions"><a class="u" href="#___top" title="go to top of document">Zero-width assertions</a></h1>
<p>Zero-Width assertions can help you implement your own anchor: it turns another regex into an anchor, making them consume no characters of the input string. There are two variants: lookahead and lookbehind assertions.</p>
<p>Technically, anchors are also zero-width assertions, and they can look both ahead and behind.</p>
<h2 id="Lookaround_assertions"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_positive_lookaround_assertion-regex_negative_lookaround_assertion-Lookaround_assertions"><span class="index-entry">Lookaround assertions</span></a></a></h2>
<p>Lookaround assertions work both ways. They match, but they don&#39;t consume a character.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>key</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>!</span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>#-</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>333</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>key</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢333｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>333$</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>?</span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>$</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢333｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>$333</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>?</span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>$</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢$333｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>They can be positive or negative: <code>![]</code> is negative, while <code>?[]</code> is positive; the square brackets will include the characters or backslashed character classes that are going to be matched.</p>
<p>You can use predefined character classes and Unicode properties directly preceded by the semicolon:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>333</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>?</span><span class="variable other identifier regexname perl6fe"><span>alnum</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢333｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>333</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>?</span><span class="meta property name regexp perl6fe"><span class="punctuation definition property regexp perl6fe"><span>:</span></span><span class="variable other identifier property regexp perl6fe"><span>Nd</span></span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢333｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>333</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>!</span><span class="meta property name regexp perl6fe"><span class="punctuation definition property regexp perl6fe"><span>:</span></span><span class="variable other identifier property regexp perl6fe"><span>L</span></span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢333｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>333</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^^</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>!</span><span class="meta property name regexp perl6fe"><span class="punctuation definition property regexp perl6fe"><span>:</span></span><span class="variable other identifier property regexp perl6fe"><span>Script</span></span></span><span>&lt;</span><span class="variable other identifier regexname perl6fe"><span>Tamil</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&gt;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢33｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>In the first two cases, the character class matches, but does not consume, the first digit, which is then consumed by the expression; in the third, the negative lookaround assertion behaves in the same way. In the fourth statement the last digit is matched but not consumed, thus the match includes only the first two digits.</p>
<h2 id="Lookahead_assertions"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_before-Lookahead_assertions"><span class="index-entry">Lookahead assertions</span></a></a></h2>
<p>To check that a pattern appears before another pattern, use a lookahead assertion via the <code>before</code> assertion. This has the form:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>?before&nbsp;pattern</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span></span></div></pre><p>Thus, to search for the string <code>foo</code> which is immediately followed by the string <code>bar</code>, use the following regexp:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;foo&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span>bar</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div></pre><p>For example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>foobar</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;foo&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span>bar</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«foo␤»</span></span></span></div></pre><p>However, if you want to search for a pattern which is <strong>not</strong> immediately followed by some pattern, then you need to use a negative lookahead assertion, this has the form:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>!before&nbsp;pattern</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span></span></div></pre><p>In the following example, all occurrences of <code>foo</code> which is not before <code>bar</code> would match with</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>foobaz</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;foo&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>!</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span>bar</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«foo␤»</span></span></span></div></pre><p>Lookahead assertions can be used also with other patterns, like characters ranges, interpolated variables, subscripts and so on. In such cases it does suffice to use a <code>?</code>, or a <code>!</code> for the negate form. For instance, the following lines all produce the very same result:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>{</span></span><span class="fstring regexp perl6fe"><span>&nbsp;abc&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span>def</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>}</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢abc｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>{</span></span><span class="fstring regexp perl6fe"><span>&nbsp;abc&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>?</span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>&nbsp;d..f&nbsp;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>}</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢abc｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>ending_letters</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>d&nbsp;e&nbsp;f</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>{</span></span><span class="fstring regexp perl6fe"><span>&nbsp;abc&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>?@</span><span class="variable other identifier regexname perl6fe"><span>ending_letters</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>}</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢abc｣</span></span></span></div></pre><p>A practical use of lookahead assertions is in substitutions, where you only want to substitute regex matches that are in a certain context. For example, you might want to substitute only numbers that are followed by a unit (like <em>kg</em>), but not other numbers:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>units</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>kg&nbsp;m&nbsp;km&nbsp;mm&nbsp;s&nbsp;h</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Please&nbsp;buy&nbsp;2&nbsp;packs&nbsp;of&nbsp;sugar,&nbsp;1&nbsp;kg&nbsp;each</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct bracket perl6fe"><span>s</span></span><span class="entity name section adverb regexp bracket perl6fe"><span>:g</span></span><span class="punctuation definition regexp bracket perl6fe"><span>[</span></span><span class="string regexp bracket perl6fe"><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>before</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;@units</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span><span class="punctuation definition regexp bracket perl6fe"><span>]</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>5</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Please&nbsp;buy&nbsp;2&nbsp;packs&nbsp;of&nbsp;sugar,&nbsp;5&nbsp;kg&nbsp;each</span></span></span></div></pre><p>Since the lookahead is not part of the match object, the unit is not substituted.</p>
<h2 id="Lookbehind_assertions"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_after-Lookbehind_assertions"><span class="index-entry">Lookbehind assertions</span></a></a></h2>
<p>To check that a pattern appears after another pattern, use a lookbehind assertion via the <code>after</code> assertion. This has the form:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>?after&nbsp;pattern</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span></span></div></pre><p>Therefore, to search for the string <code>bar</code> immediately preceded by the string <code>foo</code>, use the following regexp:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>after</span></span><span>&nbsp;</span><span>foo</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;bar&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div></pre><p>For example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>foobar</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>after</span></span><span>&nbsp;</span><span>foo</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;bar&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«bar␤»</span></span></span></div></pre><p>However, if you want to search for a pattern which is <strong>not</strong> immediately preceded by some pattern, then you need to use a negative lookbehind assertion, this has the form:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>!after&nbsp;pattern</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span></span></div></pre><p>Hence all occurrences of <code>bar</code> which do not have <code>foo</code> before them would be matched by</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>fotbar</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>!</span></span><span class="entity name section assertion perl6fe"><span>after</span></span><span>&nbsp;</span><span>foo</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;bar&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«bar␤»</span></span></span></div></pre><p>These are, as in the case of lookahead, zero-width assertions which do not <em>consume</em> characters, like here:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>atfoobar</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>**</span></span><span>3)&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>**</span></span><span>2&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta assertion lookaround perl6fe"><span class="keyword operator negativity perl6fe"><span>?</span></span><span class="entity name section assertion perl6fe"><span>after</span></span><span>&nbsp;</span><span>foo</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;bar&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢atfoobar｣␤&nbsp;0&nbsp;=&gt;&nbsp;｢atf｣␤»</span></span></span></div></pre><p>where we capture the first 3 of the 5 characters before bar, but only if <code>bar</code> is preceded by <code>foo</code>. The fact that the assertion is zero-width allows us to use part of the characters in the assertion for capture.</p>
<h1 id="Grouping_and_capturing"><a class="u" href="#___top" title="go to top of document">Grouping and capturing</a></h1>
<p>In regular (non-regex) Perl&nbsp;6, you can use parentheses to group things together, usually to override operator precedence:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>+</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>4</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«9␤»,&nbsp;parsed&nbsp;as&nbsp;1&nbsp;+&nbsp;(4&nbsp;*&nbsp;2)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;(</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>+</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>4</span></span><span>)&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«10␤»</span></span></span></div></pre><p>The same grouping facility is available in regexes:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;a&nbsp;</span><span class="support function alternation regexp perl6fe"><span>||</span></span><span>&nbsp;b&nbsp;c&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;&#39;a&#39;&nbsp;or&nbsp;&#39;bc&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(&nbsp;a&nbsp;</span><span class="support function alternation regexp perl6fe"><span>||</span></span><span>&nbsp;b&nbsp;)&nbsp;c&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;&#39;ac&#39;&nbsp;or&nbsp;&#39;bc&#39;</span></span></span></div></pre><p>The same grouping applies to quantifiers:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;a&nbsp;b</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;an&nbsp;&#39;a&#39;&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more&nbsp;&#39;b&#39;s</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(a&nbsp;b)</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;one&nbsp;or&nbsp;more&nbsp;sequences&nbsp;of&nbsp;&#39;ab&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(a&nbsp;</span><span class="support function alternation regexp perl6fe"><span>||</span></span><span>&nbsp;b)</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;a&nbsp;string&nbsp;of&nbsp;&#39;a&#39;s&nbsp;and&nbsp;&#39;b&#39;s,&nbsp;except&nbsp;empty&nbsp;string</span></span></span></div></pre><p>An unquantified capture produces a <a href="/type/Match">Match</a> object. When a capture is quantified (except with the <code>?</code> quantifier) the capture becomes a list of <a href="/type/Match">Match</a> objects instead.</p>
<h2 id="Capturing"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_(_)-Capturing"><span class="index-entry">Capturing</span></a></a></h2>
<p>The round parentheses don&#39;t just group, they also <em>capture</em>; that is, they make the string matched within the group available as a variable, and also as an element of the resulting <a href="/type/Match">Match</a> object:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>number&nbsp;42</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="string literal perl6fe"><span>&#39;</span><span>number&nbsp;</span><span>&#39;</span></span><span>&nbsp;(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>The&nbsp;number&nbsp;is&nbsp;$0</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;The&nbsp;number&nbsp;is&nbsp;42</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;or</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>The&nbsp;number&nbsp;is&nbsp;$/[0]</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;The&nbsp;number&nbsp;is&nbsp;42</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>Pairs of parentheses are numbered left to right, starting from zero.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(a)&nbsp;b&nbsp;(c)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>0:&nbsp;$0;&nbsp;1:&nbsp;$1</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«0:&nbsp;a;&nbsp;1:&nbsp;c␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>The <code>$0</code> and <code>$1</code> etc. syntax is shorthand. These captures are canonically available from the match object <code>$/</code> by using it as a list, so <code>$0</code> is actually syntactic sugar for <code>$/[0]</code>.</p>
<p>Coercing the match object to a list gives an easy way to programmatically access all elements:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(a)&nbsp;b&nbsp;(c)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>list</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>join</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«a,&nbsp;c␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><h2 id="Non-capturing_grouping"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_[_]-Non-capturing_grouping"><span class="index-entry">Non-capturing grouping</span></a></a></h2>
<p>The parentheses in regexes perform a double role: they group the regex elements inside and they capture what is matched by the sub-regex inside.</p>
<p>To get only the grouping behavior, you can use square brackets <code>[ ... ]</code> which, by default, don&#39;t capture.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;[a</span><span class="support function alternation regexp perl6fe"><span>||</span></span><span>b]&nbsp;(c)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$0</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«c␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>If you do not need the captures, using non-capturing <code>[ ... ]</code> groups provides the following benefits:</p>
<ul><li><p>they more cleanly communicate the regex intent,</p>
</li>
<li><p>they make it easier to count the capturing groups that do mean and</p>
</li>
<li><p>they make matching a bit faster.</p>
</li>
</ul>
<h2 id="Capture_numbers"><a class="u" href="#___top" title="go to top of document">Capture numbers</a></h2>
<p>It is stated above that captures are numbered from left to right. While true in principle, this is also an over simplification.</p>
<p>The following rules are listed for the sake of completeness. When you find yourself using them regularly, it&#39;s worth considering named captures (and possibly subrules) instead.</p>
<p>Alternations reset the capture count:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(x)&nbsp;(y)&nbsp;&nbsp;</span><span class="support function alternation regexp perl6fe"><span>||</span></span><span>&nbsp;(a)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;$0&nbsp;&nbsp;$1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$0&nbsp;&nbsp;$1&nbsp;&nbsp;$2</span></span></span></div></pre><p>Example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(x)(y)&nbsp;</span><span class="support function alternation regexp perl6fe"><span>||</span></span><span>&nbsp;(a)(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$1</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«b␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>If two (or more) alternations have a different number of captures, the one with the most captures determines the index of the next capture:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcd</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;a&nbsp;[&nbsp;b&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)&nbsp;</span><span class="support function alternation regexp perl6fe"><span>||</span></span><span>&nbsp;(x)&nbsp;(y)&nbsp;]&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$0&nbsp;&nbsp;$1&nbsp;&nbsp;&nbsp;&nbsp;$2</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$2</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«d␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>Captures can be nested, in which case they are numbered per level; level 0 gets to use the capture variables, but it will become a list with the rest of the levels behaving as elements of that list</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(&nbsp;a&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)&nbsp;)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Outer:&nbsp;$0</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Outer:&nbsp;abc</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Inner:&nbsp;$0[0]&nbsp;and&nbsp;$0[1]</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Inner:&nbsp;b&nbsp;and&nbsp;c</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>These capture variables are only available outside the regex.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;!!WRONG!!&nbsp;The&nbsp;$0&nbsp;refers&nbsp;to&nbsp;a&nbsp;capture&nbsp;*inside*&nbsp;the&nbsp;second&nbsp;capture</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>11</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>)&nbsp;(</span><span class="keyword other special-method match variable numbered perlt6e"><span>$0</span></span><span>)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Nil␤»</span><span>&nbsp;</span></span></span></div></pre><p>In order to make them available inside the regex, you need to insert a code block behind the match; this code block may be empty if there&#39;s nothing meaningful to do:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;CORRECT:&nbsp;$0&nbsp;is&nbsp;saved&nbsp;into&nbsp;a&nbsp;variable&nbsp;outside&nbsp;the&nbsp;second&nbsp;capture</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;before&nbsp;it&nbsp;is&nbsp;used&nbsp;inside</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>11</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>)&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:my</span></span><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>c</span></span><span>&nbsp;=&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$0</span></span><span>;&nbsp;(</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>c</span></span><span>)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢11｣␤&nbsp;0&nbsp;=&gt;&nbsp;｢1｣␤&nbsp;1&nbsp;=&gt;&nbsp;｢1｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Matched&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>c</span></span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«␤Matched&nbsp;1␤»</span><span>&nbsp;</span></span></span></div></pre><p>This code block <em>publishes</em> the capture inside the regex, so that it can be assigned to other variables or used for subsequent matches</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>11</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>)&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$0</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢11｣␤&nbsp;0&nbsp;=&gt;&nbsp;｢1｣␤»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-:my"></a> <code>:my</code> helps scoping the <code>$c</code> variable within the regex and beyond; in this case we can use it in the next sentence to show what has been matched inside the regex. This can be used for debugging inside regular expressions, for instance:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>paragraph</span></span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>line</span><span class="constant character escape perl6fe"><span>\n</span></span><span>line2</span><span class="constant character escape perl6fe"><span>\n</span></span><span>line3</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>paragraph</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct any perl6fe"><span>rx</span></span><span class="punctuation definition regexp any perl6fe"><span>|</span></span><span class="string regexp any perl6fe"><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:my</span></span><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>counter</span></span><span>&nbsp;=&nbsp;0;&nbsp;(&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\V</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>++</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>counter</span></span></span><span>&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;)&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span><span>%</span><span>%</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\n</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp any perl6fe"><span>|</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Matched&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>counter</span></span><span>&nbsp;lines</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Matched&nbsp;3&nbsp;lines␤»</span></span></span></div></pre><p>Since <code>:my</code> blocks are simply declarations, the match variable <code>$/</code> or numbered matches such as <code>$0</code> will not be available in them unless they are previously <em>published</em> by inserting the empty block (or any block):</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>aba</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(a)&nbsp;b&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:my</span></span><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>c</span></span><span>&nbsp;=&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>c</span></span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢ab｣␤&nbsp;0&nbsp;=&gt;&nbsp;｢a｣␤»</span><span>&nbsp;</span></span></span></div></pre><p>Any other code block will also reveal the variables and make them available in declarations:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>aba</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(a)&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Check&nbsp;so&nbsp;far&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;b&nbsp;</span><span class="entity name section adverb perl6fe"><span>:my</span></span><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>c</span></span><span>&nbsp;=&nbsp;~</span><span class="keyword other special-method match variable numbered perlt6e"><span>$0</span></span><span>;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Check&nbsp;so&nbsp;far&nbsp;a␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Capture&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>c</span></span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Capture&nbsp;a␤»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-:our"></a> The <code>:our</code>, similarly to <a href="/syntax/our"><code>our</code></a> in classes, can be used in <a href="/type/Grammar">Grammar</a>s to declare variables that can be accessed, via its fully qualified name, from outside the grammar:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta class perl6fe"><span class="storage type class perl6fe"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class perl6fe"><span>HasOur</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP perl6fe"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name section adverb perl6fe"><span>:our</span></span><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>our</span></span><span>&nbsp;=&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>Þor</span><span>&#39;</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>our</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;is&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;mighty</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>HasOur</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>parse</span></span><span>(</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Þor&nbsp;is&nbsp;mighty</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢Þor&nbsp;is&nbsp;mighty｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>HasOur</span></span></span><span>::</span><span class="routine name perl6fe"><span>our</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Þor␤»</span><span>&nbsp;</span></span></span></div></pre><p>Once the parsing has been done successfully, we use the FQN name of the <code>$our</code> variable to access its value, that can be none other than <code>Þor</code>.</p>
<h2 id="Named_captures"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex__Named_captures-Named_captures"><span class="index-entry">Named captures</span></a></a></h2>
<p>Instead of numbering captures, you can also give them names. The generic, and slightly verbose, way of naming captures is like this:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>myname</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;=&nbsp;[&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;]&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>myname</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«abc␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>The square brackets in the above example, which don&#39;t usually capture, will now capture its grouping with the given name.</p>
<p>The access to the named capture, <code>$&lt;myname&gt;</code>, is a shorthand for indexing the match object as a hash, in other words: <code>$/{ &#39;myname&#39; }</code> or <code>$/&lt;myname&gt;</code>.</p>
<p>We can also use parentheses in the above example, but they will work exactly the same as square brackets. The captured group will only be accessible by its name as a key from the match object and not from its position in the list with <code>$/[0]</code> or <code>$0</code>.</p>
<p>Named captures can also be nested using regular capture group syntax:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc-abc-abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>string</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=(&nbsp;[&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>part</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=[abc]&nbsp;]</span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>%</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>-</span><span>&#39;</span></span><span>&nbsp;)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>string</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«abc-abc-abc␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>string</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>part</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«abc&nbsp;abc&nbsp;abc␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>string</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>part</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>[</span><span class="constant numeric perl6fe"><span>0</span></span><span>];&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«abc␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>Coercing the match object to a hash gives you easy programmatic access to all named captures:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>count=23</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>variable</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>=</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>value</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>h</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>hash</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>h</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>keys</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>sort</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>join</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«value,&nbsp;variable␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>h</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>values</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>sort</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>join</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«23,&nbsp;count␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>h</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>kv</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>k</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>v</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Found&nbsp;value&nbsp;&#39;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>v</span></span><span>&#39;&nbsp;with&nbsp;key&nbsp;&#39;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>k</span></span><span>&#39;</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;outputs&nbsp;two&nbsp;lines:</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;Found&nbsp;value&nbsp;&#39;count&#39;&nbsp;with&nbsp;key&nbsp;&#39;variable&#39;</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;Found&nbsp;value&nbsp;&#39;23&#39;&nbsp;with&nbsp;key&nbsp;&#39;value&#39;</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>A more convenient way to get named captures is by using named regex as discussed in the <a href="/language/regexes#Subrules">Subrules</a> section.</p>
<h2 id="Capture_markers:_<(_)>"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_<(_)>-Capture_markers:_<(_)>"><span class="index-entry">Capture markers: <code>&lt;( )&gt;</code></span></a></a></h2>
<p>A <code>&lt;(</code> token indicates the start of the match&#39;s overall capture, while the corresponding <code>)&gt;</code> token indicates its endpoint. The <code>&lt;(</code> is similar to other languages <a name="index-entry-regex_deprecated_\K-\K"><span class="index-entry">\K</span></a> to discard any matches found before the <code>\K</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;a&nbsp;</span><span class="keyword operator capture marker regexp perl6fe"><span>&lt;(</span></span><span>&nbsp;b&nbsp;</span><span class="keyword operator capture marker regexp perl6fe"><span>)&gt;</span></span><span>&nbsp;c</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢b｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="keyword operator capture marker regexp perl6fe"><span>&lt;(</span></span><span>a&nbsp;</span><span class="keyword operator capture marker regexp perl6fe"><span>&lt;(</span></span><span>&nbsp;b&nbsp;</span><span class="keyword operator capture marker regexp perl6fe"><span>)&gt;</span></span><span>&nbsp;c</span><span class="keyword operator capture marker regexp perl6fe"><span>)&gt;</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢bc｣␤»</span></span></span></div></pre><p>As in the example above, you can see <code>&lt;(</code> sets the start point and <code>)&gt;</code> sets the endpoint; since they are actually independent of each other, the inner-most start point wins (the one attached to <code>b</code>) and the outer-most end wins (the one attached to <code>c</code>).</p>
<h1 id="Substitution"><a class="u" href="#___top" title="go to top of document">Substitution</a></h1>
<p>Regular expressions can also be used to substitute one piece of text for another. You can use this for anything, from correcting a spelling error (e.g., replacing &#39;Perl Jam&#39; with &#39;Pearl Jam&#39;), to reformatting an ISO8601 date from <code>yyyy-mm-ddThh:mm:ssZ</code> to <code>mm-dd-yy h:m {AM,PM}</code> and beyond.</p>
<p>Just like the search-and-replace editor&#39;s dialog box, the <code>s/ / /</code> operator has two sides, a left and right side. The left side is where your matching expression goes, and the right side is what you want to replace it with.</p>
<h2 id="Lexical_conventions"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-quote_s/_/_/-Lexical_conventions"><span class="index-entry">Lexical conventions</span></a></a></h2>
<p>Substitutions are written similarly to matching, but the substitution operator has both an area for the regex to match, and the text to substitute:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>replace</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="keyword control conditional perl6fe"><span>with</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;a&nbsp;substitution&nbsp;that&nbsp;is&nbsp;applied&nbsp;to&nbsp;$_</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>s</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>replace</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="keyword control conditional perl6fe"><span>with</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;a&nbsp;substitution&nbsp;applied&nbsp;to&nbsp;a&nbsp;scalar</span><span>&nbsp;</span></span></span></div></pre><p>The substitution operator allows delimiters other than the slash:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string regexp construct any perl6fe"><span>s</span></span><span class="punctuation definition regexp any perl6fe"><span>|</span></span><span class="string regexp any perl6fe"><span>replace</span></span><span class="punctuation definition regexp any perl6fe"><span>|</span></span><span class="keyword control conditional perl6fe"><span>with</span></span><span class="keyword operator generic perl6fe"><span>|</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct any perl6fe"><span>s</span></span><span class="punctuation definition regexp any perl6fe"><span>!</span></span><span class="string regexp any perl6fe"><span>replace</span></span><span class="punctuation definition regexp any perl6fe"><span>!</span></span><span class="keyword control conditional perl6fe"><span>with</span></span><span class="keyword operator generic perl6fe"><span>!</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct any perl6fe"><span>s</span></span><span class="punctuation definition regexp any perl6fe"><span>,</span></span><span class="string regexp any perl6fe"><span>replace</span></span><span class="punctuation definition regexp any perl6fe"><span>,</span></span><span class="keyword control conditional perl6fe"><span>with</span></span><span>,;</span></span></div></pre><p>Note that neither the colon <code>:</code> nor balancing delimiters such as <code>{}</code> or <code>()</code> can be substitution delimiters. Colons clash with adverbs such as <code>s:i/Foo/bar/</code> and the other delimiters are used for other purposes.</p>
<p>If you use balancing curly braces, square brackets, or parentheses, the substitution works like this instead:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string regexp construct bracket perl6fe"><span>s</span></span><span class="punctuation definition regexp bracket perl6fe"><span>[</span></span><span class="string regexp bracket perl6fe"><span>replace</span></span><span class="punctuation definition regexp bracket perl6fe"><span>]</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>with</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div></pre><p>The right-hand side is now a (not quoted) Perl&nbsp;6 expression, in which <code>$/</code> is available as the current match:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>some&nbsp;11&nbsp;words&nbsp;21</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct bracket perl6fe"><span>s</span></span><span class="entity name section adverb regexp bracket perl6fe"><span>:g</span></span><span class="punctuation definition regexp bracket perl6fe"><span>[</span></span><span class="string regexp bracket perl6fe"><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp bracket perl6fe"><span>]</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«some&nbsp;22&nbsp;words&nbsp;42␤»</span></span></span></div></pre><p>Like the <code>m//</code> operator, whitespace is ignored in the regex part of a substitution.</p>
<h2 id="Replacing_string_literals"><a class="u" href="#___top" title="go to top of document">Replacing string literals</a></h2>
<p>The simplest thing to replace is a string literal. The string you want to replace goes on the left-hand side of the substitution operator, and the string you want to replace it with goes on the right-hand side; for example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>The&nbsp;Replacements</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>Replace</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>Entrap</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«The&nbsp;Entrapments␤»</span></span></span></div></pre><p>Alphanumeric characters and the underscore are literal matches, just as in its cousin the <code>m//</code> operator. All other characters must be escaped with a backslash <code>\</code> or included in quotes:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Space:&nbsp;1999</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>Space\:</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>Party</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>like</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>it</span></span><span>&#39;</span><span class="routine name perl6fe"><span>s</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Party&nbsp;like&nbsp;it&#39;s&nbsp;1999␤»</span></span></span></div></pre><p>Note that the matching restrictions only apply to the left-hand side of the substitution expression.</p>
<p>By default, substitutions are only done on the first match:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>There&nbsp;can&nbsp;be&nbsp;twly&nbsp;two</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>tw</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>on</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;replace&nbsp;&#39;tw&#39;&nbsp;with&nbsp;&#39;on&#39;&nbsp;once</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«There&nbsp;can&nbsp;be&nbsp;only&nbsp;two␤»</span></span></span></div></pre><h2 id="Wildcards_and_character_classes"><a class="u" href="#___top" title="go to top of document">Wildcards and character classes</a></h2>
<p>Anything that can go into the <code>m//</code> operator can go into the left-hand side of the substitution operator, including wildcards and character classes. This is handy when the text you&#39;re matching isn&#39;t static, such as trying to match a number in the middle of a string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Blake&#39;s&nbsp;9</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="constant numeric perl6fe"><span>7</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;replace&nbsp;any&nbsp;sequence&nbsp;of&nbsp;digits&nbsp;with&nbsp;&#39;7&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Blake&#39;s&nbsp;7␤»</span></span></span></div></pre><p>Of course, you can use any of the <code>+</code>, <code>*</code> and <code>?</code> modifiers, and they&#39;ll behave just as they would in the <code>m//</code> operator&#39;s context.</p>
<h2 id="Capturing_groups"><a class="u" href="#___top" title="go to top of document">Capturing groups</a></h2>
<p>Just as in the match operator, capturing groups are allowed on the left-hand side, and the matched contents populate the <code>$0</code>..<code>$n</code> variables and the <code>$/</code> object:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>2016-01-23&nbsp;18:09:00</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)\-(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)\-(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>today</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;replace&nbsp;YYYY-MM-DD&nbsp;with&nbsp;&#39;today&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«today&nbsp;18:09:00␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>$1-$2-$0</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«01-23-2016␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>$/[1]-$/[2]-$/[0]</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«01-23-2016␤»</span></span></span></div></pre><p>Any of these variables <code>$0</code>, <code>$1</code>, <code>$/</code> can be used on the right-hand side of the operator as well, so you can manipulate what you&#39;ve just matched. This way you can separate out the <code>YYYY</code>, <code>MM</code> and <code>DD</code> parts of a date and reformat them into <code>MM-DD-YYYY</code> order:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>2016-01-23&nbsp;18:09:00</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)\-(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)\-(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="keyword other special-method perl6fe"><span>$1</span></span><span>-</span><span class="keyword other special-method perl6fe"><span>$2</span></span><span>-</span><span class="keyword other special-method perl6fe"><span>$0</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;transform&nbsp;YYYY-MM-DD&nbsp;to&nbsp;MM-DD-YYYY</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«01-23-2016&nbsp;18:09:00␤»</span></span></span></div></pre><p>Named capture can be used too:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>2016-01-23&nbsp;18:09:00</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>y</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)\-</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>m</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)\-</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>d</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>m</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>-</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>d</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>-</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>y</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«01-23-2016&nbsp;18:09:00␤»</span></span></span></div></pre><p>Since the right-hand side is effectively a regular Perl&nbsp;6 interpolated string, you can reformat the time from <code>HH:MM</code> to <code>h:MM {AM,PM}</code> like so:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>18:38</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)\:(</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span class="keyword other special-method perl6fe"><span>$0</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>%</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>12</span></span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>\</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="keyword other special-method perl6fe"><span>$1</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span class="keyword other special-method perl6fe"><span>$0</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>12</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>??</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>AM</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>!!</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>PM</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«6:38&nbsp;PM␤»</span></span></span></div></pre><p>Using the modulo <code>%</code> operator above keeps the sample code under 80 characters, but is otherwise the same as <code>$0 &lt; 12 ?? $0 !! $0 - 12 </code>. When combined with the power of the Parser Expression Grammars that <strong>really</strong> underlies what you&#39;re seeing here, you can use &quot;regular expressions&quot; to parse pretty much any text out there.</p>
<h2 id="Common_adverbs"><a class="u" href="#___top" title="go to top of document">Common adverbs</a></h2>
<p>The full list of adverbs that you can apply to regular expressions can be found elsewhere in this document (<a href="#Adverbs">section Adverbs</a>), but the most common are probably <code>:g</code> and <code>:i</code>.</p>
<ul><li><p>Global adverb <code>:g</code></p>
</li>
</ul>
<p>Ordinarily, matches are only made once in a given string, but adding the <code>:g</code> modifier overrides that behavior, so that substitutions are made everywhere possible. Substitutions are non-recursive; for example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted q operator perl6fe"><span>q</span></span><span class="punctuation definition string perl6fe"><span>{</span></span><span class="string quoted q brace quote perl6fe"><span>I&nbsp;can&nbsp;say&nbsp;&quot;banana&quot;&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;when&nbsp;to&nbsp;stop</span></span><span class="punctuation definition string perl6fe"><span>}</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:g</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>na</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>nana</span></span><span>,</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;substitute&nbsp;&#39;nana,&#39;&nbsp;for&nbsp;&#39;na&#39;</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp perl6fe"><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>say;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«I&nbsp;can&nbsp;say&nbsp;&quot;banana,nana,&quot;&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;...␤»</span></span></span></span></div></pre><p>Here, <code>na</code> was found twice in the original string and each time there was a substitution. The substitution only applied to the original string, though. The resulting string was not impacted.</p>
<ul><li><p>Insensitive adverb <code>:i</code></p>
</li>
</ul>
<p>Ordinarily, matches are case-sensitive. <code>s/foo/bar/</code> will only match <code>&#39;foo&#39;</code> and not <code>&#39;Foo&#39;</code>. If the adverb <code>:i</code> is used, though, matches become case-insensitive.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Fruit</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>fruit</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>vegetable</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Fruit␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>s</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:i</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>fruit</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>vegetable</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«vegetable␤»</span></span></span></div></pre><p>For more information on what these adverbs are actually doing, refer to the <a href="#Adverbs">section Adverbs</a> section of this document.</p>
<p>These are just a few of the transformations you can apply with the substitution operator. Some of the simpler uses in the real world include removing personal data from log files, editing MySQL timestamps into PostgreSQL format, changing copyright information in HTML files and sanitizing form fields in a web application.</p>
<p>As an aside, novices to regular expressions often get overwhelmed and think that their regular expression needs to match every piece of data in the line, including what they want to match. Write just enough to match the data you&#39;re looking for, no more, no less.</p>
<h2 id="S///_non-destructive_substitution"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-S///_non-destructive_substitution"><span class="index-entry"><code>S///</code> non-destructive substitution</span></a></a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string regexp construct slash perl6fe"><span>S</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>o&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>&nbsp;d</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="support function perl6fe"><span>new</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>with</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>old&nbsp;string</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«new&nbsp;string»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct slash perl6fe"><span>S</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:g</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>«&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>)</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="keyword other special-method perl6fe"><span>$0</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>uc</span></span><span>()</span><span class="keyword operator generic perl6fe"><span>/</span><span>.</span></span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>foo&nbsp;bar&nbsp;ber</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Foo␤Bar␤Ber»</span></span></span></div></pre><p><code>S///</code> uses the same semantics as the <code>s///</code> operator, except it leaves the original string intact and <em>returns the resultant string</em> instead of <code>$/</code> (<code>$/</code> still being set to the same values as with <code>s///</code>).</p>
<p><strong>Note:</strong> since the result is obtained as a return value, using this operator with the <code>~~</code> smartmatch operator is a mistake and will issue a warning. To execute the substitution on a variable that isn&#39;t the <code>$_</code> this operator uses, alias it to <code>$_</code> with <code>given</code>, <code>with</code>, or any other way. Alternatively, use the <a href="/routine/subst"><code>.subst</code> method</a>.</p>
<h1 id="Tilde_for_nesting_structures"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex__tilde-_regex__~-Tilde_for_nesting_structures"><span class="index-entry">Tilde for nesting structures</span></a></a></h1>
<p>The <code>~</code> operator is a helper for matching nested subrules with a specific terminator as the goal. It is designed to be placed between an opening and closing delimiter pair, like so:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>(</span><span>&#39;</span></span><span>&nbsp;~&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>)</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>expression</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div></pre><p>However, it mostly ignores the left argument, and operates on the next two atoms (which may be quantified). Its operation on those next two atoms is to &quot;twiddle&quot; them so that they are actually matched in reverse order. Hence the expression above, at first blush, is merely shorthand for:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>(</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>expression</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>)</span><span>&#39;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span></span></div></pre><p>But beyond that, when it rewrites the atoms it also inserts the apparatus that will set up the inner expression to recognize the terminator, and to produce an appropriate error message if the inner expression does not terminate on the required closing atom. So it really does pay attention to the left delimiter as well, and it actually rewrites our example to something more like:</p>
<p><a name="index-entry-SETGOAL"></a></p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>OPEN</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>(</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>SETGOAL:&nbsp;&#39;)&#39;</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>expression</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;[&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>GOAL</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>||</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>FAILGOAL</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;]</span></span></div></pre><p><a name="index-entry-FAILGOAL"><span class="index-entry">FAILGOAL</span></a> is a special method that can be defined by the user and it will be called on parse failure:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta class perl6fe"><span class="storage type class perl6fe"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class perl6fe"><span>A</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP perl6fe"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>[</span><span>&#39;</span></span><span>&nbsp;~&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>]</span><span>&#39;</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type perl6fe"><span>method</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>FAILGOAL</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>goal</span></span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control control-handlers perl6fe"><span>die</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Cannot&nbsp;find&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>goal</span></span><span>&nbsp;near&nbsp;position&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="variable language perl6fe"><span>self</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>pos</span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>A</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>parse</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>[good]</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢[good]｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>A</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>parse</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>[bad</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;will&nbsp;throw&nbsp;FAILGOAL&nbsp;exception</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword control closure trait perl6fe"><span>CATCH</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol perl6fe"><span>default</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>put</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>.</span><span>^</span></span><span class="support function perl6fe"><span>name</span></span><span>,&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>:&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«X::AdHoc:&nbsp;Cannot&nbsp;find&nbsp;&#39;]&#39;&nbsp;&nbsp;near&nbsp;position&nbsp;4␤»</span></span></span></div></pre><p>Note that you can use this construct to set up expectations for a closing construct even when there&#39;s no opening delimiter:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>3)</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>?</span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;~&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>)</span><span>&#39;</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;RESULT:&nbsp;«｢3)｣»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>(3)</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>?</span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;~&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>)</span><span>&#39;</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;RESULT:&nbsp;«｢3)｣»</span></span></span></div></pre><p>Here <code>&lt;?&gt;</code> successfully matches the null string.</p>
<p>The order of the regex capture is original:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a&nbsp;~&nbsp;(c)&nbsp;(b)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$0</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢c｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$1</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢b｣␤»</span></span></span></div></pre><h1 id="Subrules"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-declarator_regex-Subrules"><span class="index-entry">Subrules</span></a></a></h1>
<p>Just like you can put pieces of code into subroutines, you can also put pieces of regex into named rules.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>line</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\N</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span class="constant character escape class regexp perl6fe"><span>\n</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abc</span><span class="constant character escape perl6fe"><span>\n</span></span><span>def</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>line</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;def</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>First&nbsp;line:&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>line</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>chomp</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«First&nbsp;line:&nbsp;abc␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>A named regex can be declared with <code>my regex named-regex { body here }</code>, and called with <code>&lt;named-regex&gt;</code>. At the same time, calling a named regex installs a named capture with the same name.</p>
<p>To give the capture a different name from the regex, use the syntax <code>&lt;capture-name=named-regex&gt;</code>. If no capture is desired, a leading dot or ampersand will suppress it: <code>&lt;.named-regex&gt;</code> if it is a method declared in the same class or grammar, <code>&lt;&amp;named-regex&gt;</code> for a regex declared in the same lexical context.</p>
<p>Here&#39;s more complete code for parsing <code>ini</code> files:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>header</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>[</span><span>&#39;</span></span><span>&nbsp;(</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>)&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>]</span><span>&#39;</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\h</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\n</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>identifier</span></span><span>&nbsp;&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>kvpair</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\s</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta capture assignment perl6fe"><span class="entity name function capturename perl6fe"><span>key</span></span><span class="storage modifier capture assignment perl6fe"><span>=</span></span></span><span class="variable other identifier regexname perl6fe"><span>identifier</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>=</span><span>&#39;</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="meta capture assignment perl6fe"><span class="entity name function capturename perl6fe"><span>value</span></span><span class="storage modifier capture assignment perl6fe"><span>=</span></span></span><span class="variable other identifier regexname perl6fe"><span>identifier</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\n</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>section</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>header</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>kvpair</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta regexp named perl6fe"><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>contents</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="meta heredoc perl6fe"><span class="string quoted construct perl6fe"><span>q</span></span><span class="support function adverb perl6fe"><span>:to</span></span><span>/</span><span class="entity other attribute-name heredoc delimiter perl6fe"><span>EOI</span></span><span>/</span><span class="meta heredoc continuation perl6fe"><span>;</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;[passwords]</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jack=password1</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;joy=muchmoresecure123</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;[quotas]</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jack=123</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;joy=42</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta heredoc perl6fe"><span class="entity other attribute-name heredoc delimiter perl6fe"><span>EOI</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>config</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>contents</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>section</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>section</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>list</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>section</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>section</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>section</span></span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>kvpair</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>list</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>p</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>section</span></span></span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>p</span></span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>key</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>p</span></span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>value</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>config</span></span></span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>section</span></span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>header</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>[</span><span class="constant numeric perl6fe"><span>0</span></span><span>]&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>section</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="variable other identifier perl6fe"><span>config</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>perl</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«{:passwords(${:jack(&quot;password1&quot;),&nbsp;:joy(&quot;muchmoresecure123&quot;)}),</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:quotas(${:jack(&quot;123&quot;),&nbsp;:joy(&quot;42&quot;)})}»</span></span></span></div></pre><p>Named regexes can and should be grouped in <a href="/language/grammars">grammars</a>. A list of predefined subrules is listed in <a href="https://design.perl6.org/S05.html#Predefined_Subrules">S05-regex</a> of design documents.</p>
<h1 id="Regex_interpolation"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex__Regex_Interpolation-Regex_interpolation"><span class="index-entry">Regex interpolation</span></a></a></h1>
<p>Instead of using a literal pattern for a regex match, you can use a variable that holds that pattern. This variable can then be &#39;interpolated&#39; into a regex, such that its appearance in the regex is replaced with the pattern that it holds. The advantage of using interpolation this way, is that the pattern need not be hardcoded in the source of your Perl&nbsp;6 program, but may instead be variable and generated at runtime.</p>
<p>There are four different ways of interpolating a variable into a regex as a pattern, which may be summarized as follows:</p>
<table class="pod-table">
<thead><tr>
<th>Syntax</th> <th>Description</th>
</tr></thead>
<tbody>
<tr> <td>$variable</td> <td>Interpolates stringified contents of variable literally.</td> </tr> <tr> <td>$(code)</td> <td>Runs Perl&nbsp;6 code inside the regex, and interpolates the stringified return value literally.</td> </tr> <tr> <td>&lt;$variable&gt;</td> <td>Interpolates stringified contents of variable as a regex.</td> </tr> <tr> <td>&lt;{code}&gt;</td> <td>Runs Perl&nbsp;6 code inside the regex, and interpolates the stringified return value as a regex.</td> </tr>
</tbody>
</table><p>Let&#39;s start with the first two syntactical forms: <code>$variable</code> and <code>$(code)</code>. These forms will interpolate the stringified value of the variable or the stringified return value of the code literally, provided that the respective value isn&#39;t a <a href="/type/Regex"><code>Regex</code></a> object. If the value is a <code>Regex</code>, it will not be stringified, but instead be interpolated as such. &#39;Literally&#39; means <em>strictly literally</em>, that is: as if the respective stringified value is quoted with a basic <code>Q</code> string <a href="/language/quoting#Literal_strings:_Q"><code>Q[...]</code></a>. Consequently, the stringified value will not itself undergo any further interpolation.</p>
<p>For <code>$variable</code> this means the following:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Is&nbsp;this&nbsp;a&nbsp;regex&nbsp;or&nbsp;a&nbsp;string:&nbsp;123\w+False$pattern1&nbsp;?</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>pattern1</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>string</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>pattern2</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>\w+</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>number</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>123</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>string</span><span>&#39;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[1]&nbsp;OUTPUT:&nbsp;｢string｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>pattern1</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[2]&nbsp;OUTPUT:&nbsp;｢string｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>pattern2</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[3]&nbsp;OUTPUT:&nbsp;｢\w+｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>regex</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[4]&nbsp;OUTPUT:&nbsp;｢Is｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>number</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[5]&nbsp;OUTPUT:&nbsp;｢123｣</span></span></span></div></pre><p>In this example, the statements <code>[1]</code> and <code>[2]</code> are equivalent and meant to illustrate a plain case of regex interpolation. Since unescaped/unquoted alphabetic characters in a regex match literally, the single quotes in the regex of statement <code>[1]</code> are functionally redundant; they have merely been included to emphasize the correspondence between the first two statements. Statement <code>[3]</code> unambiguously shows that the string pattern held by <code>$pattern2</code> is interpreted literally, and not as a regex. In case it would have been interpreted as a regex, it would have matched the first word of <code>$string</code>, i.e. <code>｢Is｣</code>, as can be seen in statement <code>[4]</code>. Statement <code>[5]</code> shows how the stringified number is used as a match pattern.</p>
<p>This code exemplifies the use of the <code>$(code)</code> syntax:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Is&nbsp;this&nbsp;a&nbsp;regex&nbsp;or&nbsp;a&nbsp;string:&nbsp;123\w+False$pattern1&nbsp;?</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>pattern1</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>string</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>pattern3</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>gnirts</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>pattern4</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>$pattern1</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>bool</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean perl6fe"><span>True</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>f1</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol perl6fe"><span>return</span></span><span>&nbsp;</span><span class="string quoted q operator perl6fe"><span>Q</span></span><span class="punctuation definition string perl6fe"><span>[</span></span><span class="string quoted q bracket quote perl6fe"><span>$pattern1</span></span><span class="punctuation definition string perl6fe"><span>]</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>pattern3</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>flip&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[6]&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>$pattern3.flip()</span><span>&quot;</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[7]&nbsp;OUTPUT:&nbsp;｢string｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>(</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>pattern3</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>flip)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[8]&nbsp;OUTPUT:&nbsp;｢string｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>([~]&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>pattern3</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>comb</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>reverse)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&nbsp;[9]&nbsp;OUTPUT:&nbsp;｢string｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>(!</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>bool</span></span><span>)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;[10]&nbsp;OUTPUT:&nbsp;｢False｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>pattern4</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;[11]&nbsp;OUTPUT:&nbsp;｢$pattern1｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>(f1)&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;[12]&nbsp;OUTPUT:&nbsp;｢$pattern1｣</span></span></span></div></pre><p>Statement <code>[6]</code> does not work as probably intended. To the human reader, the dot <code>.</code> may seem to represent the <a href="/language/operators#methodop_.">method call operator</a>, but since a dot is not a valid character for an <a href="/language/syntax#Ordinary_identifiers">ordinary identifier</a>, and given the regex context, the compiler will parse it as the regex wildcard <a href="/language/regexes#Wildcards">.</a> that matches any character. The apparent ambiguity may be resolved in various ways, for instance through the use of straightforward <a href="/language/quoting#Interpolation:_qq">string interpolation</a> from the regex as in statement <code>[7]</code> (note that the inclusion of the call operator <code>()</code> is key here), or by using the second syntax form from the above table as in statement <code>[8]</code>, in which case the match pattern <code>string</code> first emerges as the return value of the <code>flip</code> method call. Since general Perl&nbsp;6 code may be run from within the parentheses of <code>$( )</code>, the same effect can also be achieved with a bit more effort, like in statement <code>[9]</code>. Statement <code>[10]</code> illustrates how the stringified version of the code&#39;s return value (the boolean value <code>False</code>) is matched literally.</p>
<p>Finally, statements <code>[11]</code> and <code>[12]</code> show how the value of <code>$pattern4</code> and the return value of <code>f1</code> are <em>not</em> subject to a further round of interpolation. Hence, in general, after possible stringification, <code>$variable</code> and <code>$(code)</code> provide for a strictly literal match of the variable or return value.</p>
<p>Now consider the second two syntactical forms from the table above: <code>&lt;$variable&gt;</code> and <code>&lt;{code}&gt;</code>. These forms will stringify the value of the variable or the return value of the code and interpolate it as a regex. If the respective value is a <code>Regex</code>, it is interpolated as such:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Is&nbsp;this&nbsp;a&nbsp;regex&nbsp;or&nbsp;a&nbsp;string:&nbsp;123\w+$x&nbsp;?</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>pattern1</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>\w+</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>number</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>123</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>f1</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol perl6fe"><span>return</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>s</span></span><span>\</span><span class="routine name perl6fe"><span>w</span></span><span class="keyword operator generic perl6fe"><span>+</span><span>/</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>$</span><span class="variable other identifier regexname perl6fe"><span>pattern1</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢Is｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>$</span><span class="variable other identifier regexname perl6fe"><span>number</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢123｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>{&nbsp;</span><span class="variable other identifier regexname perl6fe"><span>f1</span></span><span>&nbsp;}</span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢string｣</span></span></span></div></pre><p>Importantly, &#39;to interpolate as a regex&#39; means to interpolate/insert into the target regex without protective quoting. Consequently, if the value of the variable <code>$variable1</code> is itself of the form <code>$variable2</code>, evaluation of <code>&lt;$variable1&gt;</code> or <code>&lt;{ $variable1 }&gt;</code> inside a target regex <code>/.../</code> will cause the target regex to assume the form <code>/$variable2/</code>. As described above, the evaluation of this regex will then trigger further interpolation of <code>$variable2</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted q operator perl6fe"><span>Q</span></span><span class="punctuation definition string perl6fe"><span>[</span></span><span class="string quoted q bracket quote perl6fe"><span>Mindless&nbsp;\w+&nbsp;$variable1&nbsp;$variable2</span></span><span class="punctuation definition string perl6fe"><span>]</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>variable1</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted q operator perl6fe"><span>Q</span></span><span class="punctuation definition string perl6fe"><span>[</span></span><span class="string quoted q bracket quote perl6fe"><span>\w+</span></span><span class="punctuation definition string perl6fe"><span>]</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>variable2</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted q operator perl6fe"><span>Q</span></span><span class="punctuation definition string perl6fe"><span>[</span></span><span class="string quoted q bracket quote perl6fe"><span>$variable1</span></span><span class="punctuation definition string perl6fe"><span>]</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>f1</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol perl6fe"><span>return</span></span><span>&nbsp;</span><span class="string quoted q operator perl6fe"><span>Q</span></span><span class="punctuation definition string perl6fe"><span>[</span></span><span class="string quoted q bracket quote perl6fe"><span>$variable2</span></span><span class="punctuation definition string perl6fe"><span>]</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;/&lt;{&nbsp;f1&nbsp;}&gt;/&nbsp;==&gt;&nbsp;/$variable2/&nbsp;==&gt;&nbsp;/&nbsp;&#39;$variable1&#39;&nbsp;/</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>{&nbsp;</span><span class="variable other identifier regexname perl6fe"><span>f1</span></span><span>&nbsp;}</span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢$variable1｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;/&lt;$variable2&gt;/&nbsp;==&gt;&nbsp;/$variable1/&nbsp;==&gt;&nbsp;/&nbsp;&#39;\w+&#39;&nbsp;/</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>$</span><span class="variable other identifier regexname perl6fe"><span>variable2</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢\w+｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;/&lt;$variable1&gt;/&nbsp;==&gt;&nbsp;/\w+/</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>$</span><span class="variable other identifier regexname perl6fe"><span>variable1</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢Mindless｣</span></span></span></div></pre><p>When an array variable is interpolated into a regex, the regex engine handles it like a <code>|</code> alternative of the regex elements (see the documentation on <a href="/language/regexes#Quoted_lists_are_LTM_matches">embedded lists</a>, above). The interpolation rules for individual elements are the same as for scalars, so strings and numbers match literally, and <a href="/type/Regex"><code>Regex</code></a> objects match as regexes. Just as with ordinary <code>|</code> interpolation, the longest match succeeds:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>a</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>2</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric perl6fe"><span>23</span></span><span>,</span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;(</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>b235</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;&nbsp;b&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span>a</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>)</span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support type perl6fe"><span>Str</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«b23»</span></span></span></div></pre><p>The use of hashes in regexes is reserved.</p>
<h2 id="Regex_boolean_condition_check"><a class="u" href="#___top" title="go to top of document">Regex boolean condition check</a></h2>
<p>The special operator <code>&lt;?{}&gt;</code> allows the evaluation of a boolean expression that can perform a semantic evaluation of the match before the regular expression continues. In other words, it is possible to check in a boolean context a part of a regular expression and therefore invalidate the whole match (or allow it to continue) even if the match succeeds from a syntactic point of view.</p>
<p>In particular the <code>&lt;?{}&gt;</code> operator requires a <code>True</code> value in order to allow the regular expression to match, while its negated form <code>&lt;!{}&gt;</code> requires a <code>False</code> value.</p>
<p>In order to demonstrate the above operator, please consider the following example that involves a simple IPv4 address matching:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>127.0.0.1</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>ipv4-octet</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;1</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>3&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>&lt;?{</span></span><span>&nbsp;</span><span class="constant language boolean perl6fe"><span>True</span></span><span>&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>ipv4</span></span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span class="variable other identifier regexname perl6fe"><span>octet</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;4&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>%</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>.</span><span>&quot;</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>ipv4-octet</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;[｢127｣&nbsp;｢0｣&nbsp;｢0｣&nbsp;｢1｣]</span><span>&nbsp;</span></span></span></div></pre><p>The <code>octet</code> regular expression matches against a number made by one up to three digits. Each match is driven by the result of the <code>&lt;?{}&gt;</code>, that being the fixed value of <code>True</code> means that the regular expression match has to be always considered as good. As a counter-example, using the special constant value <code>False</code> will invalidate the match even if the regular expression matches from a syntactic point of view:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>127.0.0.1</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>ipv4-octet</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;1</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>3&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>&lt;?{</span></span><span>&nbsp;</span><span class="constant language boolean perl6fe"><span>False</span></span><span>&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>ipv4</span></span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span class="variable other identifier regexname perl6fe"><span>octet</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;4&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>%</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>.</span><span>&quot;</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>ipv4-octet</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></div></pre><p>From the above examples, it should be clear that it is possible to improve the semantic check, for instance ensuring that each <em>octet</em> is really a valid IPv4 octet:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>127.0.0.1</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>ipv4-octet</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;1</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>3&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>&lt;?{</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>=&nbsp;255&nbsp;&amp;&amp;&nbsp;$/.Int&nbsp;</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>ipv4</span></span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span class="variable other identifier regexname perl6fe"><span>octet</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;4&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>%</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>.</span><span>&quot;</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>ipv4-octet</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;[｢127｣&nbsp;｢0｣&nbsp;｢0｣&nbsp;｢1｣]</span><span>&nbsp;</span></span></span></div></pre><p>Please note that it is not required to evaluate the regular expression in-line, but also a regular method can be called to get the boolean value:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>127.0.0.1</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>check-octet</span></span><span>&nbsp;(&nbsp;</span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>o</span></span></span><span>&nbsp;)</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>o</span></span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>=&nbsp;255&nbsp;&amp;&amp;&nbsp;$o&nbsp;</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>ipv4-octet</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;1</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>3&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>&lt;?{</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>check-octet</span></span></span><span>(&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;)&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>ipv4</span></span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span class="variable other identifier regexname perl6fe"><span>octet</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;4&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>%</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>.</span><span>&quot;</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>ipv4-octet</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;[｢127｣&nbsp;｢0｣&nbsp;｢0｣&nbsp;｢1｣]</span><span>&nbsp;</span></span></span></div></pre><p>Of course, being <code>&lt;!{}&gt;</code> the negation form of <code>&lt;?{}&gt;</code> the same boolean evaluation can be rewritten in a negated form:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>127.0.0.1</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>invalid-octet</span></span><span>(&nbsp;</span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>o</span></span></span><span>&nbsp;)</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>o</span></span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>&nbsp;0&nbsp;||&nbsp;$o&nbsp;</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>255</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>ipv4-octet</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\d</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;1</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>3&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>&lt;!{</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>invalid-octet</span></span></span><span>(&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;)&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>localhost</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexname perl6fe"><span>ipv4</span></span><span class="keyword operator property regexp perl6fe"><span>-</span></span><span class="variable other identifier regexname perl6fe"><span>octet</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>**</span></span><span>&nbsp;4&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>%</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>.</span><span>&quot;</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>ipv4-octet</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;[｢127｣&nbsp;｢0｣&nbsp;｢0｣&nbsp;｢1｣]</span><span>&nbsp;</span></span></span></div></pre><h1 id="Adverbs"><a class="u" href="#___top" title="go to top of document">Adverbs</a></h1>
<p>Adverbs, which modify how regexes work and provide convenient shortcuts for certain kinds of recurring tasks, are combinations of one or more letters preceded by a colon <code>:</code>.</p>
<p>The so-called <em>regex</em> adverbs apply at the point where a regex is defined; additionally, <em>matching</em> adverbs apply at the point that a regex matches against a string and <em>substitution</em> adverbs are applied exclusively in substitutions.</p>
<p>This distinction often blurs, because matching and declaration are often textually close but using the method form of matching, that is, <code>.match</code>, makes the distinction clear.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Abra&nbsp;abra&nbsp;CADABRA</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="entity name section adverb regexp perl6fe"><span>:exhaustive</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;a&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(｢Abra｣&nbsp;｢abra｣&nbsp;｢ADABRA｣&nbsp;｢ADA｣&nbsp;｢ABRA｣)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;a&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;a&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Abra&nbsp;abra&nbsp;CADABRA</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>,</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>ex</span></span><span>);</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(｢Abra｣&nbsp;｢abra｣&nbsp;｢ADABRA｣&nbsp;｢ADA｣&nbsp;｢ABRA｣)␤»</span></span></span></div></pre><p>In the first example, the matching adverb (<code>:exhaustive</code>) is contiguous to the regex adverb (<code>:i</code>), and as a matter of fact, the &quot;definition&quot; and the &quot;matching&quot; go together; however, by using <code>match</code> it becomes clear that <code>:i</code> is only used when defining the <code>$regex</code> variable, and <code>:ex</code> (short for <code>:exhaustive</code>) as an argument when matching. As a matter of fact, matching adverbs cannot even be used in the definition of a regex:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="entity name section adverb regexp perl6fe"><span>:ex</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;a&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;a&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;===SORRY!===&nbsp;Error&nbsp;while&nbsp;compiling&nbsp;(...)␤Adverb&nbsp;ex&nbsp;not&nbsp;allowed&nbsp;on&nbsp;rx</span><span>&nbsp;</span></span></span></div></pre><p>Regex adverbs like <code>:i</code> go into the definition line and matching adverbs like <code>:overlap</code> (which can be abbreviated to <code>:ov</code>) are appended to the match call:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>baA</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>match</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>regex</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>overlap</span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«ba␤aA␤»</span></span></span></div></pre><h2 id="Regex_adverbs"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_adverb_:ignorecase-regex_adverb_:i-Regex_adverbs"><span class="index-entry">Regex adverbs</span></a></a></h2>
<p>The adverbs that appear at the time of a regex declaration are part of the actual regex and influence how the Perl&nbsp;6 compiler translates the regex into binary code.</p>
<p>For example, the <code>:ignorecase</code> (<code>:i</code>) adverb tells the compiler to ignore the distinction between upper case, lower case and title case letters.</p>
<p>So <code>&#39;a&#39; ~~ /A/</code> is false, but <code>&#39;a&#39; ~~ /:i A/</code> is a successful match.</p>
<p>Regex adverbs can come before or inside a regex declaration and only affect the part of the regex that comes afterwards, lexically. Note that regex adverbs appearing before the regex must appear after something that introduces the regex to the parser, like &#39;rx&#39; or &#39;m&#39; or a bare &#39;/&#39;. This is NOT valid:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>rx1</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="entity name section adverb regexp perl6fe"><span>:i</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;adverb&nbsp;is&nbsp;before&nbsp;the&nbsp;regex&nbsp;is&nbsp;recognized&nbsp;=&gt;&nbsp;exception</span><span>&nbsp;</span></span></span></div></pre><p>but these are valid:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>rx1</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="entity name section adverb regexp perl6fe"><span>:i</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;before</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>rx2</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="entity name section adverb regexp perl6fe"><span>:i</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;before</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>rx3</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;inside</span></span></span></div></pre><p>These two regexes are equivalent:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>rx1</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="entity name section adverb regexp perl6fe"><span>:i</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;before</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>rx2</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;a</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;inside</span></span></span></div></pre><p>Whereas these two are not:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>rx3</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>a&nbsp;</span><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;b</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;only&nbsp;the&nbsp;b&nbsp;case&nbsp;insensitively</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>rx4</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;a&nbsp;b</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;completely&nbsp;case&nbsp;insensitively</span></span></span></div></pre><p>Square brackets and parentheses limit the scope of an adverb:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(</span><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;a&nbsp;b)&nbsp;c&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;&#39;ABc&#39;&nbsp;but&nbsp;not&nbsp;&#39;ABC&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;[</span><span class="entity name section adverb perl6fe"><span>:i</span></span><span>&nbsp;a&nbsp;b]&nbsp;c&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;matches&nbsp;&#39;ABc&#39;&nbsp;but&nbsp;not&nbsp;&#39;ABC&#39;</span></span></span></div></pre><p>When two adverbs are used together, they keep their colon at the front</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>þor&nbsp;is&nbsp;Þor</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="entity name section adverb regexp perl6fe"><span>:g:i</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>þ</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(｢þ｣&nbsp;｢Þ｣)␤»</span></span></span></div></pre><p>That implies that when there are two vowels together after a <code>:</code>, they correspond to the same adverb, as in <code>:ov</code> or <code>:P5</code>.</p>
<h3 id="Ignoremark"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_adverb_:ignoremark-regex_adverb_:m-Ignoremark"><span class="index-entry">Ignoremark</span></a></a></h3>
<p>The <code>:ignoremark</code> or <code>:m</code> adverb instructs the regex engine to only compare base characters, and ignore additional marks such as combining accents:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>ä</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="entity name section adverb regexp perl6fe"><span>:ignoremark</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>ä</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>ỡ</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>rx</span></span><span class="entity name section adverb regexp perl6fe"><span>:ignoremark</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>o</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True&gt;</span><span>&nbsp;</span></span></span></div></pre><h3 id="Ratchet"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_adverb_:ratchet-regex_adverb_:r-Ratchet"><span class="index-entry">Ratchet</span></a></a></h3>
<p>The <code>:ratchet</code> or <code>:r</code> adverb causes the regex engine to not backtrack (see <a href="/language/regexes#Backtracking">backtracking</a>). Mnemonic: a <a href="https://en.wikipedia.org/wiki/Ratchet_%28device%29">ratchet</a> only moves in one direction and can&#39;t backtrack.</p>
<p>Without this adverb, parts of a regex will try different ways to match a string in order to make it possible for other parts of the regex to match. For example, in <code>&#39;abc&#39; ~~ /\w+ ./</code>, the <code>\w+</code> first eats up the whole string, <code>abc</code> but then the <code>.</code> fails. Thus <code>\w+</code> gives up a character, matching only <code>ab</code>, and the <code>.</code> can successfully match the string <code>c</code>. This process of giving up characters (or in the case of alternations, trying a different branch) is known as backtracking.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abc</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:r</span></span><span>&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span></span></span></div></pre><p>Ratcheting can be an optimization, because backtracking is costly. But more importantly, it closely corresponds to how humans parse a text. If you have a regex <code>my regex identifier { \w+ }</code> and <code>my regex keyword { if | else | endif }</code>, you intuitively expect the <code>identifier</code> to gobble up a whole word and not have it give up its end to the next rule, if the next rule otherwise fails.</p>
<p>For example, you don&#39;t expect the word <code>motif</code> to be parsed as the identifier <code>mot</code> followed by the keyword <code>if</code>. Instead, you expect <code>motif</code> to be parsed as one identifier; and if the parser expects an <code>if</code> afterwards, best that it should fail than have it parse the input in a way you don&#39;t expect.</p>
<p>Since ratcheting behavior is often desirable in parsers, there&#39;s a shortcut to declaring a ratcheting regex:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>thing</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span><span>.</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;short&nbsp;for</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>regex</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>thing</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:r</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span><span>.</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span><span>;</span></span></div></pre><h3 id="Sigspace"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-regex_adverb_:sigspace-regex_adverb_:s-Sigspace"><span class="index-entry">Sigspace</span></a></a></h3>
<p>The <strong><code>:sigspace</code></strong> or <strong><code>:s</code></strong> adverb makes whitespace significant in a regex.</p>
<pre class="pod-block-code">say so &quot;I used Photoshop®&quot;   ~~ m:i/   photo shop /;      # OUTPUT: «True␤»
say so &quot;I used a photo shop&quot; ~~ m:i<strong>:s</strong>/ photo shop /;   # OUTPUT: «True␤»
say so &quot;I used Photoshop®&quot;   ~~ m:i<strong>:s</strong>/ photo shop /;   # OUTPUT: «False␤»
</pre>
<p><code>m:s/ photo shop /</code> acts the same as <code>m/ photo &lt;.ws&gt; shop &lt;.ws&gt; /</code>. By default, <code>&lt;.ws&gt; </code> makes sure that words are separated, so <code>a b</code> and <code>^&amp;</code> will match <code>&lt;.ws&gt; </code> in the middle, but <code>ab</code> won&#39;t.</p>
<p>Where whitespace in a regex turns into <code>&lt;.ws&gt;</code> depends on what comes before the whitespace. In the above example, whitespace in the beginning of a regex doesn&#39;t turn into <code>&lt;.ws&gt;</code>, but whitespace after characters does. In general, the rule is that if a term might match something, whitespace after it will turn into <code>&lt;.ws&gt;</code>.</p>
<p>In addition, if whitespace comes after a term but <em>before</em> a quantifier (<code>+</code>, <code>*</code>, or <code>?</code>), <code>&lt;.ws&gt;</code> will be matched after every match of the term. So, <code>foo +</code> becomes <code>[ foo &lt;.ws&gt; ]+</code>. On the other hand, whitespace <em>after</em> a quantifier acts as normal significant whitespace; e.g., &quot;<code>foo+ </code>&quot; becomes <code>foo+ &lt;.ws&gt;</code>.</p>
<p>In all, this code:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="string regexp construct perl6fe"><span>rx</span></span><span class="entity name section adverb regexp perl6fe"><span>&nbsp;:s</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>{</span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>^^</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span class="meta interpolation perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>No&nbsp;sigspace&nbsp;after&nbsp;this</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span class="meta interpolation perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="comment suppressed capture property regexp perl6fe"><span>.assertion_and_then_ws</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;characters_with_ws_after</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;ws_separated_characters&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;[</span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;some&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>stuff</span><span>&quot;</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>..</span></span><span>&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>&nbsp;</span><span class="entity name section boundary regexp perl6fe"><span>$$</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;]</span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name section adverb perl6fe"><span>:my</span></span><span>&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>foo</span></span><span>&nbsp;=&nbsp;</span><span class="string literal perl6fe"><span>&quot;</span><span>no&nbsp;ws&nbsp;after&nbsp;this</span><span>&quot;</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="fstring regexp perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>foo</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation definition regexp perl6fe"><span>}</span></span></span></div></pre><p>Becomes:</p>
<pre class="pod-block-code">rx {
    ^^ <strong>&lt;.ws&gt;</strong>
    {
        say &quot;No space after this&quot;;
    }
    &lt;.assertion_and_then_ws&gt; <strong>&lt;.ws&gt;</strong>
    characters_with_ws_after+ <strong>&lt;.ws&gt;</strong>
    [ws_separated_characters <strong>&lt;.ws&gt;</strong>]* <strong>&lt;.ws&gt;</strong>
    [
    | some <strong>&lt;.ws&gt;</strong> &quot;stuff&quot; <strong>&lt;.ws&gt;</strong> .. <strong>&lt;.ws&gt;</strong> . <strong>&lt;.ws&gt;</strong>
    | $$ <strong>&lt;.ws&gt;</strong>
    ] <strong>&lt;.ws&gt;</strong>
    :my $foo = &quot;no ws after this&quot;;
    $foo <strong>&lt;.ws&gt;</strong>
}
</pre>
<p>If a regex is declared with the <code>rule</code> keyword, both the <code>:sigspace</code> and <code>:ratchet</code> adverbs are implied.</p>
<p>Grammars provide an easy way to override what <code>&lt;.ws&gt;</code> matches:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta class perl6fe"><span class="storage type class perl6fe"><span>grammar</span></span><span>&nbsp;</span><span class="entity name type class perl6fe"><span>Demo</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>token</span></span><span>&nbsp;</span><span class="entity name function regexp named perl6fe"><span>ws</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span>!</span><span class="variable other identifier regexname perl6fe"><span>ww</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;only&nbsp;match&nbsp;when&nbsp;not&nbsp;within&nbsp;a&nbsp;word</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant character escape class regexp perl6fe"><span>\h</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>*</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;only&nbsp;match&nbsp;horizontal&nbsp;whitespace</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta regexp named perl6fe"><span class="storage type declare regexp named perl6fe"><span>rule</span></span><span>&nbsp;</span><span class="entity name function regexp named TOP perl6fe"><span>TOP</span></span><span>&nbsp;</span><span class="meta regexp named block perl6fe"><span class="punctuation definition regex named perl6fe"><span>{</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;called&nbsp;by&nbsp;Demo.parse;</span><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;b&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>.</span><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta regexp named perl6fe"><span class="meta regexp named block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="punctuation definition regexp named perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;doesn&#39;t&nbsp;parse,&nbsp;whitespace&nbsp;required&nbsp;between&nbsp;a&nbsp;and&nbsp;b</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Demo</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>parse</span></span><span>(</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>ab.</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Demo</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>parse</span></span><span>(</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a&nbsp;b.</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Demo</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>parse</span></span><span>(</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="constant character escape perl6fe"><span>\t</span></span><span>b&nbsp;.</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;\n&nbsp;is&nbsp;vertical&nbsp;whitespace,&nbsp;so&nbsp;no&nbsp;match</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Demo</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>parse</span></span><span>(</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="constant character escape perl6fe"><span>\t</span></span><span>b</span><span class="constant character escape perl6fe"><span>\n</span></span><span>.</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span></span></span></div></pre><p>When parsing file formats where some whitespace (for example, vertical whitespace) is significant, it&#39;s advisable to override <code>ws</code>.</p>
<h3 id="Perl_5_compatibility_adverb"><a class="u" href="#___top" title="go to top of document">Perl&nbsp;5 compatibility adverb</a></h3>
<p>The <strong><code>:Perl5</code></strong> or <strong><code>:P5</code></strong> adverb switch the Regex parsing and matching to the way Perl&nbsp;5 regexes behave:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>hello&nbsp;world</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="entity name section adverb regexp perl6fe"><span>:Perl5</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>hello&nbsp;(world)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>hello&nbsp;world</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>hello&nbsp;(world)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator word perl6fe"><span>so</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>hello&nbsp;world</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="entity name section boundary regexp perl6fe"><span>^</span></span><span>&nbsp;</span><span class="string literal perl6fe"><span>&#39;</span><span>hello&nbsp;</span><span>&#39;</span></span><span>&nbsp;(</span><span class="string literal perl6fe"><span>&#39;</span><span>world</span><span>&#39;</span></span><span>)</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><p>The regular behavior is recommended and more idiomatic in Perl&nbsp;6 of course, but the <strong><code>:Perl5</code></strong> adverb can be useful when compatibility with Perl5 is required.</p>
<h2 id="Matching_adverbs"><a class="u" href="#___top" title="go to top of document">Matching adverbs</a></h2>
<p>In contrast to regex adverbs, which are tied to the declaration of a regex, matching adverbs only make sense when matching a string against a regex.</p>
<p>They can never appear inside a regex, only on the outside – either as part of an <code>m/.../</code> match or as arguments to a match method.</p>
<h3 id="Positional_adverbs"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-matching_adverb_:1st-matching_adverb_:2nd-matching_adverb_:3rd-matching_adverb_:nth-Positional_adverbs"><span class="index-entry">Positional adverbs</span></a></a></h3>
<p>Positional adverbs make the expression match only the string in the indicated position:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>data</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>f&nbsp;fo&nbsp;foo&nbsp;fooo&nbsp;foooo&nbsp;fooooo&nbsp;foooooo</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>data</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct paren perl6fe"><span>m</span></span><span class="entity name section adverb regexp paren perl6fe"><span>:nth</span></span><span class="punctuation definition regexp paren perl6fe"><span>(</span></span><span class="string regexp paren perl6fe"><span>4</span></span><span class="punctuation definition regexp paren perl6fe"><span>)</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>fo</span></span><span class="keyword operator generic perl6fe"><span>+</span><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢foooo｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>data</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="entity name section adverb regexp perl6fe"><span>:1st</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>fo</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢fo｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>data</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="entity name section adverb regexp perl6fe"><span>:3rd</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>fo</span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢fooo｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>data</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct paren perl6fe"><span>m</span></span><span class="entity name section adverb regexp paren perl6fe"><span>:nth</span></span><span class="punctuation definition regexp paren perl6fe"><span>(</span></span><span class="string regexp paren perl6fe"><span>1,3</span></span><span class="punctuation definition regexp paren perl6fe"><span>)</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>fo</span></span><span class="keyword operator generic perl6fe"><span>+</span><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(｢fo｣&nbsp;｢fooo｣)␤»</span></span></span></div></pre><p>As you can see, the adverb argument can also be a list. There&#39;s actually no difference between the <code>:nth</code> adverb and the rest. You choose them only based on legibility. From 6.d, you can also use <code>Junction</code>s as arguments.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>data</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>f&nbsp;fo&nbsp;foo&nbsp;fooo&nbsp;foooo&nbsp;fooooo&nbsp;foooooo</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>data</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct paren perl6fe"><span>m</span></span><span class="entity name section adverb regexp paren perl6fe"><span>:st</span></span><span class="punctuation definition regexp paren perl6fe"><span>(</span></span><span class="string regexp paren perl6fe"><span>1</span><span class="support function alternation regexp perl6fe"><span>|</span></span><span>8</span></span><span class="punctuation definition regexp paren perl6fe"><span>)</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>fo</span></span><span class="keyword operator generic perl6fe"><span>+</span><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><p>In this case, one of them exists (1), so it returns True. Observe that we have used <code>:st</code>. As said above, it&#39;s functionally equivalent, although obviously less legible than using <code>:nth</code>, so this last form is advised.</p>
<h3 id="Continue"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-matching_adverb_:continue-matching_adverb_:c-Continue"><span class="index-entry">Continue</span></a></a></h3>
<p>The <code>:continue</code> or short <code>:c</code> adverb takes an argument. The argument is the position where the regex should start to search. By default, it searches from the start of the string, but <code>:c</code> overrides that. If no position is specified for <code>:c</code>, it will default to <code>0</code> unless <code>$/</code> is set, in which case, it defaults to <code>$/.to</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>a1xa2</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="routine name perl6fe"><span>m</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>a</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«a1␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="routine name perl6fe"><span>m</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>c</span></span><span>(</span><span class="constant numeric perl6fe"><span>2</span></span><span>)</span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>a</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«a2␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p><em>Note:</em> unlike <code>:pos</code>, a match with :continue() will attempt to match further in the string, instead of failing:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct paren perl6fe"><span>m</span></span><span class="entity name section adverb regexp paren perl6fe"><span>:c</span></span><span class="punctuation definition regexp paren perl6fe"><span>(</span></span><span class="string regexp paren perl6fe"><span>3</span></span><span class="punctuation definition regexp paren perl6fe"><span>)</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>e</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>+</span><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢efg｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct paren perl6fe"><span>m</span></span><span class="entity name section adverb regexp paren perl6fe"><span>:p</span></span><span class="punctuation definition regexp paren perl6fe"><span>(</span></span><span class="string regexp paren perl6fe"><span>3</span></span><span class="punctuation definition regexp paren perl6fe"><span>)</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>e</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>+</span><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span></span></span></div></pre><h3 id="Exhaustive"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-matching_adverb_:exhaustive-matching_adverb_:ex-Exhaustive"><span class="index-entry">Exhaustive</span></a></a></h3>
<p>To find all possible matches of a regex – including overlapping ones – and several ones that start at the same position, use the <code>:exhaustive</code> (short <code>:ex</code>) adverb.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abracadabra</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="string regexp construct slash perl6fe"><span>m</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:exhaustive</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;a&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;a&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>x</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>from</span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>The above code produces this output:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>abracadabra</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>abracada</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>abraca</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>abra</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>acadabra</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>acada</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>aca</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>adabra</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>ada</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>abra</span></span></span></div></pre><h3 id="Global"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-matching_adverb_:global-matching_adverb_:g-Global"><span class="index-entry">Global</span></a></a></h3>
<p>Instead of searching for just one match and returning a <a href="/type/Match">Match object</a>, search for every non-overlapping match and return them in a <a href="/type/List">List</a>. In order to do this, use the <code>:global</code> adverb:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>several&nbsp;words&nbsp;here</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>matches</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct perl6fe"><span>m</span></span><span class="entity name section adverb regexp perl6fe"><span>:global</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span class="constant character escape class regexp perl6fe"><span>\w</span></span><span class="keyword operator quantifiers regexp perl6fe"><span>+</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>matches</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>elems</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«3␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>matches</span></span></span><span>[</span><span class="constant numeric perl6fe"><span>2</span></span><span>];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«here␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p><code>:g</code> is shorthand for <code>:global</code>.</p>
<h3 id="Pos"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-matching_adverb_:pos-matching_adverb_:p-Pos"><span class="index-entry">Pos</span></a></a></h3>
<p>Anchor the match at a specific position in the string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abcdef</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string regexp construct paren perl6fe"><span>m</span></span><span class="entity name section adverb regexp paren perl6fe"><span>:pos</span></span><span class="punctuation definition regexp paren perl6fe"><span>(</span></span><span class="string regexp paren perl6fe"><span>2</span></span><span class="punctuation definition regexp paren perl6fe"><span>)</span></span><span class="keyword operator generic perl6fe"><span>/</span><span>.</span><span>*</span><span>/</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>from</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«2␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«cdef␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p><code>:p</code> is shorthand for <code>:pos</code>.</p>
<p><em>Note:</em> unlike <code>:continue</code>, a match anchored with :pos() will fail, instead of attempting to match further down the string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct paren perl6fe"><span>m</span></span><span class="entity name section adverb regexp paren perl6fe"><span>:c</span></span><span class="punctuation definition regexp paren perl6fe"><span>(</span></span><span class="string regexp paren perl6fe"><span>3</span></span><span class="punctuation definition regexp paren perl6fe"><span>)</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>e</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>+</span><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«｢efg｣␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>abcdefg</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="string regexp construct paren perl6fe"><span>m</span></span><span class="entity name section adverb regexp paren perl6fe"><span>:p</span></span><span class="punctuation definition regexp paren perl6fe"><span>(</span></span><span class="string regexp paren perl6fe"><span>3</span></span><span class="punctuation definition regexp paren perl6fe"><span>)</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>e</span></span><span class="keyword operator generic perl6fe"><span>.</span><span>+</span><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span></span></span></div></pre><h3 id="Overlap"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-matching_adverb_:overlap-matching_adverb_:ov-Overlap"><span class="index-entry">Overlap</span></a></a></h3>
<p>To get several matches, including overlapping matches, but only one (the longest) from each starting position, specify the <code>:overlap</code> (short <code>:ov</code>) adverb:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>abracadabra</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="string regexp construct slash perl6fe"><span>m</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:overlap</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;a&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>*</span></span><span>&nbsp;a&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator word perl6fe"><span>x</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>from</span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>match</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>produces</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>abracadabra</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>acadabra</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>adabra</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>abra</span></span></span></div></pre><h2 id="Substitution_adverbs"><a class="u" href="#___top" title="go to top of document">Substitution adverbs</a></h2>
<p>You can apply matching adverbs (such as <code>:global</code>, <code>:pos</code> etc.) to substitutions. In addition, there are adverbs that only make sense for substitutions, because they transfer a property from the matched string to the replacement string.</p>
<h3 id="Samecase"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-substitution_adverb_:samecase-substitution_adverb_:ii-Samecase"><span class="index-entry">Samecase</span></a></a></h3>
<p>The <code>:samecase</code> or <code>:ii</code> substitution adverb implies the <code>:ignorecase</code> adverb for the regex part of the substitution, and in addition carries the case information to the replacement string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>The&nbsp;cat&nbsp;chases&nbsp;the&nbsp;dog</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="string regexp construct bracket perl6fe"><span>s</span></span><span class="entity name section adverb regexp bracket perl6fe"><span>:global:samecase</span></span><span class="punctuation definition regexp bracket perl6fe"><span>[</span></span><span class="string regexp bracket perl6fe"><span>the</span></span><span class="punctuation definition regexp bracket perl6fe"><span>]</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>_</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«A&nbsp;cat&nbsp;chases&nbsp;a&nbsp;dog»</span><span>&nbsp;</span></span></span></div></pre><p>Here you can see that the first replacement string <code>a</code> got capitalized, because the first string of the matched string was also a capital letter.</p>
<h3 id="Samemark"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-substitution_adverb_:samemark-substitution_adverb_:mm-Samemark"><span class="index-entry">Samemark</span></a></a></h3>
<p>The <code>:samemark</code> or <code>:mm</code> adverb implies <code>:ignoremark</code> for the regex, and in addition, copies the markings from the matched characters to the replacement string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>äộñ</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string regexp construct slash perl6fe"><span>S</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:mm</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>&nbsp;a&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>uia</span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«üị̂ã»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><h3 id="Samespace"><a class="u" href="#___top" title="go to top of document"><a name="index-entry-substitution_adverb_:samespace-substitution_adverb_:ss-Samespace"><span class="index-entry">Samespace</span></a></a></h3>
<p>The <code>:samespace</code> or <code>:ss</code> substitution modifier implies the <code>:sigspace</code> modifier for the regex, and in addition, copies the whitespace from the matched string to the replacement string:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string regexp construct slash perl6fe"><span>S</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:samespace</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>a&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>c</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>d</span></span><span class="keyword operator generic perl6fe"><span>/</span><span>.</span></span><span class="support function perl6fe"><span>perl</span></span><span>&nbsp;</span><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a&nbsp;b</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«&quot;c&nbsp;d&quot;»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string regexp construct slash perl6fe"><span>S</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:samespace</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>a&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>c</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>d</span></span><span class="keyword operator generic perl6fe"><span>/</span><span>.</span></span><span class="support function perl6fe"><span>perl</span></span><span>&nbsp;</span><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="constant character escape perl6fe"><span>\t</span></span><span>b</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«&quot;c\td&quot;»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string regexp construct slash perl6fe"><span>S</span></span><span class="entity name section adverb regexp slash perl6fe"><span>:samespace</span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="string regexp slash perl6fe"><span>a&nbsp;</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span></span></span><span class="punctuation definition regexp slash perl6fe"><span>/</span></span><span class="routine name perl6fe"><span>c</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>d</span></span><span class="keyword operator generic perl6fe"><span>/</span><span>.</span></span><span class="support function perl6fe"><span>perl</span></span><span>&nbsp;</span><span class="keyword control repeat perl6fe"><span>given</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>a</span><span class="constant character escape perl6fe"><span>\n</span></span><span>b</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«&quot;c\nd&quot;»</span><span>&nbsp;</span></span></span></div></pre><p>The <code>ss/.../.../</code> syntactic form is a shorthand for <code>s:samespace/.../.../</code>.</p>
<h1 id="Backtracking"><a class="u" href="#___top" title="go to top of document">Backtracking</a></h1>
<p>Perl&nbsp;6 defaults to <em>backtracking</em> when evaluating regular expressions. Backtracking is a technique that allows the engine to try different matching in order to allow every part of a regular expression to succeed. This is costly, because it requires the engine to usually eat up as much as possible in the first match and then adjust going backwards in order to ensure all regular expression parts have a chance to match.</p>
<p>In order to better understand backtracking, consider the following example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>PostgreSQL&nbsp;is&nbsp;an&nbsp;SQL&nbsp;database!</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)(SQL)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$1</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢PostgreSQL&nbsp;is&nbsp;an&nbsp;SQL｣</span><span>&nbsp;</span></span></span></div></pre><p>What happens in the above example is that the string has to be matched against the second occurrence of the word <em>SQL</em>, eating all characters before and leaving out the rest.</p>
<p>Since it is possible to execute a piece of code within a regular expression, it is also possible to inspect the <a href="/type/Match">Match</a> object within the regular expression itself:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>iteration</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>show-captures</span></span><span>(&nbsp;</span><span class="support type perl6fe"><span>Match</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span>&nbsp;)</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result_split</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span class="constant character escape perl6fe"><span>\n</span></span><span>===&nbsp;Iteration&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="keyword operator multi-symbol perl6fe"><span>++</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>iteration</span></span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;===</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>list</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>kv</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>i</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>capture</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Capture&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>i</span></span><span>&nbsp;=&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>capture</span></span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result_split</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>[</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>capture</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>]</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result_split</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)(SQL)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$1</span></span><span>&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>show-captures</span></span><span>(&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>&nbsp;);&nbsp;&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div></pre><p>The <code>show-captures</code> method will dump all the elements of <code>$/</code> producing the following output:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>===</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Iteration</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>===</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Postgre</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span></span></div><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>Postgre</span></span><span>][</span><span class="routine name perl6fe"><span>SQL</span></span><span>][&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;]</span></span></div></pre><p>showing that the string has been split around the second occurrence of <em>SQL</em>, that is the repetition of the first capture (<code>$/[1]</code>).</p>
<p>With that in place, it is now possible to see how the engine backtracks to find the above match: it does suffice to move the <code>show-captures</code> in the middle of the regular expression, in particular before the repetition of the first capture <code>$1</code> to see it in action:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>iteration</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>show-captures</span></span><span>(&nbsp;</span><span class="support type perl6fe"><span>Match</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span>&nbsp;)</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span class="constant character escape perl6fe"><span>\n</span></span><span>===&nbsp;Iteration&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="keyword operator multi-symbol perl6fe"><span>++</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>iteration</span></span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;===</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>list</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>kv</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>i</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>capture</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Capture&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>i</span></span><span>&nbsp;=&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>capture</span></span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>[</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>capture</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>]</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)(SQL)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>show-captures</span></span><span>(&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>&nbsp;);&nbsp;&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$1</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div></pre><p>The output will be much more verbose and will show several iterations, with the last one being the <em>winning</em>. The following is an excerpt of the output:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>===</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Iteration</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>===</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>PostgreSQL</span></span><span>&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span></span></div><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>PostgreSQL</span></span><span>&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;][</span><span class="routine name perl6fe"><span>SQL</span></span><span>][&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span><span>]</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>===</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Iteration</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>===</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>PostgreSQL</span></span><span>&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>database</span></span></span></div><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>PostgreSQL</span></span><span>&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;][</span><span class="routine name perl6fe"><span>SQL</span></span><span>][&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span>]</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>...</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>===</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Iteration</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>24</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>===</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Postgre</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span></span></div><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>Postgre</span></span><span>][</span><span class="routine name perl6fe"><span>SQL</span></span><span>][&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;]</span></span></div></pre><p>In the first iteration the <em>SQL</em> part of <em>PostgreSQL</em> is kept within the word: that is not what the regular expression asks for, so there&#39;s the need for another iteration. The second iteration will move back, in particular one character back (removing thus the final <em>!</em>) and try to match again, resulting in a fail since again the <em>SQL</em> is still kept within <em>PostgreSQL</em>. After several iterations, the final result is match.</p>
<p>It is worth noting that the final iteration is number <em>24</em>, and that such number is exactly the distance, in number of chars, from the end of the string to the first <em>SQL</em> occurrence:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>chars</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>-</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>index</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>SQL</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;23</span><span>&nbsp;</span></span></span></div></pre><p>Since there are 23 chars from the very end of the string to the very first <em>S</em> of <em>SQL</em> the backtracking engine will need 23 &quot;useless&quot; matches to find the right one, that is, it will need 24 steps to get the final result.</p>
<p>Backtracking is a costly machinery, therefore it is possible to disable it in those cases where the matching can be found <em>forward</em> only.</p>
<p>With regards to the above example, disabling backtracking means the regular expression will not have any chance to match:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)(SQL)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$1</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢PostgreSQL&nbsp;is&nbsp;an&nbsp;SQL｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:r</span></span><span>&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)(SQL)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$1</span></span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></div></pre><p>The fact is that, as shown in the <em>iteration 1</em> output, the first match of the regular expression engine will be <code>PostgreSQL is an </code>, <code>SQL</code>, <code>database</code> that does not leave out any room for matching another occurrence of the word <em>SQL</em> (as <code>$1</code> in the regular expression). Since the engine is not able to get backward and change the path to match, the regular expression fails.</p>
<p>It is worth noting that disabling backtracking will not prevent the engine to try several ways to match the regular expression. Consider the following slightly changed example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>PostgreSQL&nbsp;is&nbsp;an&nbsp;SQL&nbsp;database!</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(SQL)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$1</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></div></pre><p>Since there is no specification for a character before the word <em>SQL</em>, the engine will match against the rightmost word <em>SQL</em> and go forward from there. Since there is no repetition of <em>SQL</em> remaining, the match fails. It is possible, again, to inspect what the engine performs introducing a dumping piece of code within the regular expression:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>iteration</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>show-captures</span></span><span>(&nbsp;</span><span class="support type perl6fe"><span>Match</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span>&nbsp;)</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span class="constant character escape perl6fe"><span>\n</span></span><span>===&nbsp;Iteration&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="keyword operator multi-symbol perl6fe"><span>++</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>iteration</span></span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;===</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>list</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>kv</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>i</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>capture</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Capture&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>i</span></span><span>&nbsp;=&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>capture</span></span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>[</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>capture</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>]</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;(SQL)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>show-captures</span></span><span>(&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>&nbsp;);&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$1</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div></pre><p>that produces a rather simple output:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>===</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Iteration</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>===</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span></span></div><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>SQL</span></span><span>][&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span><span>]</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>===</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Iteration</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>===</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span></span></div><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>SQL</span></span><span>][&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span><span>]</span></span></div></pre><p>Even using the <a href="/language/regexes#Ratchet">:r</a> adverb to prevent backtracking will not change things:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>iteration</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>show-captures</span></span><span>(&nbsp;</span><span class="support type perl6fe"><span>Match</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span>&nbsp;)</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span class="constant character escape perl6fe"><span>\n</span></span><span>===&nbsp;Iteration&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span class="keyword operator multi-symbol perl6fe"><span>++</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>iteration</span></span></span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;===</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>m</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>list</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>kv</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>i</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>capture</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Capture&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>i</span></span><span>&nbsp;=&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>capture</span></span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>[</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>capture</span></span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>]</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>result-split</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>string</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="entity name section adverb perl6fe"><span>:r</span></span><span>&nbsp;(SQL)&nbsp;(</span><span class="keyword operator quantifiers regexp perl6fe"><span>.</span><span>+</span></span><span>)&nbsp;</span><span class="meta interpolation perl6fe"><span class="punctuation section embedded begin perl6fe"><span>{</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>show-captures</span></span><span>(&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>&nbsp;);&nbsp;</span><span class="punctuation section embedded end perl6fe"><span>}</span></span></span><span>&nbsp;</span><span class="keyword other special-method match variable numbered perlt6e"><span>$1</span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div></pre><p>and the output will remain the same:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>===</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Iteration</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>===</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span></span></div><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>SQL</span></span><span>][&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span><span>]</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword operator multi-symbol perl6fe"><span>===</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Iteration</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>===</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>0</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>SQL</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support type perl6fe"><span>Capture</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span></span></div><div class="line"><span class="source perl6fe"><span>[</span><span class="routine name perl6fe"><span>SQL</span></span><span>][&nbsp;</span><span class="routine name perl6fe"><span>database</span></span><span class="keyword operator generic perl6fe"><span>!</span></span><span>]</span></span></div></pre><p>This demonstrates that disabling backtracking does not mean disabling possible multiple iterations of the matching engine, but rather disabling the backward matching tuning.</p>
<h1 id="$/_changes_each_time_a_regular_expression_is_matched"><a class="u" href="#___top" title="go to top of document"><code>$/</code> changes each time a regular expression is matched</a></h1>
<p>It is worth noting that each time a regular expression is used, the <a href="/type/Match">Match object</a> returned (i.e., <code>$/</code>) is reset. In other words, <code>$/</code> always refers to the very last regular expression matched:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>a&nbsp;lot&nbsp;of&nbsp;Stuff</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Hit&nbsp;a&nbsp;capital&nbsp;letter!</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>A..Z&gt;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢S｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>hit&nbsp;an&nbsp;x!</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;x&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></div></pre><p>The reset of <code>$/</code> applies independently from the scope where the regular expression is matched:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>a&nbsp;lot&nbsp;of&nbsp;Stuff</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>A..Z&gt;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Hit&nbsp;a&nbsp;capital&nbsp;letter</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢S｣</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢S｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="constant language boolean perl6fe"><span>True</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>hit&nbsp;an&nbsp;x!</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;x&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></div></pre><p>The very same concept applies to named captures:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>a&nbsp;lot&nbsp;of&nbsp;Stuff</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>capital</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=</span><span class="meta property regexp perl6fe"><span class="punctuation delimiter property regexp perl6fe"><span>&lt;</span></span><span class="keyword operator charclass open regexp perl6fe"><span>[</span></span><span class="constant character custom property regexp perl6fe"><span>A..Z&gt;</span></span><span class="keyword operator charclass close regexp perl6fe"><span>]</span></span><span class="punctuation delimiter property regexp perl6fe"><span>&gt;</span></span></span><span>&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Hit&nbsp;a&nbsp;capital&nbsp;letter</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>capital</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢S｣</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>capital</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;｢S｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>hit&nbsp;an&nbsp;x!</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>answer</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>~~</span></span><span>&nbsp;</span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span class="string regexp perl6fe"><span>&nbsp;</span><span class="meta match variable perl6fe"><span class="variable other identifier sigil regexp perl6"><span>$</span></span><span class="support class match name delimiter regexp perl6fe"><span>&lt;</span></span><span class="variable other identifier regexp perl6"><span>x</span></span><span class="support class match name delimiter regexp perl6fe"><span>&gt;</span></span></span><span>=x&nbsp;</span></span><span class="punctuation definition regexp perl6fe"><span>/</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>x</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="keyword other special-method perl6fe"><span>$/</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>capital</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;Nil</span><span>&nbsp;</span></span></span></div></pre><h1 id="Best_practices_and_gotchas"><a class="u" href="#___top" title="go to top of document">Best practices and gotchas</a></h1>
<p>The <a href="/language/regexes-best-practices">Regexes: Best practices and gotchas</a> provides useful information on how to avoid common pitfalls when writing regexes and grammars.</p>

    </div>
    
    </div>
<footer class="pretty-box yellow">

  <p>This is the deprecated documentation of the Perl 6 language, currently
      known as Raku. Please use
      <a href="https://docs.raku.org"><code>docs.raku.org</code></a> from now on.</p>

  <p>This page has been superseded by <a href="https://docs.raku.org//language/regexes">/language/regexes</a>.</p>

  <p> This documentation is provided under the terms of the
      <a href="https://raw.githubusercontent.com/perl6/doc/master/LICENSE">Artistic License 2.0</a>.
      The Camelia image is <a href="https://raw.githubusercontent.com/perl6/mu/master/misc/camelia.txt"
        >copyright © 2009 by Larry Wall.</a>
      <!-- CREDITS -->
      <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->

  </p>
</footer>

<script type="text/javascript" src="/js/app.js?v=1"></script>
<script type="text/javascript" src="/js/search.js?v=3"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if (!location.hash || location.hash === "#___top") {
      $('query').focus();
    }
  });
</script>

    </body>
</html>

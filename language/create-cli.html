<!doctype html>
<html lang="en">
    <head>
        <title>Command line interface</title>
        <meta charset="UTF-8" />
        <style>
        kbd { font-family: "Droid Sans Mono", "Luxi Mono", "Inconsolata", monospace }
        samp { font-family: "Terminus", "Courier", "Lucida Console", monospace }
        u { text-decoration: none }
        .nested {
            margin-left: 3em;
        }
        aside, u { opacity: 0.7 }
        a[id^="fn-"]:target { background: #ff0 }
        </style>
        
        
        <meta name=viewport content="width=device-width, initial-scale=1">
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" type="text/css" href="/css/app.css?v=7" media="screen" title="default" />
<noscript> <style> #search { visibility: hidden; } </style> </noscript>

    </head>
    <body class="pod">
    <div id="___top"></div>
    <div id="header" class="pretty-box green">
    <a href="/"
        ><img src="/images/Camelia.svg" alt="»ö«" id="logo" width=62 height=48
        >&nbsp;Perl 6 Documentation</a
    >
    <div id="search" class="ui-widget">
        <div class="green">
            <input placeholder="Loading..." id="query"
                accesskey="f" title="Enter term to search for (hit Esc to focus)" autofocus>
        </div>
        <p id="not-found-message">
            Not in Index (<a href="" id="try-web-search">try site search</a>)
        </p>
    </div>
    <div class="menu">
      <div class="menu-items dark-green"><a class='menu-item darker-green' href='https://perl6.org'><strong>Perl&nbsp;6 homepage</strong></a> 
            <a class="menu-item selected darker-green"
                href="/language.html">
                Language
            </a>
         
            <a class="menu-item "
                href="/type.html">
                Types
            </a>
         
            <a class="menu-item "
                href="/routine.html">
                Routines
            </a>
         
            <a class="menu-item "
                href="/programs.html">
                Programs
            </a>
         
            <a class="menu-item "
                href="https://webchat.freenode.net/?channels=#perl6">
                Chat with us
            </a>
        </div>
    </div>
</div>
<div id="content" class="pretty-box yellow content_Language_create_cli">

      <div align="right">
        <button title="Edit this page"  class="pencil" onclick="location='https://github.com/perl6/doc/edit/master/doc/Language/create-cli.pod6'">
        <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs></defs>
    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="pencil" fill="#000000">
            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
        </g>
    </g>
</svg>

        </button>
      </div>

    <h1 class='title'>Command line interface</h1>
    <p class='subtitle'>Creating your own CLI in Perl&nbsp;6</p>
    <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
   <tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#Command_line_interface_-_an_overview">Command line interface - an overview</a></td></tr>
  <tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="#Parsing_the_command_line_parameters_into_a_capture">Parsing the command line parameters into a capture</a></td></tr>
      <tr class="toc-level-2"><td class="toc-number">1.2</td><td class="toc-text"><a href="#Calling_a_provided_MAIN_subroutine_using_that_capture">Calling a provided <code class="pod-code-inline">MAIN</code> subroutine using that capture</a></td></tr>
        <tr class="toc-level-2"><td class="toc-number">1.3</td><td class="toc-text"><a href="#Creating_/_showing_usage_information_if_calling_MAIN_failed">Creating / showing usage information if calling <code class="pod-code-inline">MAIN</code> failed</a></td></tr>
     <tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="#sub_MAIN">sub MAIN</a></td></tr>
                                                                                                                                                                                      <tr class="toc-level-2"><td class="toc-number">2.1</td><td class="toc-text"><a href="#%*SUB-MAIN-OPTS">%*SUB-MAIN-OPTS</a></td></tr>
           <tr class="toc-level-3"><td class="toc-number">2.1.1</td><td class="toc-text"><a href="#named-anywhere">named-anywhere</a></td></tr>
         <tr class="toc-level-2"><td class="toc-number">2.2</td><td class="toc-text"><a href="#is_hidden-from-USAGE">is hidden-from-USAGE</a></td></tr>
                           <tr class="toc-level-1"><td class="toc-number">3</td><td class="toc-text"><a href="#Unit-scoped_definition_of_MAIN">Unit-scoped definition of <code class="pod-code-inline">MAIN</code></a></td></tr>
                              <tr class="toc-level-2"><td class="toc-number">3.1</td><td class="toc-text"><a href="#sub_USAGE">sub USAGE</a></td></tr>
                  <tr class="toc-level-1"><td class="toc-number">4</td><td class="toc-text"><a href="#Intercepting_CLI_argument_parsing_(2018.10,_v6.d_and_later)">Intercepting CLI argument parsing (2018.10, v6.d and later)</a></td></tr>
       <tr class="toc-level-2"><td class="toc-number">4.1</td><td class="toc-text"><a href="#sub_ARGS-TO-CAPTURE">sub ARGS-TO-CAPTURE</a></td></tr>
                      <tr class="toc-level-1"><td class="toc-number">5</td><td class="toc-text"><a href="#Intercepting_usage_message_generation_(2018.10,_v6.d_and_later)">Intercepting usage message generation (2018.10, v6.d and later)</a></td></tr>
       <tr class="toc-level-2"><td class="toc-number">5.1</td><td class="toc-text"><a href="#sub_RUN-MAIN">sub RUN-MAIN</a></td></tr>
                                                 <tr class="toc-level-2"><td class="toc-number">5.2</td><td class="toc-text"><a href="#sub_GENERATE-USAGE">sub GENERATE-USAGE</a></td></tr>
                  <tr class="toc-level-1"><td class="toc-number">6</td><td class="toc-text"><a href="#Intercepting_MAIN_calling_(before_2018.10,_v6.e)">Intercepting MAIN calling (before 2018.10, v6.e)</a></td></tr>
                  
</table>
</nav>

    <div class="pod-body">
    <p><a name="index-entry-command_line_arguments"></a></p>
<h1 id="Command_line_interface_-_an_overview"><a class="u" href="#___top" title="go to top of document">Command line interface - an overview</a></h1>
<p>The default command line interface of Perl&nbsp;6 scripts consists of three parts:</p>
<h2 id="Parsing_the_command_line_parameters_into_a_capture">Parsing the command line parameters into a <a href="/type/Capture">capture</a></h2>
<p>This looks at the values in <a href="/language/variables#index-entry-%40%2AARGS">@*ARGS</a>, interprets these according to some policy, and creates a <code>Capture</code> object out of that. An alternative way of parsing may be provided by the developer or installed using a module.</p>
<h2 id="Calling_a_provided_MAIN_subroutine_using_that_capture"><a class="u" href="#___top" title="go to top of document">Calling a provided <code>MAIN</code> subroutine using that capture</a></h2>
<p>Standard <a href="/language/functions#index-entry-declarator_multi-Multi-dispatch">multi dispatch</a> is used to call the MAIN subroutine with the generated <code>Capture</code> object. This means that your MAIN subroutine may be a <code>multi sub</code>, each candidate of which is responsible for some part of processing the given command line arguments.</p>
<h2 id="Creating_/_showing_usage_information_if_calling_MAIN_failed"><a class="u" href="#___top" title="go to top of document">Creating / showing usage information if calling <code>MAIN</code> failed</a></h2>
<p>If multi dispatch failed, then the user of the script should be informed as well as possible as to why it failed. By default, this is done by inspecting the signature of each MAIN candidate sub, and any associated pod information. The result is then shown to the user on STDERR (or on STDOUT if <code>--help</code> was specified). An alternative way of generating the usage information may be provided by the developer or installed using a module.</p>
<p><a name="index-entry-MAIN"></a></p>
<h1 id="sub_MAIN"><a class="u" href="#___top" title="go to top of document">sub MAIN</a></h1>
<p>The sub with the special name <code>MAIN</code> will be executed after all relevant entry phasers (<code>BEGIN</code>, <code>CHECK</code>, <code>INIT</code>, <code>PRE</code>, <code>ENTER</code>) have been run and the mainline of the script has been executed. No error will occur if there is no MAIN sub: your script will then just have to do the work, such as argument parsing, in the mainline of the script.</p>
<p>Any normal exit from the MAIN sub will result in an exit code of <code>0</code>, indicating success. Any return value of the MAIN sub will be ignored. If an exception is thrown that is not handled inside the MAIN sub, then the exit code will be <code>1</code>. If the dispatch to MAIN failed, a usage message will be displayed on STDERR and the exit code will be <code>2</code>.</p>
<p>The command line parameters are present in the <code>@*ARGS</code> dynamic variable and may be altered in the mainline of the script before the <code>MAIN</code> unit is called.</p>
<p>The signature of (the candidates of the multi) sub MAIN determines which candidate will actually be called using the standard <a href="/language/glossary#index-entry-Multi-Dispatch">multi dispatch</a> semantics.</p>
<p>A simple example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;inside&nbsp;file&nbsp;&#39;hello.p6&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Hello&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>name</span></span><span>,&nbsp;how&nbsp;are&nbsp;you?</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>If you call that script without any parameters:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Usage</span></span><span class="keyword operator generic perl6fe"><span>:</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>name</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span></span></div></pre><p>However, if you give a default value for the parameter, running the script either with or without specifying a name will always work:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;inside&nbsp;file&nbsp;&#39;hello.p6&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>bashful</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Hello&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>name</span></span><span>,&nbsp;how&nbsp;are&nbsp;you?</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Hello</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>bashful</span></span><span>,&nbsp;</span><span class="routine name perl6fe"><span>how</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>are</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>you</span></span><span class="keyword operator generic perl6fe"><span>?</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Liz</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Hello</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>Liz</span></span><span>,&nbsp;</span><span class="routine name perl6fe"><span>how</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>are</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>you</span></span><span class="keyword operator generic perl6fe"><span>?</span></span></span></div></pre><p>Another way to do this is to make <code>sub MAIN</code> a <code>multi sub</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;inside&nbsp;file&nbsp;&#39;hello.p6&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator multi perl6fe"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Hello&nbsp;bashful,&nbsp;how&nbsp;are&nbsp;you?</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator multi perl6fe"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Hello&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>name</span></span><span>,&nbsp;how&nbsp;are&nbsp;you?</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>Which would give the same output as the examples above. Whether you should use either method to achieve the desired goal is entirely up to you.</p>
<p>A more complicated example using a single positional and multiple named parameters:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;inside&nbsp;&quot;frobnicate.p6&quot;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>where</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span><span>.</span></span><span class="support type perl6fe"><span>IO</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>f</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>file.dat</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>24</span></span><span>,</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Bool</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>verbose</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>defined</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>defined</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Verbosity&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,&nbsp;(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>verbose</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>??</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>on</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>!!</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>off</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>With <code>file.dat</code> present, this will work this way:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span></span></div><div class="line"><span class="source perl6fe"><span class="constant numeric perl6fe"><span>24</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>file</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>dat</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Verbosity</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>off</span></span></span></div></pre><p>Or this way with <code>--verbose</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>verbose</span></span></span></div><div class="line"><span class="source perl6fe"><span class="constant numeric perl6fe"><span>24</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>file</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>dat</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Verbosity</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>on</span></span></span></div></pre><p>If the file <code>file.dat</code> is not present, or you&#39;ve specified another filename that doesn&#39;t exist, you would get the standard usage message created from introspection of the <code>MAIN</code> sub:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>doesntexist</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>dat</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Usage</span></span><span class="keyword operator generic perl6fe"><span>:</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;[</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>length</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>Int</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>]&nbsp;[</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>verbose</span></span><span>]&nbsp;[</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>file</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>]</span></span></div></pre><p>Although you don&#39;t have to do anything in your code to do this, it may still be regarded as a bit terse. But there&#39;s an easy way to make that usage message better by providing hints using pod features:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;inside&nbsp;&quot;frobnicate.p6&quot;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>where</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span><span>.</span></span><span class="support type perl6fe"><span>IO</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>f</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>file.dat</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>=&nbsp;an&nbsp;existing&nbsp;file&nbsp;to&nbsp;frobnicate</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>24</span></span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>=&nbsp;length&nbsp;needed&nbsp;for&nbsp;frobnication</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Bool</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>verbose</span></span></span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>=&nbsp;required&nbsp;verbosity</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>defined</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>defined</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Verbosity&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,&nbsp;(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>verbose</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>??</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>on</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>!!</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>off</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>Which would improve the usage message like this:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>doesntexist</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>dat</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Usage</span></span><span class="keyword operator generic perl6fe"><span>:</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;[</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>length</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>Int</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>]&nbsp;[</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>verbose</span></span><span>]&nbsp;[</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>file</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>]</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;[</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>file</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>existing</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>file</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>to</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>length</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>Int</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>length</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>needed</span></span><span>&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>frobnication</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>verbose</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type trait perl6fe"><span>required</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>verbosity</span></span></span></div></pre><p>As any other subroutine, <code>MAIN</code> can define <a href="$SOLIDUSSignature#index-entry-aliases">aliases</a> for its named parameters.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>where</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span><span>.</span></span><span class="support type perl6fe"><span>IO</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>f</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>file.dat</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>=&nbsp;an&nbsp;existing&nbsp;file&nbsp;to&nbsp;frobnicate</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>size</span></span><span>(</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span>)&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>24</span></span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>=&nbsp;length/size&nbsp;needed&nbsp;for&nbsp;frobnication</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Bool</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>verbose</span></span></span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>=&nbsp;required&nbsp;verbosity</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>defined</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>defined</span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Verbosity&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,&nbsp;(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>verbose</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>??</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>on</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>!!</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>off</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>In which case, these aliases will also be listed as alternatives with <code>--help</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Usage</span></span><span class="keyword operator generic perl6fe"><span>:</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;[</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>size</span></span><span class="keyword operator generic perl6fe"><span>|</span></span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>length</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>Int</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>]&nbsp;[</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>verbose</span></span><span>]&nbsp;[</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>file</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>]</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;[</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>file</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>an</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>existing</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>file</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>to</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>frobnicate</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>size</span></span><span class="keyword operator generic perl6fe"><span>|</span></span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>length</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>Int</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>length</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>needed</span></span><span>&nbsp;</span><span class="keyword control repeat perl6fe"><span>for</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>frobnication</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>verbose</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type trait perl6fe"><span>required</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>verbosity</span></span></span></div></pre><p><a name="index-entry-%25*SUB-MAIN-OPTS"></a></p>
<h2 id="%*SUB-MAIN-OPTS"><a class="u" href="#___top" title="go to top of document">%*SUB-MAIN-OPTS</a></h2>
<p>It&#39;s possible to alter how arguments are processed before they&#39;re passed to <code>sub MAIN {}</code> by setting options in the <code>%*SUB-MAIN-OPTS</code> hash. Due to the nature of dynamic variables, it is required to set up the <code>%*SUB-MAIN-OPTS</code> hash and fill it with the appropriate settings. For instance:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage modifier declarator perl6fe"><span>my</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>%</span></span><span class="support class twigil perl6fe"><span>*</span></span><span class="variable other identifier perl6fe"><span>SUB-MAIN-OPTS</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>named-anywhere</span></span><span>,&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;allow&nbsp;named&nbsp;variables&nbsp;at&nbsp;any&nbsp;location</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;other&nbsp;possible&nbsp;future&nbsp;options&nbsp;/&nbsp;custom&nbsp;options</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>&nbsp;(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>b</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>c</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>d</span></span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Accepted!</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>Available options are:</p>
<p><a name="index-entry-named-anywhere"></a></p>
<h3 id="named-anywhere"><a class="u" href="#___top" title="go to top of document">named-anywhere</a></h3>
<p>By default, named arguments passed to the program (i.e., <code>MAIN</code>) cannot appear after any positional argument. However, if <code>%*SUB-MAIN-OPTS&lt;named-anywhere&gt;</code> is set to a true value, named arguments can be specified anywhere, even after positional parameter. For example, the above program can be called with:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>example</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>c</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>3</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>d</span></span><span class="storage modifier assignment perl6fe"><span>=</span></span><span class="constant numeric perl6fe"><span>4</span></span></span></div></pre><p><a name="index-entry-hidden-from-USAGE"></a></p>
<h2 id="is_hidden-from-USAGE"><a class="u" href="#___top" title="go to top of document">is hidden-from-USAGE</a></h2>
<p>Sometimes you want to exclude a <code>MAIN</code> candidate from being shown in any automatically generated usage message. This can be achieved by adding a <code>hidden-from-USAGE</code> trait to the specification of the MAIN candidate you do not want to show. Expanding on an earlier example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;inside&nbsp;file&nbsp;&#39;hello.p6&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator multi perl6fe"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>()&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>is</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>hidden-from-USAGE</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Hello&nbsp;bashful,&nbsp;how&nbsp;are&nbsp;you?</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator multi perl6fe"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>=&nbsp;the&nbsp;name&nbsp;by&nbsp;which&nbsp;you&nbsp;would&nbsp;like&nbsp;to&nbsp;be&nbsp;called</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>Hello&nbsp;</span><span class="variable other identifier interpolated perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span>name</span></span><span>,&nbsp;how&nbsp;are&nbsp;you?</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>So, if you would call this script with just a named variable, you would get the following usage:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>verbose</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Usage</span></span><span class="keyword operator generic perl6fe"><span>:</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>name</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>the</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>name</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>by</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>which</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>you</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>would</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>like</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>to</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>be</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>called</span></span></span></div></pre><p>Without the <code>hidden-from-USAGE</code> trait on the first candidate, it would have looked like this:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="keyword other special-method perl6fe"><span>$</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>perl6</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span class="routine name perl6fe"><span>verbose</span></span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>Usage</span></span><span class="keyword operator generic perl6fe"><span>:</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>hello</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="routine name perl6fe"><span>p6</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>name</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>the</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>name</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>by</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>which</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>you</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>would</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>like</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>to</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>be</span></span><span>&nbsp;</span><span class="routine name perl6fe"><span>called</span></span></span></div></pre><p>Which, although technically correct, doesn&#39;t read as well.</p>
<p><a name="index-entry-declarator_unit_(MAIN)"></a></p>
<h1 id="Unit-scoped_definition_of_MAIN"><a class="u" href="#___top" title="go to top of document">Unit-scoped definition of <code>MAIN</code></a></h1>
<p>If the entire program body resides within <code>MAIN</code>, you can use the <code>unit</code> declarator as follows (adapting an earlier example):</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>unit</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints perl6fe"><span>where</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span><span>.</span></span><span class="support type perl6fe"><span>IO</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>f</span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>file.dat</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>24</span></span><span>,</span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;&nbsp;</span><span class="support type perl6fe"><span>Bool</span></span><span>&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>verbose</span></span></span><span>,</span></span></div><div class="line"><span class="source perl6fe"><span>);&nbsp;&nbsp;</span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;&lt;-&nbsp;note&nbsp;semicolon&nbsp;here</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span>&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>length</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>defined</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional perl6fe"><span>if</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>file</span></span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>defined</span></span><span>;</span></span></div><div class="line"><span class="source perl6fe"><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>Verbosity&nbsp;</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>,&nbsp;(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>verbose</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>??</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>on</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>!!</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>off</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source perl6fe"><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;rest&nbsp;of&nbsp;script&nbsp;is&nbsp;part&nbsp;of&nbsp;MAIN</span><span>&nbsp;</span></span></span></div></pre><p>Note that this is only appropriate if you can get by with just a single (only) <code>sub MAIN</code>.</p>
<p><a name="index-entry-USAGE"></a><a name="index-entry-$*USAGE"></a></p>
<h2 id="sub_USAGE"><a class="u" href="#___top" title="go to top of document">sub USAGE</a></h2>
<p>If no multi candidate of <code>MAIN</code> is found for the given command line parameters, the sub <code>USAGE</code> is called. If no such method is found, the compiler will output a default usage message.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta documentation block declarator perl6fe"><span class="comment punctuation pound perl6fe"><span>#</span></span><span class="meta declarator perl6fe"><span>|</span></span><span class="comment inline declarator perl6fe"><span>(is&nbsp;it&nbsp;the&nbsp;answer)</span></span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>multi</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span><span class="support type perl6fe"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>i</span></span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>i</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>==</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>42</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>??</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>answer</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>!!</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>dunno</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta documentation block declarator perl6fe"><span class="comment punctuation pound perl6fe"><span>#</span></span><span class="meta declarator perl6fe"><span>|</span></span><span class="comment inline declarator perl6fe"><span>(divide&nbsp;two&nbsp;numbers)</span></span><span>&nbsp;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>multi</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>MAIN</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>b</span></span></span><span>)</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="support function perl6fe"><span>say</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>a</span></span></span><span class="keyword operator generic perl6fe"><span>/</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>b</span></span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>USAGE</span></span><span>()&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function perl6fe"><span>print</span></span><span>&nbsp;</span><span class="meta heredoc perl6fe"><span class="string quoted construct perl6fe"><span>Q</span></span><span class="support function adverb perl6fe"><span>:c:to</span></span><span>/</span><span class="entity other attribute-name heredoc delimiter perl6fe"><span>EOH</span></span><span>/</span><span class="meta heredoc continuation perl6fe"><span>;</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;Usage:&nbsp;{$*PROGRAM-NAME}&nbsp;[number]</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta heredoc perl6fe"><span class="string quoted q heredoc perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;Prints&nbsp;the&nbsp;answer&nbsp;or&nbsp;&#39;dunno&#39;.</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta heredoc perl6fe"><span class="entity other attribute-name heredoc delimiter perl6fe"><span>EOH</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>The default usage message is available inside <code>sub USAGE</code> via the read-only <code>$*USAGE</code> variable. It will be generated based on available <code>sub MAIN</code> candidates and their parameters. As shown before, you can specify an additional extended description for each candidate using a <code>#|(...)</code> Pod block to set <a href="/routine/WHY"><code>WHY</code></a>.</p>
<h1 id="Intercepting_CLI_argument_parsing_(2018.10,_v6.d_and_later)"><a class="u" href="#___top" title="go to top of document">Intercepting CLI argument parsing (2018.10, v6.d and later)</a></h1>
<p>You can replace or augment the default way of argument parsing by supplying a <code>ARGS-TO-CAPTURE</code> subroutine yourself, or by importing one from any of the <a href="https://modules.perl6.org/search/?q=getopt">Getopt</a> modules available in the ecosystem.</p>
<p><a name="index-entry-ARGS-TO-CAPTURE"></a></p>
<h2 id="sub_ARGS-TO-CAPTURE"><a class="u" href="#___top" title="go to top of document">sub ARGS-TO-CAPTURE</a></h2>
<p>The <code>ARGS-TO-CAPTURE</code> subroutine should accept two parameters: a <a href="/type/Callable">Callable</a> representing the <code>MAIN</code> unit to be executed (so it can be introspected if necessary) and an array with the arguments from the command line. It should return a <a href="/type/Capture">Capture</a> object that will be used to dispatch the <code>MAIN</code> unit. A <strong>very</strong> contrived example that will create a <code>Capture</code> depending on some keyword that was entered (which can be handy during testing of a command line interface of a script):</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>ARGS-TO-CAPTURE</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>main</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>args</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Capture</span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;if&nbsp;we&nbsp;only&nbsp;specified&nbsp;&quot;frobnicate&quot;&nbsp;as&nbsp;an&nbsp;argument</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>args</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>==</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>args</span></span></span><span>[</span><span class="constant numeric perl6fe"><span>0</span></span><span>]&nbsp;</span><span class="keyword operator word perl6fe"><span>eq</span></span><span>&nbsp;</span><span class="string quoted single single perl6fe"><span class="punctuation definition string begin perl6fe"><span>&#39;</span></span><span>frobnicate</span><span class="punctuation definition string end perl6fe"><span>&#39;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;then&nbsp;dispatch&nbsp;as&nbsp;MAIN(&quot;foo&quot;,&quot;bar&quot;,verbose&nbsp;=&gt;&nbsp;2)</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>??</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Capture</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>new</span></span><span>(&nbsp;</span><span class="string pair key perl6fe"><span>list&nbsp;</span></span><span class="keyword operator multi-symbol perl6fe"><span>=&gt;</span></span><span>&nbsp;</span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>foo&nbsp;bar</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span>,&nbsp;</span><span class="string pair key perl6fe"><span>hash&nbsp;</span></span><span class="keyword operator multi-symbol perl6fe"><span>=&gt;</span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span><span>&nbsp;</span><span class="string pair key perl6fe"><span>verbose&nbsp;</span></span><span class="keyword operator multi-symbol perl6fe"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric perl6fe"><span>2</span></span><span>&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span><span>&nbsp;)</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation whitespace comment leading perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign perl6fe"><span class="punctuation definition comment perl6fe"><span>#</span></span><span>&nbsp;otherwise,&nbsp;use&nbsp;default&nbsp;processing&nbsp;of&nbsp;args</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>!!</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="support class twigil perl6fe"><span>*</span></span><span class="variable other identifier perl6fe"><span>ARGS-TO-CAPTURE</span></span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>main</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>args</span></span></span><span>)</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>Note that the dynamic variable <a href="/language/variables#%26%2AARGS-TO-CAPTURE"><code>&amp;*ARGS-TO-CAPTURE</code></a> is available to perform the default command line arguments to <code>Capture</code> processing so you don&#39;t have to reinvent the whole wheel if you don&#39;t want to.</p>
<h1 id="Intercepting_usage_message_generation_(2018.10,_v6.d_and_later)"><a class="u" href="#___top" title="go to top of document">Intercepting usage message generation (2018.10, v6.d and later)</a></h1>
<p>You can replace or augment the default way of usage message generation (after a failed dispatch to MAIN) by supplying a <code>GENERATE-USAGE</code> subroutine yourself, or by importing one from any of the <a href="https://modules.perl6.org/search/?q=getopt">Getopt</a> modules available in the ecosystem.</p>
<p><a name="index-entry-RUN-MAIN"></a></p>
<h2 id="sub_RUN-MAIN"><a class="u" href="#___top" title="go to top of document">sub RUN-MAIN</a></h2>
<p>Defined as:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>RUN-MAIN</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>main</span></span></span><span>,&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>mainline</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>in-as-argsfiles</span></span></span><span>)</span></span></div></pre><p>This routine allows complete control over the handling of <code>MAIN</code>. It gets a <code>Callable</code> that is the MAIN that should be executed, the return value of the mainline execution and additional named variables: <code>:in-as-argsfiles</code> which will be <code>True</code> if STDIN should be treated as <code>$*ARGFILES</code>.</p>
<p>If <code>RUN-MAIN</code> is not provided, a default one will be run that looks for subroutines of the old interface, such as <code>MAIN_HELPER</code> and <code>USAGE</code>. If found, will execute following the &quot;old&quot; semantics.</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="meta class perl6fe"><span class="storage type class perl6fe"><span>class</span></span><span>&nbsp;</span><span class="entity name type class perl6fe"><span>Hero</span></span></span><span>&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>has</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="support class twigil perl6fe"><span>!</span></span><span class="variable other identifier perl6fe"><span>inventory</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator perl6fe"><span>has</span></span><span>&nbsp;</span><span class="support type perl6fe"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="support class twigil perl6fe"><span>.</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>;</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type perl6fe"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>BUILD</span></span><span>(&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>inventory</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="support class twigil perl6fe"><span>!</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="support class twigil perl6fe"><span>!</span></span><span class="variable other identifier perl6fe"><span>inventory</span></span></span><span>&nbsp;</span><span class="storage modifier assignment perl6fe"><span>=</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>inventory</span></span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>new-main</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>*</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>stuff</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>Hero</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>new</span></span><span>(</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>name</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>name</span></span></span><span>),&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="routine name perl6fe"><span>inventory</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>@</span></span><span class="variable other identifier perl6fe"><span>stuff</span></span></span><span>)&nbsp;)</span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>perl</span></span><span class="keyword operator generic perl6fe"><span>.</span></span><span class="support function perl6fe"><span>say</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span>&nbsp;</span></span></div><div class="line"><span class="source perl6fe"><span class="routine name perl6fe"><span>RUN-MAIN</span></span><span>(&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>new-main</span></span></span><span>,&nbsp;</span><span class="support type perl6fe"><span>Nil</span></span><span>&nbsp;);</span></span></div></pre><p>This will print the name (first argument) of the generated object.</p>
<p><a name="index-entry-GENERATE-USAGE"></a></p>
<h2 id="sub_GENERATE-USAGE"><a class="u" href="#___top" title="go to top of document">sub GENERATE-USAGE</a></h2>
<p>The <code>GENERATE-USAGE</code> subroutine should accept a <code>Callable</code> representing the <code>MAIN</code> subroutine that didn&#39;t get executed because the dispatch failed. This can be used for introspection. All the other parameters are the parameters that were set up to be sent to <code>MAIN</code>. It should return the string of the usage information you want to be shown to the user. An example that will just recreate the <code>Capture</code> that was created from processing the arguments:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>GENERATE-USAGE</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>main</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>|</span></span><span class="routine name perl6fe"><span>capture</span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name perl6fe"><span>capture</span></span><span class="span keyword operator array words perl6fe"><span>&lt;</span></span><span class="string array words perl6fe"><span>foo</span></span><span class="span keyword operator array words perl6fe"><span>&gt;</span></span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="support function perl6fe"><span>exists</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>??</span></span><span>&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>You&#39;re&nbsp;not&nbsp;allowed&nbsp;to&nbsp;specify&nbsp;a&nbsp;--foo</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol perl6fe"><span>!!</span></span><span>&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="support class twigil perl6fe"><span>*</span></span><span class="variable other identifier perl6fe"><span>GENERATE-USAGE</span></span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>main</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>|</span></span><span class="routine name perl6fe"><span>capture</span></span><span>)</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>You can also use multi subroutines to create the same effect:</p>
<pre class="editor editor-colors"><div class="line"><span class="source perl6fe"><span class="storage type declarator multi perl6fe"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>GENERATE-USAGE</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>main</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>:</span></span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>$</span></span><span class="variable other identifier perl6fe"><span>foo</span></span></span><span class="keyword operator generic perl6fe"><span>!</span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double perl6fe"><span class="punctuation definition string begin perl6fe"><span>&quot;</span></span><span>You&#39;re&nbsp;not&nbsp;allowed&nbsp;to&nbsp;specify&nbsp;a&nbsp;--foo</span><span class="punctuation definition string end perl6fe"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="storage type declarator multi perl6fe"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type perl6fe"><span>sub</span></span><span>&nbsp;</span><span class="entity name function perl6fe"><span>GENERATE-USAGE</span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>main</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>|</span></span><span class="routine name perl6fe"><span>capture</span></span><span>)&nbsp;</span><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>{</span></span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="support class twigil perl6fe"><span>*</span></span><span class="variable other identifier perl6fe"><span>GENERATE-USAGE</span></span></span><span>(</span><span class="meta variable container perl6fe"><span class="variable other identifier sigil perl6fe"><span>&amp;</span></span><span class="variable other identifier perl6fe"><span>main</span></span></span><span>,&nbsp;</span><span class="keyword operator generic perl6fe"><span>|</span></span><span class="routine name perl6fe"><span>capture</span></span><span>)</span></span></span></div><div class="line"><span class="source perl6fe"><span class="meta block perl6fe"><span class="punctuation definition block perl6fe"><span>}</span></span></span></span></div></pre><p>Note that the dynamic variable <a href="/language/variables#%26%2AGENERATE-USAGE"><code>&amp;*GENERATE-USAGE</code></a> is available to perform the default usage message generation so you don&#39;t have to reinvent the whole wheel if you don&#39;t want to.</p>
<h1 id="Intercepting_MAIN_calling_(before_2018.10,_v6.e)"><a class="u" href="#___top" title="go to top of document">Intercepting MAIN calling (before 2018.10, v6.e)</a></h1>
<p>An older interface enabled one to intercept the calling to <code>MAIN</code> completely. This depended on the existence of a <code>MAIN_HELPER</code> subroutine that would be called if a <code>MAIN</code> subroutine was found in the mainline of a program.</p>
<p>This interface was never documented. However, any programs using this undocumented interface will continue to function until <code>v6.e</code>. From v6.d onward, the use of the undocumented API will cause a <code>DEPRECATED</code> message.</p>
<p>Ecosystem modules can provide both the new and the old interface for compatibility with older versions of Perl&nbsp;6: if a newer Perl&nbsp;6 recognizes the new (documented) interface, it will use that. If there is no new interface subroutine available, but the old <code>MAIN_HELPER</code> interface is, then it will use the old interface.</p>
<p>If a module developer decides to only offer a module for <code>v6.d</code> or higher, then the support for the old interface can be removed from the module.</p>

    </div>
    
    </div>
<footer class="pretty-box yellow">
  <p>
      From <a href='https://github.com/perl6/doc/blob/master/doc/Language/create-cli.pod6'>Language/create-cli.pod6</a> at <a href='https://github.com/perl6/doc'>perl6/doc on GitHub</a>, commit <a href="https://github.com/perl6/doc/commit/b8b8af22"><span id="footer-commit">b8b8af22</span></a>.
      <br/>
      This is a work in progress to document Perl 6, and known to be
      incomplete.
      <br/>
      <a href="https://github.com/perl6/doc/blob/master/CONTRIBUTING.md#reporting-bugs">Please report any issues</a> or <a href='https://github.com/perl6/doc/edit/master/doc/Language/create-cli.pod6'>edit this page</a>.
      Your contribution is appreciated.
      <br/>
      Generated on 2019-05-27T17:18:58Z
  </p>
  <p>
      This documentation is provided under the terms of the
      <a href="https://raw.githubusercontent.com/perl6/doc/master/LICENSE">Artistic License 2.0</a>.
      The Camelia image is <a href="https://raw.githubusercontent.com/perl6/mu/master/misc/camelia.txt"
        >copyright © 2009 by Larry Wall.</a>
      <!-- CREDITS -->
      <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->

  </p>
</footer>

<script type="text/javascript" src="/js/app.js?v=1"></script>
<script type="text/javascript" src="/js/search.js?v=3"></script>

    </body>
</html>
